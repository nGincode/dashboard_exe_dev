"use strict";function r(){return r=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},r.apply(this,arguments)}function e(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=r[t];return o}function t(r){return"string"==typeof r?r:r.column}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPagination=function(o){var n=o.first,i=o.after,a=o.last,u=o.before;if(void 0===n&&void 0===a)throw new Error("pagination requires either a `first` or `last` param");var s,c,f=(c={first:n,after:i,last:a,before:u}).last?{direction:"backward",cursor:c.before,limit:c.last}:{direction:"forward",cursor:c.after,limit:c.first},d=function(r,e){if("desc"===r){if("forward"===e)return"<";if("backward"===e)return">"}return"forward"===e?">":"<"}(o.sortDirection,f.direction),l=(s=o.sortDirection,"forward"===f.direction?s:"desc"===s?"asc":"desc"),v=t(o.sortColumn),m=t(o.cursorColumn),g={column:v,direction:l},p=f.limit,h=f.limit+1,b=function(){if(void 0===f.cursor)return{column:function(r){return r},comparator:">",value:0};var r=o.deobfuscateCursor,e=(void 0===r?atob:r)(f.cursor);return{column:v,comparator:d,value:function(r){return r.from(o.from).select(v).where(m,"=",e)}}}();return r({},{orderBy:g,limit:h,where:b},{getPage:function(r,t){void 0===t&&(t={});var n,a=o.obfuscateCursor,s=void 0===a?btoa:a,c=o.onCursorMissing,d=void 0===c?"omit":c,l=t.mapItem,v=void 0===l?function(r){return r}:l,m="string"==typeof(n=o.cursorColumn)?n:n.alias,g=function(r){if(0===r.length)return[[],void 0];if(r.length<=p)return["backward"===f.direction?[].concat(r.reverse()):r,void 0];if(r.length===h){var e=[].concat(r),t=e.pop();return["backward"===f.direction?e.reverse():e,t]}throw new Error("the queried row count exceeds the expected limit based on the pagination params")}(r),b=g[0],w=g[1];if(0===b.length)return{edges:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1,endCursor:void 0,startCursor:void 0}};for(var y,C=[],P=function(r,t){var o="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(o)return(o=o.call(r)).next.bind(o);if(Array.isArray(r)||(o=function(r,t){if(r){if("string"==typeof r)return e(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);return"Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(r,t):void 0}}(r))){o&&(r=o);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(b);!(y=P()).done;){var j=y.value,x=j[m];if(null!=x){var O={cursor:s(x.toString()),node:v(j)};C.push(O)}else if("throw"===d)throw new Error("cursor is missing")}return{edges:C,pageInfo:{hasNextPage:"backward"===f.direction?!!u:!!w,hasPreviousPage:"forward"===f.direction?!!i:!!w,startCursor:C[0].cursor,endCursor:C[C.length-1].cursor}}}})};
//# sourceMappingURL=knex-relay-cursor-pagination.cjs.production.min.js.map
