(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2859,4527],{11959:function(e,a,t){Promise.resolve().then(t.bind(t,22532))},22532:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return L}});var n=t(57437),r=t(2265),i=t(71275),l=t(65188),o=t(30939),s=t(27840),c=t(68348),d=t(3650),u=t(27233),p=t(88625),m=t(78421),h=t(62476),g=t(46682),f=t(18357),v=t(95053),y=t(32034),x=t(23288),_=t(10549),k=t(62575),b=t(38378),j=t(9257),w=t(52943),S=t(24772),Z=t(42005),z=t(16463),N=t(62737),P=t.n(N),C=t(12166),T=t(1071),I=t(9707),A=t(38472),F=e=>{let{visible:a,onCancel:t,dataPerFile:i,getDataMaster:l,periodeDate:s}=e,{date:d,recordForDay:p,dateKey:h}=i,[f,v]=(0,r.useState)({}),y=c.Z.useApp(),{message:x,notification:_,modal:k}=y;console.log("recordForDay",p);let b=async(e,a,n)=>{let r=a.i_id;console.log("recordForDay",a),v(e=>({...e,[n]:{loading:!0,error:!1}}));let i=new FormData;i.append("i_id",r),i.append("d_opr",d),i.append("n_file_path",e);try{let e=await (0,Z.Z)({"Content-Type":"multipart/form-data"}).post("/prasarana/maintenance/technical/file",i);(0,o.Z)({res:e,app:y})?(x.success("Successful Save"),v(e=>({...e,[n]:{loading:!1,error:!1}})),l(s.period_year,s.period_month),t()):v(e=>({...e,[n]:{loading:!1,error:!0}}))}catch(e){console.error("Error uploading file:",e),v(e=>({...e,[n]:{loading:!1,error:!0}}))}},w=async e=>{try{let a={i_id:e.i_id};v(e=>({...e,[h]:{loading:!0,error:!1}}));let n=await (0,Z.Z)().del("/prasarana/maintenance/technical/file",a);200===n.status?(v(e=>({...e,[h]:{loading:!1,error:!1}})),x.success("Successful Save"),l(s.period_year,s.period_month),t()):v(e=>({...e,[h]:{loading:!1,error:!0}}))}catch(e){console.error("Error deleting file:",e),v(e=>({...e,[h]:{loading:!1,error:!0}}))}},S=async e=>{if(!e){x.error("File tidak tersedia.");return}try{v(e=>({...e,[h]:{loading:!0,error:!1}}));let a=localStorage.getItem("accessToken"),t=await A.Z.get(e,{responseType:"blob",headers:{Authorization:"Bearer ".concat(a)}});if("application/json"===t.data.type){let e=new FileReader;e.onload=()=>{let a=JSON.parse(e.result);if("401"===a.code){x.error("Download failed"),v(e=>({...e,[h]:{loading:!1,error:!0}}));return}},e.readAsText(t.data);return}let n=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=n,r.setAttribute("download","file.pdf"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),x.success("File berhasil diunduh"),v(e=>({...e,[h]:{loading:!1,error:!1}}))}catch(e){console.error("Error downloading file:",e),x.error("Gagal mengunduh file"),v(e=>({...e,[h]:{loading:!1,error:!0}}))}finally{v(e=>({...e,[h]:{loading:!1,error:!1}}))}},{loading:z,error:N}=f[h]||{loading:!1,error:!1};return(0,n.jsxs)(j.Z,{title:"File Options",visible:a,footer:null,onCancel:t,children:[(0,n.jsx)("p",{children:"Anda dapat melakukan download, upload, atau menghapus data ini."}),(0,n.jsxs)("div",{className:"mt-4 flex justify-between items-center px-8",children:[(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(C.Z,{}),type:"link",size:"large",style:{width:"120px"},disabled:z,onClick:()=>{var e;return S(null==i?void 0:null===(e=i.recordForDay)||void 0===e?void 0:e.n_file_path)},children:"Download"}),(0,n.jsx)(u.default,{beforeUpload:e=>("application/pdf"!==e.type?x.error("You can only upload PDF files!"):b(e,p,h),!1),showUploadList:!1,maxCount:1,accept:"application/pdf",children:(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(T.Z,{}),type:"link",size:"large",disabled:z,style:{width:"120px"},children:(0,n.jsx)("span",{children:"Upload"})})}),(0,n.jsx)(g.ZP,{danger:!0,disabled:z,icon:(0,n.jsx)(I.Z,{}),size:"large",type:"link",style:{width:"120px"},onClick:()=>w(p),children:"Delete"})]}),z&&(0,n.jsx)(m.Z,{spinning:z,children:"Processing..."}),N&&(0,n.jsx)("p",{style:{color:"red"},children:"Error: Upload gagal."})]})},D=t(86391),E=t(97501),Y=t(27824),K=t.n(Y);let U=async(e,a,t,n,r,i)=>{let l=()=>{let n=t.period_month.split("_")[0],r=t.period_year.split("_")[0],i=new E.default("landscape"),l="Periode: ".concat(n," - ").concat(r);i.setFontSize(7),i.text(l,15,10),i.setFontSize(7),i.text("Perawatan, Indikator Teknis",15,15);let o=Array.from({length:P()("".concat(r,"-").concat(n)).daysInMonth()},(e,a)=>(a+1).toString().padStart(2,"0")),s=[{header:"Indikator Kinerja",dataKey:"indicator"},...o.map(e=>({header:e,dataKey:e}))],c=e.flatMap(e=>[{indicator:e.n_indicator,...Object.fromEntries(o.map(e=>[e,""])),_isSeparator:!0},...[{indicator:"Perawatan yang tidak sesuai Standar Teknis dan SOP",column:"column_1"},{indicator:"Perawatan yang terlambat dilakukan",column:"column_2"},{indicator:"Kerusakan yang mengakibatkan Kerusakan di definisikan sebagai penyimpangan dari keadaan normal jalur KA yang mengakibatkan gangguan keterlambatan, atau pembatalan operasi",column:"column_3"}].map(t=>{let n={...t};return o.forEach(e=>{n[e]="-"}),o.forEach(r=>{a.forEach(a=>{P()(a.d_opr).format("DD")===r&&a.indicator.forEach(a=>{if(a.c_indicator===e.c_indicator){let e=a.sub_indicator.find(e=>e.column===t.column);e&&(n[r]=e.i_value)}})})}),n})]);return K()(i,{startY:20,head:[["Indikator Kinerja",...o]],body:c.map(e=>e._isSeparator?[{content:e.indicator,colSpan:s.length}]:s.map(a=>e[a.dataKey])),styles:{fontSize:6,cellPadding:1,lineWidth:.1,lineColor:[0,0,0]},headStyles:{fontSize:6,fillColor:"#d0e5f5"},footStyles:{fontSize:6},didParseCell:e=>{let a=c[e.row.index],t=e.column.index;a._isSeparator?(e.cell.styles.halign="center",e.cell.styles.fillColor="#0d6bb5",e.cell.styles.textColor=[255,255,255]):(0===t?e.cell.styles.fillColor=[255,255,255]:"-"!==e.cell.raw&&""!==e.cell.raw?e.cell.styles.fillColor=[240,240,240]:e.cell.styles.fillColor=[255,255,255],e.cell.styles.textColor=[0,0,0]),t>0&&(e.cell.styles.halign="center")},didDrawPage:()=>{i.setFontSize(8),i.internal.pages.length}}),i.output("arraybuffer")},o=async e=>{var a;let t=localStorage.getItem("accessToken"),n=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/pdf","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw Error("Failed to fetch existing PDF");let r=Number(n.headers.get("Content-Length")),l=null===(a=n.body)||void 0===a?void 0:a.getReader(),o=[],s=0;for(;;){let{done:e,value:a}=await l.read();if(e)break;o.push(a),i(Math.round((s+=a.length)/r*100))}return new Blob(o).arrayBuffer()},s=async()=>{r(!0);try{let e=await l(),a=await o(n),r=t.period_month.split("_")[0],i=t.period_year.split("_")[0],s=await D.PDFDocument.load(a),c=await D.PDFDocument.load(e);(await s.copyPages(c,c.getPageIndices())).reverse().forEach(e=>{s.insertPage(0,e)});let d=await s.save(),u=new Blob([d],{type:"application/pdf"}),p=URL.createObjectURL(u),m=document.createElement("a");m.href=p,m.download="Indikator Perawatan Teknis ".concat(i,"-").concat(r,".pdf"),m.click(),URL.revokeObjectURL(p)}catch(e){throw console.error("Error while merging PDFs",e),Error("Failed to download merged PDF")}finally{console.log("selesai download"),r(!1),i(100)}};await s()};var M=t(25325),O=e=>{let{defaultValue:a,disabled:t,onChange:r}=e;return(0,n.jsx)(M.default,{defaultValue:a,style:{textAlign:"center"},disabled:t,onKeyPress:e=>{let a=e.which?e.which:e.keyCode;(a<48||a>57)&&46!==a&&e.preventDefault()},onChange:e=>{let a=e.target.value;""===a&&(a="0");let t=parseFloat(a);isNaN(t)||t<0||r(a)}})};let{Panel:R}=s.default;var L=()=>{var e;let a=(0,r.useContext)(i.Z),t=(0,z.usePathname)(),[N,C]=(0,r.useState)(P()()),T=c.Z.useApp(),{message:I,notification:A,modal:D}=T,[E,Y]=(0,r.useState)(!1),[K,M]=(0,r.useState)({period_year:"",period_month:""}),[L,B]=(0,r.useState)(!1),[q,G]=(0,r.useState)([]),[W,J]=(0,r.useState)([]),[V,H]=(0,r.useState)(!1),[X,Q]=(0,r.useState)([]),[$,ee]=(0,r.useState)(!1),[ea,et]=(0,r.useState)({}),[en,er]=(0,r.useState)(!1),[ei,el]=(0,r.useState)([]),[eo,es]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eu,ep]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),[eg,ef]=(0,r.useState)(""),[ev,ey]=(0,r.useState)(""),[ex,e_]=(0,r.useState)(""),[ek,eb]=(0,r.useState)(""),[ej,ew]=(0,r.useState)(!1),[eS,eZ]=(0,r.useState)(null),[ez,eN]=(0,r.useState)(0),eP=async(e,a)=>{try{B(!0);let t=await (0,Z.Z)().get("/prasarana/indicator?period_year=".concat(e,"&period_month=").concat(a,"&c_dashboard_type=PERAWATAN&c_param=TEKNIS"));if((0,o.Z)({res:t,app:T})){let n=t.data;n.length?(G(n),eC(e,a)):(console.log("data not found"),G([]))}else B(!1)}catch(e){console.log("error get data master",e)}finally{B(!1)}},eC=async(e,a)=>{try{let t=await (0,Z.Z)().get("/prasarana/maintenance/technical?period_year=".concat(e,"&period_month=").concat(a),!0);J(t.data)}catch(e){console.log("error get data operasional",e)}finally{}},eT=async()=>{if(!X||0===X.length){console.log("Payload Save is empty");return}let e={period_month:parseInt(K.period_month,10),period_year:parseInt(K.period_year,10),data:X};try{H(!0);let a=await (0,Z.Z)().post("/prasarana/maintenance/technical",e);(0,o.Z)({res:a,app:T})?(H(!1),I.success("Successfully Saved"),Q([])):H(!1),eP(K.period_year,K.period_month)}catch(e){console.log("error save data technical",e)}finally{H(!1),Y(!1)}},eI=(e,a,t,n,r,i)=>{let l=parseInt(K.period_month,10),o=parseInt(K.period_year,10),s=["Perawatan yang tidak sesuai Standar Teknis dan SOP","Perawatan yang terlambat dilakukan","Kerusakan di definisikan sebagai penyimpangan dari keadaan normal jalur KA yang mengakibatkan gangguan keterlambatan, atau pembatalan operasi"],c=s.indexOf(t);if(-1===c){console.error("Invalid jenisGangguan");return}let d=parseFloat(i),u=s.map((e,a)=>({column:"column_".concat(a+1),i_value:a===c?d:0})),p={d_opr:"".concat(o,"-").concat(l,"-").concat(n),indicator:[{i_id:r||"",c_indicator:a,n_indicator:e,sub_indicator:u,i_status_active:0,n_file_path:void 0}]};Q(e=>{let a=e.find(e=>e.d_opr===p.d_opr&&e.indicator[0].c_indicator===p.indicator[0].c_indicator);if(a){let e=a.indicator[0].sub_indicator.map(e=>({...e,i_value:e.column==="column_".concat(c+1)?d:parseFloat(e.i_value.toString())||0}));a.indicator[0].sub_indicator=e}else e.push(p);return[...e]})},eA=(0,r.useCallback)(e=>[{title:"Indikator Kinerja",dataIndex:"jenisGangguan",key:"jenisGangguan",fixed:"left",width:300},...Array.from({length:N?N.daysInMonth():30},(a,t)=>{var r,i;let l;let o=String(t+1).padStart(2,"0"),s=null===(r=W.data)||void 0===r?void 0:r.find(a=>P()(a.d_opr).date()===t+1&&a.indicator.some(a=>a.c_indicator===e.c_indicator)),c=null==s?void 0:null===(i=s.indicator.find(a=>a.c_indicator===e.c_indicator))||void 0===i?void 0:i.i_status_active;return 4===c?l="green":1===c&&(l="red"),{title:(0,n.jsx)(d.Z,{color:l,children:o}),dataIndex:o,key:o,width:100,align:"center"}})],[N,W]),eF=async(e,a,t,n)=>{let r=t.i_id;et(e=>({...e,[n]:{loading:!0,error:!1}}));let i=new FormData;i.append("i_id",r),i.append("d_opr",e),i.append("n_file_path",a);try{let e=await (0,Z.Z)({"Content-Type":"multipart/form-data"}).post("/prasarana/maintenance/technical/file",i);(0,o.Z)({res:e,app:T})?(I.success("Successfully Saved"),et(e=>({...e,[n]:{loading:!1,error:!1}})),eP(K.period_year,K.period_month)):et(e=>({...e,[n]:{loading:!1,error:!0}}))}catch(e){console.error("Error uploading file:",e),et(e=>({...e,[n]:{loading:!1,error:!0}}))}},eD=(e,a,t)=>{el({date:e,recordForDay:a,dateKey:t}),er(!0)},eE=e=>{var a,t,r,i;let l=N?N.daysInMonth():30,o=P()().format("YYYY-MM-DD"),s=["Perawatan yang tidak sesuai Standar Teknis dan SOP","Perawatan yang terlambat dilakukan","Kerusakan di definisikan sebagai penyimpangan dari keadaan normal jalur KA yang mengakibatkan gangguan keterlambatan, atau pembatalan operasi"],c=s.map((a,t)=>{let r={key:String(t),jenisGangguan:a};for(let t=1;t<=l;t++){let i=String(t).padStart(2,"0"),l=P()("".concat(N.year(),"-").concat(N.month()+1,"-").concat(i)).format("YYYY-MM-DD")>o;r[i]=E?(0,n.jsx)(O,{disabled:l,onChange:t=>{eI(e.n_indicator,e.c_indicator,a,i,"",t)}}):"-"}return r});W&&Array.isArray(W.data)&&(null==W||null===(a=W.data)||void 0===a||a.forEach(a=>{var t;null===(t=a.indicator)||void 0===t||t.forEach(t=>{if(t.c_indicator===e.c_indicator){var r;null===(r=t.sub_indicator)||void 0===r||r.forEach(r=>{let i=String(P()(a.d_opr).date()).padStart(2,"0"),l=s[Number(r.column.replace("column_",""))-1],o=4===t.i_status_active,d=E?(0,n.jsx)(O,{defaultValue:r.i_value,disabled:o,onChange:a=>{eI(e.n_indicator,e.c_indicator,l,i,t.i_id,a)}}):(0,n.jsx)("div",{style:{textAlign:"center"},children:r.i_value});switch(r.column){case"column_1":(E||"-"!==r.i_value)&&(c[0][i]=d);break;case"column_2":(E||"-"!==r.i_value)&&(c[1][i]=d);break;case"column_3":(E||"-"!==r.i_value)&&(c[2][i]=d)}})}})}));let d={key:"fileDokumen",jenisGangguan:"File dokumen"};for(let a=1;a<=l;a++){let r=String(a).padStart(2,"0"),i=null===(t=W.data)||void 0===t?void 0:t.find(e=>P()(e.d_opr).date()===a),l=null==i?void 0:i.indicator.find(a=>a.c_indicator===e.c_indicator),{loading:o,error:s}=ea[r]||{loading:!1,error:!1};if(l){let e=l.n_file_path,a=null===e?(0,n.jsx)(u.default,{beforeUpload:e=>{var a;return"application/pdf"!==e.type?I.error("You can only upload PDF files!"):eF(null!==(a=null==i?void 0:i.d_opr)&&void 0!==a?a:"",e,l,r),!1},accept:"application/pdf",maxCount:1,disabled:E,children:(0,n.jsx)(p.Z,{placement:"top",title:s?"Upload gagal":"Upload file",arrow:!0,children:(0,n.jsx)(m.Z,{spinning:o,children:(0,n.jsx)("i",{className:"fa-solid fa-file-arrow-up cursor-pointer fa-lg ".concat(s?"text-red-500":E?"text-gray-400 cursor-not-allowed":"text-[#28a745]")})})})}):null,t="string"==typeof e?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p.Z,{placement:"top",title:s?"Upload gagal":"file menu",arrow:!0,children:(0,n.jsx)(m.Z,{spinning:o,children:(0,n.jsx)("i",{className:"fa-regular fa-folder-open cursor-pointer fa-lg ".concat(s?"text-red-500":E?"text-gray-400 cursor-not-allowed":"text-[#007bff]"),onClick:E?void 0:()=>{var e;return eD(null!==(e=null==i?void 0:i.d_opr)&&void 0!==e?e:"",l,r)}})})})}):null;d[r]=(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"4px"},children:[t,a]})}else d[r]=""}c.push(d);let f={key:"actions",jenisGangguan:"Actions"};for(let a=1;a<=l;a++){let t=null===(r=W.data)||void 0===r?void 0:r.find(e=>P()(e.d_opr).date()===a),l=null==t?void 0:null===(i=t.indicator)||void 0===i?void 0:i.find(a=>a.c_indicator===e.c_indicator);if(l){let e=l.i_status_active,r=1===e?(0,n.jsx)(p.Z,{placement:"top",title:"Approve",arrow:!0,children:(0,n.jsx)(h.Z,{title:"Anda yakin untuk disetujui?",onConfirm:E?void 0:eY(l,t),onCancel:()=>null,okText:"Yes",cancelText:"No",children:(0,n.jsx)(g.ZP,{type:"link",icon:(0,n.jsx)("i",{className:"fa-solid fa-circle-check fa-lg ".concat(E?"text-gray-400 cursor-not-allowed":"")}),disabled:E})})}):null,i=4===e?(0,n.jsx)(p.Z,{placement:"top",title:"Unapprove",arrow:!0,children:(0,n.jsx)(h.Z,{title:"Anda yakin untuk tidak disetujui?",onConfirm:E?void 0:eK(l,t),onCancel:()=>null,okText:"Yes",cancelText:"No",children:(0,n.jsx)(g.ZP,{type:"link",icon:(0,n.jsx)("i",{className:"fa-solid fa-circle-xmark fa-lg ".concat(E?"text-gray-400 cursor-not-allowed":"text-[#FE4545]")}),disabled:E})})}):null;f[String(a).padStart(2,"0")]=(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"4px"},children:[r,i]})}else f[String(a).padStart(2,"0")]=""}return c.push(f),c},eY=(e,a)=>async()=>{let{i_id:t}=e,{d_opr:n}=a;try{ee(!0);let e=await (0,Z.Z)().put("/prasarana/approval",{c_dashboard_type:"PERAWATAN",c_param:"TEKNIS",data:[{i_id:t,d_opr:n}]});(0,o.Z)({res:e,app:T})?(ee(!1),eP(K.period_year,K.period_month),I.success("Successfully Approved")):ee(!1)}catch(e){console.log("error",e)}finally{ee(!1)}},eK=(e,a)=>async()=>{let{i_id:t}=e,{d_opr:n}=a;try{ee(!0);let e=await (0,Z.Z)().put("/prasarana/unapproval",{c_dashboard_type:"PERAWATAN",c_param:"TEKNIS",data:[{i_id:t,d_opr:n}]});(0,o.Z)({res:e,app:T})?(ee(!1),eP(K.period_year,K.period_month),I.success("Successfully Unapproved")):ee(!1)}catch(e){console.log("error",e)}finally{ee(!1)}},eU=async()=>{try{ee(!0);let e=W.data.flatMap(e=>e.indicator.filter(e=>1===e.i_status_active).map(a=>({i_id:a.i_id,d_opr:e.d_opr}))),a=await (0,Z.Z)().put("/prasarana/approval",{c_dashboard_type:"PERAWATAN",c_param:"TEKNIS",data:e});(0,o.Z)({res:a,app:T})?(ee(!1),eP(K.period_year,K.period_month),I.success("Successfully Saved")):ee(!1)}catch(e){console.log("error",e)}finally{ee(!1)}},eM=null==q?void 0:q.map(e=>e.c_indicator),eO=async()=>{try{var e;es(!0);let{period_year:a,period_month:t}=K,n=await (0,Z.Z)().get("/prasarana/maintenance/technical/download-merge?period_year=".concat(a,"&period_month=").concat(t,"&via_api=1"),!0);if(n&&(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.message)==="success"){es(!1);let e=n.data.data.filename,{name:a,period:t,lastMerged:r}=eR(e);ef(a),ey(e),e_(t),eb(r),eh(!0)}else es(!1),I.error("Failed Download, File tidak tersedia")}catch(e){console.log("error download",e),es(!1)}},eR=e=>{let a=e.split("/").pop();if(!a)throw Error("File not found or Invalid file path. The file name could not be extracted.");let[t,n,r]=a.split("_"),i=t.replace("%20"," "),l=n.slice(4,6),o=n.slice(0,4),s="".concat(l,"-").concat(o),c=r.slice(0,4),d=r.slice(4,6),u=r.slice(6,8),p=r.slice(8,10),m=r.slice(10,12),h=r.slice(12,14);return{name:i,period:s,lastMerged:"".concat(u,"-").concat(d,"-").concat(c," (").concat(p,":").concat(m,":").concat(h,")")}},eL=async()=>{ew(!0),eZ(null),eN(0);try{await U(q,null==W?void 0:W.data,K,ev,ew,eN)}catch(e){console.log("Error during download",e),eZ("Gagal download file")}},eB=async()=>{try{var e;ed(!0);let{period_year:a,period_month:t}=K,n=await (0,Z.Z)().get("/prasarana/maintenance/technical/build-merge?period_year=".concat(a,"&period_month=").concat(t,"&via_api=1"),!0);n&&(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.message)==="success"?(ed(!1),I.success("Successfully Builded")):ed(!1)}catch(e){console.log("error build: ",e)}finally{ed(!1)}},eq=[{label:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("i",{className:"fa-solid fa-gear"})," Build"]})}),key:"1",onClick:eB},{label:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("i",{className:"fa-solid fa-download"})," Download"]})}),key:"2",onClick:eO}],eG=null==W?void 0:null===(e=W.data)||void 0===e?void 0:e.every(e=>{var a;return null===(a=e.indicator)||void 0===a?void 0:a.every(e=>4===e.i_status_active)});return(0,n.jsxs)(l.Z,{pathname:t,globalState:a,children:[(0,n.jsxs)(f.Z,{className:"rounded-2xl border border-zinc-200 bg-white text-zinc-950 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50 border-none w-full shadow-lg min-h-[600px]",children:[(0,n.jsx)("div",{className:"text-lg font-bold mb-3",children:"Periode"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(v.default,{className:"mb-5",onChange:(e,a)=>{let t="",n="";if(C(e),e){M({period_year:t="".concat(P()(e).format("YYYY"),"_").concat(P()(e).format("YYYY")),period_month:n="".concat(P()(e).format("MM"),"_").concat(P()(e).format("MM"))}),eP(t,n);let a=P()(e),r=P()();a.isBefore(r,"month")?ep(!0):ep(!1)}else console.log("Date is null")},picker:"month"}),(null==q?void 0:q.length)?(0,n.jsxs)("div",{className:"flex gap-4",children:[eu?(0,n.jsx)(y.Z,{menu:{items:eq},disabled:E||ec||eo,children:(0,n.jsx)(g.ZP,{children:(0,n.jsx)(x.Z,{children:(0,n.jsxs)(n.Fragment,{children:["File Option"," ",ec||eo?(0,n.jsx)(m.Z,{size:"small"}):(0,n.jsx)("i",{className:"fa-solid fa-chevron-down"})]})})})}):null,(0,n.jsx)(g.ZP,{type:"primary",className:"mb-5",onClick:()=>{Y(!E),E&&eT()},loading:V,children:E?"Save":"Edit"}),eG?null:(0,n.jsx)(g.ZP,{type:"primary",className:"mb-5",onClick:eU,loading:$,disabled:E,children:"Approve"})]}):null]}),L?(0,n.jsx)(_.Z,{active:!0}):(0,n.jsx)(n.Fragment,{children:(null==q?void 0:q.length)===0?(0,n.jsx)(k.Z,{imageStyle:{height:200}}):(0,n.jsx)(s.default,{defaultActiveKey:eM,children:q.map(e=>(0,n.jsx)(R,{header:e.n_indicator,children:(0,n.jsx)(b.Z,{scroll:{x:1300},columns:eA(e),dataSource:eE(e),bordered:!0,pagination:!1})},e.c_indicator))})})]}),(0,n.jsx)(F,{visible:en,onCancel:()=>{er(!1)},dataPerFile:ei,getDataMaster:eP,periodeDate:K}),(0,n.jsx)(j.Z,{title:"Konfirmasi Download",visible:em,onOk:eL,onCancel:()=>!ej&&eh(!1),okText:"Download",cancelText:"Batal",confirmLoading:ej,footer:[(0,n.jsx)(g.ZP,{onClick:()=>!ej&&eh(!1),disabled:ej,children:"Batal"},"cancel"),(0,n.jsx)(g.ZP,{type:"primary",onClick:eL,loading:ej,children:"Download"},"submit")],children:ej?(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(w.Z,{type:"circle",percent:ez,width:80}),(0,n.jsx)("p",{children:"Downloading..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("hr",{className:"mt-4"}),(0,n.jsx)(S.Z,{dataSource:[{label:"File",value:eg},{label:"Periode",value:ex},{label:"Last Merged",value:ek}],renderItem:e=>(0,n.jsxs)(S.Z.Item,{children:[(0,n.jsxs)("strong",{children:[e.label,":"]})," ",e.value]})}),(0,n.jsx)("hr",{className:"mb-5"}),eS&&(0,n.jsx)("p",{style:{color:"red"},children:eS})]})})]})}},60728:function(e,a,t){"use strict";t.d(a,{un:function(){return u},zx:function(){return d}});var n=t(57437),r=t(2265),i=t(71538),l=t(12218),o=t(13498),s=t(46682);let c=(0,l.j)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-800",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-zinc-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-red-50 dark:hover:bg-red-900/90",outline:"border border-zinc-200 bg-white hover:bg-zinc-100 hover:text-zinc-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",secondary:"bg-zinc-100 text-zinc-900 hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:s=!1,...d}=e,u=s?i.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:r,size:l,className:t})),ref:a,...d})});d.displayName="Button";let u=e=>{let{type:a,icon:t,loading:r,label:i,style:l,className:o}=e;return(0,n.jsx)(s.ZP,{htmlType:a,type:l,icon:t,loading:r,className:o,children:i})}},71275:function(e,a,t){"use strict";let n=t(2265).createContext({});a.Z=n},65188:function(e,a,t){"use strict";var n=t(57437),r=t(60728),i=t(66648),l=t(42005);a.Z=e=>{var a,t;let{children:o,pathname:s,globalState:c}=e;return(0,n.jsx)(n.Fragment,{children:(0,l.Z)().cekPermission(null!==(t=null==c?void 0:null===(a=c.dataUser)||void 0===a?void 0:a.menuList)&&void 0!==t?t:[],s)&&(null==c?void 0:c.permission.indexOf("view"))!=-1?o:(0,n.jsxs)("div",{className:" flex flex-col justify-center items-center overflow-x-hidden overflow-y-auto py-5",children:[(0,n.jsx)(i.default,{alt:"permission",height:0,width:0,quality:70,src:"/assets/illustrations/maintenance.svg",className:"w-80 md:w-[28rem] 2xl:w-[40rem] shadow-sm  object-cover"}),(0,n.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold tracking-tight text-center",children:"Not Permission"}),(0,n.jsx)("span",{className:"text-center mt-1 mb-5 text-zinc-600 dark:text-zinc-400 md:w-9/12 break-all px-10 sm:px-0",children:"It looks like the page you are looking for doesnt have permission"}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("a",{onClick:()=>window.location.href="/",children:(0,n.jsx)(r.zx,{variant:"outline",children:"Back to Home"})})})]})})}},30939:function(e,a,t){"use strict";var n=t(57437);a.Z=e=>{var a,t,r,i,l,o,s;let{res:c,app:d,type:u,msgTrue:p,msgFalse:m,key:h}=e,{message:g,notification:f,modal:v}=d;if(c)return(null==c?void 0:c.response)?(null==c?void 0:null===(a=c.response.data)||void 0===a?void 0:a.code)=="00"?(p&&!m&&("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:null==c?void 0:c.response.data.code,type:"success",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",null==c?void 0:c.response.data.message]})}),!0):(m||((null==c?void 0:null===(t=c.response.data)||void 0===t?void 0:t.code)?(null==c?void 0:c.response.data.code)=="403"||("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:c.code,type:"error",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",null==c?void 0:c.response.data.message]})}):("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:null==c?void 0:null===(r=c.response.data)||void 0===r?void 0:r.code,type:"error",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",null==c?void 0:null===(l=c.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.message]})})),!1):(null==c?void 0:c.code)=="00"?(p&&!m&&("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:c.code,type:"success",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",c.message]})}),!0):(m||((null==c?void 0:c.code)?"403"==c.code||("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:c.code,type:"error",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",c.message]})}):("message"==u?g:"notification"==u?f:"modal"==u?v:g).open({key:null!=h?h:null==c?void 0:c.code,type:"error",content:(0,n.jsxs)("span",{className:" capitalize",children:[" ",null==c?void 0:null===(s=c.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message]})})),!1)}},42005:function(e,a,t){"use strict";var n=t(38472),r=t(62737),i=t.n(r),l=t(51470),o=t.n(l),s=t(9109).lW;i().extend(o()),a.Z=(e,a)=>{let t=n.Z.create({baseURL:"http://devbackend-psolrtjabodebek.kai.id/api/v1/",headers:e||{Accept:"application/json","Content-Type":"application/json"},...a});t.interceptors.request.use(e=>{let a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e.headers["request-startTime"]=new Date().getTime(),e.headers["request-date"]=i()(),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>{let a=new Date().getTime(),t=e.config.headers["request-startTime"];return e.headers["request-duration"]=a-t,e});let r=()=>{var e,a;let t=!!(e=localStorage.getItem("accessToken"))&&JSON.parse(new s((null==e?void 0:null===(a=e.split("."))||void 0===a?void 0:a[1]).replace(/-/g,"+").replace(/_/g,"/"),"base64").toString("ascii"));return!!t&&t.token_id},l=async()=>t.get("/user/".concat(r())).then(e=>{let a=e.data.data.role_id;return t.post("/menu/list/",{role_id:a}).then(e=>e.data)}).catch(e=>e);return{idUser:r,login:async e=>t.post("/auth/login",e).then(e=>{let{data:a}=e;return localStorage.setItem("accessToken",a.data.accessToken),localStorage.setItem("refreshToken",a.data.refreshToken),sessionStorage.setItem("auth",JSON.stringify(a.data.user)),a}).catch(e=>{var a,t;return null!==(t=null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.data)&&void 0!==t?t:e}),get:async(e,a)=>t.get(e).then(e=>a?e:e.data).catch(e=>e),post:async(e,a,n)=>t.post(e,a,n).then(e=>e.data).catch(e=>e),menuUsers:l,menuApp:async()=>t.post("/menu/list/").then(e=>e.data).catch(e=>e),refresh_Token:async()=>{let e=localStorage.getItem("refreshToken");return!!e&&(t.interceptors.request.use(a=>(a.headers["refresh-token"]=e,a),e=>Promise.reject(e)),t.get("/auth/refresh-token").then(e=>{let{data:a}=e;return localStorage.setItem("accessToken",a.data.accessToken),localStorage.setItem("refreshToken",a.data.refreshToken),a}).catch(e=>!1))},cekPermission:(e,a)=>{let t=!1,n="",r=e=>{e.submenuItems.map(e=>{e.submenuItems?(""!==n&&(n=e.submenuItems[0].path),r(e)):e.path==a.replace("/admin","")&&(t=!0)})};return null==e||e.map(i=>{i.submenuItems?(""!==n&&(n=i.submenuItems[0].path),i.submenuItems.map(e=>{e.submenuItems?(""!==n&&(n=e.submenuItems[0].path),r(e)):e.path==a.replace("/admin","")&&(t=!0)})):(""==i.path?t=!0:""!==n&&e[0].path,i.path==a.replace("/admin","")&&(t=!0))}),!!t},put:async(e,a)=>t.put(e,a).then(e=>e.data).catch(e=>e),del:async(e,a)=>(console.log("data delete",a),t.delete(e,{data:a}).then(e=>e).catch(e=>e)),menuPso:async e=>t.post("/pso/",{start:e[0],end:e[1]}).then(e=>e.data).catch(e=>e)}}},13498:function(e,a,t){"use strict";t.d(a,{cn:function(){return i}});var n=t(44839),r=t(96164);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m6)((0,n.W)(a))}}},function(e){e.O(0,[2505,8173,9141,2470,3919,8348,2100,4309,5053,5458,2034,9155,7824,428,8421,8028,4052,5325,6487,8378,7149,9689,1289,1319,6422,2971,7023,1744],function(){return e(e.s=11959)}),_N_E=e.O()}]);