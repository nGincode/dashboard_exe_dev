(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2357],{76379:function(e,a,t){Promise.resolve().then(t.bind(t,1945))},1945:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var l=t(57437),n=t(2265),r=t(27233),o=t(68348),s=t(16463),d=t(42005),i=t(30939),m=t(18658),c=t(71275),u=t(65188),p=t(41105),f=t(50392),h=t(69358),x=t(70681),v=t(62737),Y=t.n(v),b=t(38797);let{Dragger:g}=r.default;function w(){var e,a;let t="Sertifikasi",r="/prasarana/struktur-organisasi/mutasi_move",v=o.Z.useApp(),g=(0,s.usePathname)(),w=(0,n.useContext)(c.Z),[y,j]=(0,n.useState)(!1),[M,N]=(0,n.useState)(),{message:k,notification:D,modal:Z}=v,[C,S]=(0,n.useState)([]);(0,n.useEffect)(()=>{j(!0);let e=async()=>{let e=await (0,d.Z)().get(r+"?date="+Y()(M).format("YYYY-MM-DD"));if((0,i.Z)({res:e,app:v})){var a,t,n;let r=[];null===(a=e.data)||void 0===a||a.data_mutasi_baru.map(a=>{var t;r.push({...a,old:null===(t=e.data)||void 0===t?void 0:t.data_mutasi_lama.find(e=>e.nipp==a.nipp),status:"change"})}),null===(t=e.data)||void 0===t||t.data_in.map(e=>{r.push({...e,status:"in"})}),null===(n=e.data)||void 0===n||n.data_out.map(e=>{r.push({...e,status:"out"})}),S(r.map(e=>{let a;if("in"==e.status)a=(0,l.jsxs)("div",{style:{color:"#2ccc00"},children:[(0,l.jsx)(f.Z,{style:{fontSize:"20px",color:"#2ccc00"}})," Masuk Pada ",Y()(e.period).format("MMM YYYY")]});else if("out"==e.status)a=(0,l.jsxs)("div",{style:{color:"#cc0000"},children:[(0,l.jsx)(h.Z,{style:{fontSize:"20px",color:"#cc0000"}})," Keluar Pada ",Y()(e.period).format("MMM YYYY")]});else if("change"==e.status){var t;let n="",r="",o="";e.jabatan==(null===(t=e.old)||void 0===t?void 0:t.jabatan)?(o="divisi",n=e.old.divisi,r=e.divisi):(o="jabatan",n=e.old.jabatan,r=e.jabatan),a=(0,l.jsxs)("div",{style:{color:"#08c"},children:[(0,l.jsx)(x.Z,{style:{fontSize:"20px",color:"#08c"}})," Bertukar Posis Dari ",o," ",n," Ke ",r]})}return{...e,html:a}}))}else S([]);j(!1)};M&&"Invalid Date"!==Y()(M).format("YYYY-MM-DD")?(j(!0),e()):S([])},[r,v,M]);let I={nonPagination:!0,nonSearchAll:!0,export:{excel:(null==w?void 0:null===(e=w.permission)||void 0===e?void 0:e.indexOf("export excel"))!==-1&&{subject:"Data "+t},pdf:(null==w?void 0:null===(a=w.permission)||void 0===a?void 0:a.indexOf("export pdf"))!==-1&&{subject:"Data "+t}}};return(0,l.jsx)(u.Z,{pathname:g,globalState:w,children:(0,l.jsxs)(p.Z,{onDelete:()=>{S([])},type:"month",data:C,loading:y,dateChange:N,downloadFalse:!0,noTheme:!0,children:[b.x4.web.header("",(0,l.jsxs)("div",{className:" uppercase ml-5",children:["MUTASI",(0,l.jsx)("br",{})," ","PERIODE : "+Y()(M).format("MMMM YYYY")]})),(0,l.jsx)(m.Z,{updateFetch:S,loadFirst:y,type:I,urlData:r,columnData:[{title:"id",key:"id",hidden:!0},{title:"NIPP",key:"nipp",ellipsis:!0,width:"20%",export:!0},{title:"Atas Nama",key:"name",name:"name",ellipsis:!0,width:"20%",export:!0},{title:"Keterangan",key:"html",name:"html",ellipsis:!0,export:!0}],fetch:C,modalTitle:t})]})})}},57608:function(e,a,t){"use strict";t.d(a,{Ol:function(){return s},SZ:function(){return i},Zb:function(){return o},aY:function(){return m},ll:function(){return d}});var l=t(57437),n=t(2265),r=t(13498);let o=n.forwardRef((e,a)=>{let{className:t,classNameFalse:n,...o}=e;return(0,l.jsx)("div",{ref:a,className:n?t:(0,r.cn)("rounded-2xl my-2 border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",t),...o})});o.displayName="Card",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:a,className:(0,r.cn)("rounded-2xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-50",t),...n})}).displayName="Card900";let s=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 px-6 py-3  rounded-t-2xl  bg-white dark:bg-black",t),...n})});s.displayName="CardHeader";let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle";let i=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-zinc-500 dark:text-zinc-400 ",t),...n})});i.displayName="CardDescription";let m=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-5 bg-white dark:bg-black rounded-b-2xl",t),...n})});m.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},41105:function(e,a,t){"use strict";t.d(a,{Z:function(){return _}});var l=t(57437),n=t(2265),r=t(16463),o=t(68348),s=t(62586),d=t(46682),i=t(62575),m=t(85169),c=t(62737),u=t.n(c);t(65799);var p=t(71275),f=t(57608),h=t(16584),x=t(32034),v=t(23288),Y=t(85313),b=t(90696),g=t(9707),w=t(66407),y=t(63843),j=t(99945),M=t(73717),N=e=>{let{downloadFalse:a,loadingExport:t,trueApprave:r,downloadPdf:s,downloadExcel:i,title:m,onDelete:c,falseDelete:u,date:f,approve:h,onApprove:N,onUnapprove:k,loadingDisable:D}=e,Z=(0,n.useContext)(p.Z),[C,S]=(0,n.useState)([]),[I,F]=(0,n.useState)([]),{message:_,notification:E,modal:P}=o.Z.useApp(),{confirm:T}=P;return(0,n.useEffect)(()=>{var e,t,n,o,d;let p=[],x=[];(null==Z?void 0:null===(e=Z.permission)||void 0===e?void 0:e.indexOf("export excel"))!==-1&&i&&!a&&p.push({key:"excel",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:i,children:"Excel"}),icon:(0,l.jsx)(Y.Z,{style:{color:"green"}}),className:"h-10"}),(null==Z?void 0:null===(t=Z.permission)||void 0===t?void 0:t.indexOf("export pdf"))!==-1&&s&&!a&&p.push({key:"pdf",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:s,children:"PDF"}),icon:(0,l.jsx)(b.Z,{style:{color:"red"}}),className:"h-10"}),(null==Z?void 0:null===(n=Z.permission)||void 0===n?void 0:n.indexOf("delete"))===-1||u||x.push({key:"delete",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Delete data?",icon:(0,l.jsx)(g.Z,{}),content:"Are you sure want to delete this ".concat(m," data in ").concat(f," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){c(!0)}})},children:"Delete"}),icon:(0,l.jsx)(g.Z,{style:{color:"red"}}),className:"h-10"}),f&&(h?(null==Z?void 0:null===(d=Z.permission)||void 0===d?void 0:d.indexOf("unapprove"))!==-1&&r&&x.push({key:"unapprove",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Unapprove data?",icon:(0,l.jsx)(y.Z,{}),content:"Are you sure want to Unapprove this ".concat(m," data in ").concat(f," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){k(!0)}})},children:"Unapprove"}),icon:(0,l.jsx)(y.Z,{style:{color:"red"}}),className:"h-10"}):(null==Z?void 0:null===(o=Z.permission)||void 0===o?void 0:o.indexOf("approve"))!==-1&&r&&x.push({key:"approve",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Approve data?",icon:(0,l.jsx)(w.Z,{style:{color:"green"}}),content:"Are you sure want to Approve this ".concat(m," data in ").concat(f," ?"),okText:"Yes",cancelText:"No",onOk(){N(!0)}})},children:"Approve"}),icon:(0,l.jsx)(w.Z,{style:{color:"green"}}),className:"h-10"})),S(p),F(x)},[T,a,r,u,Z,m,f,c,s,i,h,N,k]),(0,l.jsxs)(l.Fragment,{children:[I.length?(0,l.jsx)("div",{className:"",children:(0,l.jsx)(x.Z,{className:"md:mt-12 float-right mr-4",disabled:t,menu:{items:I},children:(0,l.jsx)(d.ZP,{children:(0,l.jsxs)(v.Z,{children:[(0,l.jsx)(j.Z,{})," Opsi"]})})})}):null,C.length?(0,l.jsx)("div",{className:"",children:(0,l.jsx)(x.Z,{className:"md:mt-12 float-right",disabled:!!t||!!D,menu:{items:C},children:(0,l.jsx)(d.ZP,{loading:t,children:(0,l.jsxs)(v.Z,{children:[t?"":(0,l.jsx)(M.Z,{})," Export"]})})})}):null]})},k=t(42005),D=t(30939),Z=t(95053),C=t(72100);let{RangePicker:S}=Z.default;var I=e=>{let{disabled:a,className:t,onDateSelect:r,widthDate:o,enableSelect:s,onDistanceSelect:d,typeDatePicker:i,showTime:m,loadingDisable:c,allowClear:p,onChangeTri:f,disabledDate:h}=e,[x,v]=(0,n.useState)([]),[Y,b]=(0,n.useState)(""),[g,w]=(0,n.useState)(""),[y,j]=(0,n.useState)(0),[M,N]=(0,n.useState)(null),[D,I]=(0,n.useState)(0),[F,_]=(0,n.useState)(null),[E,P]=(0,n.useState)(null),[T,U]=(0,n.useState)([null,null]);(0,n.useEffect)(()=>{r(Y)},[Y]),(0,n.useEffect)(()=>{P(null),_(null),N(null)},[f]),(0,n.useEffect)(()=>{(async()=>{let e=await (0,k.Z)().get("/distance/"),a=null==e?void 0:e.data;if(void 0!==a){let e=[];e.push({value:"",label:"All Data"}),a.map((a,t)=>e.push({value:a.distance,label:a.distance})),v(e)}})()},[]);let z=(e,a)=>{if(null==e?void 0:e[0]){let t=parseInt(u()(e[0]).format("DD")),l=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),o=parseInt(u()(e[0]).format("HH")),s=parseInt(u()(e[0]).format("mm")),d=parseInt(u()(e[0]).format("ss")),i=parseInt(u()(e[1]).format("DD")),m=parseInt(u()(e[1]).format("MM")),c=parseInt(u()(e[1]).format("YYYY")),p=parseInt(u()(e[1]).format("hh")),f=parseInt(u()(e[1]).format("mm")),h=parseInt(u()(e[1]).format("ss"));b({...Y,dateFrom:t,monthFrom:l,yearFrom:n,hourFrom:o,minuteFrom:s,secondFrom:d,dateUntil:i,monthUntil:m,yearUntil:c,hourUntil:p,minuteUntil:f,secondUntil:h,dateStrings:a}),r(Y,g,y,M,D)}else r(void 0)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col border-none mb-7 mt-2 ml-1",children:[(0,l.jsx)("span",{id:"subject",className:"mb-5 mt-1 text-[14px] font-bold",children:"Periode"}),(0,l.jsxs)("div",{className:"flex flex-wrap",children:[""===i?(0,l.jsx)(S,{allowClear:p,disabled:!!a||!!c,allowEmpty:[!0,!1],className:"".concat(t," mb-3 lg:mr-3"),showTime:m,onChange:z,disabledDate:h}):"rangemonth"===i?(0,l.jsx)(S,{picker:"month",disabled:!!a||!!c,className:"".concat(t," mb-3 lg:mr-3 sm:w-32"),onChange:z,disabledDate:h}):"triwulan"===i?(0,l.jsx)(S,{picker:"month",placeholder:["Start month","End month"],allowEmpty:[!0,!0],allowClear:!0,value:[E?u()(E,"YYYY-MM"):null,F?u()(F,"YYYY-MM"):null],disabled:[!!a||!!c,!0],onChange:(e,a)=>{if(null==e?void 0:e[0]){let t=parseInt(u()(e[0]).format("DD")),l=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),o=parseInt(u()(e[0]).format("HH")),s=parseInt(u()(e[0]).format("mm")),d=parseInt(u()(e[0]).format("ss")),i=parseInt(u()(e[0]).add(2,"month").format("DD")),m=parseInt(u()(e[0]).add(2,"month").format("MM")),c=parseInt(u()(e[0]).add(2,"month").format("YYYY")),p=parseInt(u()(e[0]).add(2,"month").format("hh")),f=parseInt(u()(e[0]).add(2,"month").format("mm")),h=parseInt(u()(e[0]).add(2,"month").format("ss")),x=u()(e[0]).locale("id").format("MMMM"),v=parseInt(u()(e[0]).format("M")),k=parseInt(u()(e[0]).format("YYYY")),Z=parseInt(u()(e[0]).format("DD"));P(u()(null==e?void 0:e[0]).format("YYYY-MM-DD")),_(u()(null==e?void 0:e[0]).add(2,"month").format("YYYY-MM-DD")),w(x),j(v),N(k),I(Z),b({...Y,dateFrom:t,monthFrom:l,yearFrom:n,hourFrom:o,minuteFrom:s,secondFrom:d,dateUntil:i,monthUntil:m,yearUntil:c,hourUntil:p,minuteUntil:f,secondUntil:h,month:v,monthNumber:v,year:k,day:Z,dateStrings:a}),r(Y,g,y,M,D)}else P(null),_(null),r(void 0)},disabledDate:h}):"rangepicker"===i?(0,l.jsx)(S,{allowClear:p,disabled:!!a||!!c,allowEmpty:[!0,!1],className:"".concat(t," mb-3 lg:mr-3"),showTime:m,onChange:z,disabledDate:h}):"year"===i?(0,l.jsx)(Z.default,{disabled:!!a||!!c,className:"".concat(t," mb-3 lg:mr-3 sm:w-[500px] w-96"),value:M?u()(M,"YYYY"):null,onChange:(e,a)=>{if(null===e)N(null),r(M);else{let t=u()(e).locale("id").format("MMMM"),l=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),o=parseInt(u()(e).format("DD"));w(t),j(l),N(a),I(o),b({...Y,month:t,monthNumber:l,year:n,day:o}),r(Y,g,y,M,D)}},allowClear:!0,format:"YYYY",picker:"year",disabledDate:h}):(0,l.jsx)(Z.default,{disabled:!!a||!!c,className:"".concat(t," mb-3 lg:mr-3 sm:w-[500px] w-96"),onChange:(e,a)=>{let t=u()(e).locale("id").format("MMMM"),l=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),o=parseInt(u()(e).format("DD"));w(t),j(l),N(n),I(o),b({...Y,month:t,monthNumber:l,year:n,day:o}),r(Y,g,y,M,D)},picker:i||"month",disabledDate:h}),(0,l.jsx)(C.default,{disabled:!!a||!!c,showSearch:!0,defaultValue:"",className:"".concat(null!=s?s:"hidden"," sm:ml-2 md:w-32 sm-w-32 "),onChange:e=>{d&&d(e)},placeholder:"Select Distance",filterOption:(e,a)=>((null==a?void 0:a.label)||"").toLowerCase().includes((null!=e?e:"").toLowerCase()),options:x.map((e,a)=>({value:e.value,label:"".concat(e.label)}))})]})]})})},F=t(86658);function _(e){let{className:a,loadingBottom:t,loadingExport:c,childrenInput:x,enableSelect:v,onDistanceSelect:Y,typeLoading:b,type:g,codeDelete:w,onDelete:y,downloadPdf:j,downloadExcel:M,loading:Z,dateChange:C,children:S,data:_,loadingDisable:E,showTime:P,allowClear:T,warning:U,showModalWarn:z,onApprove:A,onChangeTri:O,disabledDate:R,downloadFalse:B,emptyFalse:H,noTheme:K,codeMenu:L}=e;(0,n.useContext)(p.Z);let[V,q]=(0,n.useState)(),[G,J]=(0,n.useState)(),[Q,W]=(0,n.useState)(),X=o.Z.useApp(),{message:$}=X;(0,r.usePathname)(),(0,n.useEffect)(()=>{var e,a;W((null==_?void 0:null===(e=_[0])||void 0===e?void 0:e.approved_at)=="-"?null:null==_?void 0:null===(a=_[0])||void 0===a?void 0:a.approved_at)},[_]),(0,n.useEffect)(()=>{q(c)},[c,$]),(0,n.useEffect)(()=>{J(void 0)},[O]);let ee=async()=>{$.open({key:"approve_report",type:"loading",content:"Approveing...",duration:0});let e=await (0,k.Z)().post("report/approve",{code:w,codeMenu:null!=L?L:null,month:2==G.length?Number(u()(G[0]).format("MM")):Number(u()(G).format("MM")),year:2==G.length?Number(u()(G[0]).format("YYYY")):Number(u()(G).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"approve_report"})&&(W(new Date),A(!0))},ea=async()=>{$.open({key:"unapprove_report",type:"loading",content:"Unapproveing...",duration:0});let e=await (0,k.Z)().post("report/unapprove",{code:w,codeMenu:null!=L?L:null,month:2==G.length?Number(u()(G[0]).format("MM")):Number(u()(G).format("MM")),year:2==G.length?Number(u()(G[0]).format("YYYY")):Number(u()(G).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"unapprove_report"})&&(W(null),A(!1))},et=async()=>{$.open({key:"delete_report",type:"loading",content:"Deleting...",duration:0});let e=await (0,k.Z)().post("report/delete",{code:w,codeMenu:null!=L?L:null,month:2==G.length?Number(u()(G[0]).format("MM")):Number(u()(G).format("MM")),year:2==G.length?Number(u()(G[0]).format("YYYY")):Number(u()(G).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"delete_report"})&&y(!0)},{systemTheme:el,theme:en}=(0,m.F)();return(0,l.jsx)(s.ZP,{theme:K?void 0:{components:{Table:"dark"===en?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:"system"===en&&"dark"===el?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:{headerBg:"#79c1eb",borderColor:"#000",headerBorderRadius:0,cellPaddingBlock:5}}},componentSize:"large",children:(0,l.jsxs)(f.Zb,{className:"border-none p-7 w-full shadow-md",children:[(0,l.jsxs)("div",{className:x?"flex flex-wrap mb-6":"flex flex-wrap mb-6 justify-between",children:[(0,l.jsx)(I,{allowClear:T,onDistanceSelect:null!=Y?Y:void 0,enableSelect:v,disabled:b?Z:null!=V&&V,typeDatePicker:"rangepicker"===g?"":"triwulan"===g?"triwulan":void 0===g?"month":g,disabledDate:R,className:x?"":"rangepicker"==g?"w-full lg:w-2/3 xl:w-3/4":"w-full md:w-3/4 lg:w-2/4",onDateSelect:e=>{""===e||isNaN(null==e?void 0:e.monthNumber)?(null==e?void 0:e.dateStrings)?(C(e.dateStrings),J(e.dateStrings)):(C(void 0),J(void 0)):"rangepicker"===g?(null==e?void 0:e.dateStrings)&&(C(e.dateStrings),J(e.dateStrings)):(C(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")),J(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")))},loadingDisable:E,showTime:P,onChangeTri:O}),x,null!=_&&!!_.length&&G&&!Z&&(0,l.jsxs)("div",{className:x?"flex flex-row md:justify-end w-full sm:justify-start md:-mt-32 mt-3 ml-1":"flex flex-row",children:[U&&(0,l.jsx)(d.ZP,{className:"w-6 md:my-12 mr-2",onClick:()=>{z(!0)},icon:(0,l.jsx)(F.Z,{style:{fontSize:"25px",color:"#ebde34"}})}),(0,l.jsx)(N,{loadingExport:V,trueApprave:w,approve:Q,onApprove:ee,onUnapprove:ea,onDelete:et,falseDelete:!w,title:null==w?void 0:w.toLowerCase().replaceAll("_"," "),downloadFalse:B,date:"rangemonth"==g?(null==G?void 0:G[0])===(null==G?void 0:G[1])&&"".concat(u()(G[0]).format("YYYY MMMM")):"".concat(u()(G).format("YYYY MMMM")),downloadPdf:j,downloadExcel:M,loadingDisable:E})]})]}),G&&(0,l.jsx)(l.Fragment,{children:Z?(0,l.jsx)(h.Z,{className:"-mt-6"}):(0,l.jsx)("div",{className:" md:-mt-6 overflow-auto w-full",children:(null==_?void 0:_.length)||H?(0,l.jsx)("div",{className:a,children:S}):(0,l.jsx)(i.Z,{})})}),t]})})}u().locale("id")}},function(e){e.O(0,[2505,3113,1866,9929,3033,8173,9141,2470,3919,8348,2100,4309,5053,5458,2034,9155,7824,428,8421,8028,4052,5325,6487,8378,2755,7149,3454,9689,252,1289,45,6910,7159,3267,7642,3021,8658,2971,7023,1744],function(){return e(e.s=76379)}),_N_E=e.O()}]);