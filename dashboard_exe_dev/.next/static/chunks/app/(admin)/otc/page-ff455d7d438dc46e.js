(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5735,1105],{55347:function(e,t,a){Promise.resolve().then(a.bind(a,32982))},32982:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var l=a(57437),n=a(2265),r=a(16463),o=a(68348),i=a(72100),s=a(38378),c=a(62737),d=a.n(c),m=a(42005),u=a(71275),f=a(65188);a(65799);var h=a(51470),p=a.n(h);let g=a(61438);d().locale("id");let b=a(8558);d().extend(b),d().extend(p());let x=e=>{let t=1,a="";for(let l=e.length-1;l>=0;l--){let n=e.toUpperCase().charCodeAt(l);if((n+=t)>90?(n=65,t=1):t=0,a=String.fromCharCode(n)+a,!t){a=e.substring(0,l)+a;break}}return t&&(a="A"+a),a};var y=(e,t,a,l,n,r,o,i)=>{let s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=new g.Workbook,m=c.addWorksheet(),u=6;c.creator="NUTECH",c.lastModifiedBy="LRT",c.created=new Date,c.modified=new Date,c.lastPrinted=new Date,m.getCell("A1").value=null==t?void 0:t.n_line_1,m.getCell("A2").value=null==t?void 0:t.n_line_2,m.mergeCells("A3:F3"),m.getCell("A3").value=1==i?"PERIODE : "+d()(e).format("MMMM YYYY").toUpperCase():2==i?"PERIODE : "+d()(e).format("MMMM YYYY").toUpperCase()+" S/D "+d()(e).add(2,"month").format("MMMM YYYY").toUpperCase():"PERIODE : TAHUN "+d()(e).format("YYYY"),m.getCell("A5").value="NO",m.getCell("B5").value="TRAINSET",m.getCell("C5").value="JUMLAH HARI",m.getCell("D5").value="JUMLAH OTC/HARI",m.getCell("E5").value="FREKUENSI PEMBERSIHAN/HARI",m.getCell("F5").value="JUMLAH KINERJA OTC",m.getCell("A5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.getCell("B5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.getCell("C5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.getCell("D5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.getCell("E5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.getCell("F5").fill={type:"pattern",pattern:"solid",fgColor:{argb:"79c1eb"},bgColor:{argb:"79c1eb"}},m.columns=[{key:"no",width:5},{key:"i_trainset",width:11},{key:"i_total_day",width:13.71},{key:"i_total_day_otc",width:18},{key:"i_total_freq_day_otc",width:19.29},{key:"jumlah_kinerja_otc",width:19}],m.getColumn("A").key="no",m.getColumn("B").key="i_trainset",m.getColumn("C").key="i_total_day",m.getColumn("D").key="i_total_day_otc",m.getColumn("E").key="i_total_freq_day_otc",m.getColumn("F").key="jumlah_kinerja_otc";for(let e=0;e<l.length;e++){let t="B";m.getCell("A"+u).value=e+1,e%2==0&&(m.getCell("A"+u).fill={type:"pattern",pattern:"solid",fgColor:{argb:"f5f5f5"},bgColor:{argb:"f5f5f5"}});for(let a=0;a<Object.keys(l[e]).length;a++)m.getCell(t+u).value=l[e][Object.keys(l[e])[a]]?l[e][Object.keys(l[e])[a]]:"-","number"==typeof l[e][Object.keys(l[e])[a]]&&(m.getCell(t+u).numFmt="#,##0"),e%2==0&&(m.getCell(t+u).fill={type:"pattern",pattern:"solid",fgColor:{argb:"f5f5f5"},bgColor:{argb:"f5f5f5"}}),t=x(t);m.getRow(u).font={size:9,name:"Calibri"},m.getRow(u).alignment={horizontal:"center",vertical:"middle"},u++}let f=m.lastRow._number+1,h=m.lastColumn._number-1;m.mergeCells("A".concat(f,":B").concat(f)),m.getCell("A".concat(f)).value=r,m.getCell("A".concat(f)).alignment={horizontal:"center",vertical:"middle"},m.getRow("".concat(f)).font={size:9,bold:!0,name:"Calibri"},m.mergeCells("A1:".concat(s.charAt(h),"1")),m.getRow(1).font={size:11,bold:!0,name:"Calibri"},m.mergeCells("A2:".concat(s.charAt(h),"2")),o.map((e,t)=>{m.getCell("".concat(s.charAt(h-(o.length-(t+1)))).concat(f)).value=0==o[t]?"-":o[t],m.getCell("".concat(s.charAt(h-(o.length-(t+1)))).concat(f)).numFmt="#,##0",m.getCell("".concat(s.charAt(h-(o.length-(t+1)))).concat(f)).alignment={horizontal:"center",vertical:"middle"}}),m.getColumn(1).alignment={horizontal:"center"},m.getColumn(2).alignment={horizontal:"left"},m.getRow(1).alignment={horizontal:"left",vertical:"middle",wrapText:!0},m.getRow(2).alignment={horizontal:"left"},m.getRow(2).font={name:"Calibri",bold:!0},m.getRow(3).alignment={horizontal:"left"},m.getRow(3).font={name:"Calibri",bold:!0},m.getRow(5).font={size:10,name:"Calibri",bold:!0},m.getRow(5).height=30,m.getRow(5).alignment={horizontal:"center",vertical:"middle",wrapText:!0},m.getCell("A".concat(f)).alignment={horizontal:"center",vertical:"middle"};for(let e=5;e<=m.rowCount;e++)for(let t=1;t<=h+1;t++)m.getCell(e,t).border={top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}}};let p=(null==t?void 0:t.n_position_1).split("AND");return m.getCell("".concat(s.charAt(h-1)).concat(f+3)).value=p[0]?p[0]:null==t?void 0:t.n_position_1,m.getCell("".concat(s.charAt(h-1)).concat(f+4)).value=p[1]?"AND "+p[1]:"",m.getCell("".concat(s.charAt(h-1)).concat(f+8)).value=t.n_name_1,m.getCell("".concat(s.charAt(h-1)).concat(f+9)).value="Nipp. "+t.i_nipp_1,m.getRow(f+3).font={size:10,name:"Calibri"},m.getRow(f+4).font={size:10,name:"Calibri"},m.getRow(f+8).font={size:10,name:"Calibri"},m.getRow(f+9).font={size:10,name:"Calibri"},m.mergeCells("".concat(s.charAt(h-1)).concat(f+3,":").concat(s.charAt(h)).concat(f+3)),m.mergeCells("".concat(s.charAt(h-1)).concat(f+4,":").concat(s.charAt(h)).concat(f+4)),m.mergeCells("".concat(s.charAt(h-1)).concat(f+8,":").concat(s.charAt(h)).concat(f+8)),m.mergeCells("".concat(s.charAt(h-1)).concat(f+9,":").concat(s.charAt(h)).concat(f+9)),m.getCell("".concat(s.charAt(h-1)).concat(f+3)).font={size:10,bold:!0,name:"Calibri"},m.getCell("".concat(s.charAt(h-1)).concat(f+4)).font={size:10,bold:!0,name:"Calibri"},m.getCell("".concat(s.charAt(h-1)).concat(f+8)).font={size:10,bold:!0,name:"Calibri",underline:!0},m.getCell("".concat(s.charAt(h-1)).concat(f+9)).font={size:10,bold:!0,name:"Calibri"},m.getCell("".concat(s.charAt(h-1)).concat(f+3)).alignment={horizontal:"center"},m.getCell("".concat(s.charAt(h-1)).concat(f+4)).alignment={horizontal:"center"},m.getCell("".concat(s.charAt(h-1)).concat(f+8)).alignment={horizontal:"center"},m.getCell("".concat(s.charAt(h-1)).concat(f+9)).alignment={horizontal:"center"},c.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(t),l=document.createElement("a");document.body.appendChild(l),l.setAttribute("style","display: none"),l.href=a,l.download=n+".xlsx",l.click(),window.URL.revokeObjectURL(a),l.remove()})},v=a(97501),C=a(27824),Y=a.n(C),_=a(64746),w=a.n(_),j=a(38797),N=(e,t,a,l,n,r,o,i,s,c)=>{let d=new v.default;d.setFontSize(11),d.setFont("calibri","bold");let m=[];l.map((e,t)=>{m.push(Object.values(l[t]))});let u=null;Y()(d,{startY:10,theme:"plain",margin:{right:25,left:25},bodyStyles:{fontSize:9},body:[[{content:t.n_line_1.toUpperCase(),styles:{halign:"left",fontSize:9,fontStyle:"bold",cellPadding:0}}],[{content:t.n_line_2.toUpperCase(),styles:{halign:"left",fontSize:9,fontStyle:"bold",cellPadding:0}}],[{content:t.n_line_4.toUpperCase()+" : "+e,styles:{halign:"left",fontSize:9,fontStyle:"bold",cellPadding:0}}]]});let f=[];a.map(e=>{void 0!==e.title_val&&f.push(e.title_val)}),Y()(d,{startY:23,theme:"striped",margin:{right:25,left:25},headStyles:{lineWidth:.2,lineColor:[0,0,0],fillColor:[121,193,235],textColor:[0,0,0],halign:"center",valign:"middle",fontSize:8},bodyStyles:{lineWidth:.2,lineColor:[0,0,0],fontSize:7},head:[f],body:[...null==l?void 0:l.map((e,t)=>[t+1,e.trainset,e.jumlah_hari?e.jumlah_hari:"-",e.jumlah_otc_hari?e.jumlah_otc_hari:"-",e.frekuensi_pembersihan_hari?e.frekuensi_pembersihan_hari:"-",e.jumlah_kinerja_otc?e.jumlah_kinerja_otc:"-"]),[{content:r,colSpan:2,fontStyle:"bold"},...o.map((e,t)=>[0==o[t]?"-":w()(o[t]).format("0,0")])]],columnStyles:{0:{halign:"center"},1:{halign:"left"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center",cellWidth:36},5:{halign:"center"}},didParseCell:function(e){u=e.table;var t=e.table.body;"body"===e.section&&e.row.index===t.length-1&&(e.cell.styles.fontStyle="bold"),e.cell&&"head"===e.cell.section&&(e.cell.raw,e.cell.styles.halign="center")}}),t.n_position_1.split("AND"),d.lastAutoTable.finalY,(0,j.Zc)({autoTable:Y(),doc:d,globalState:s,tableMeta:u,reportType:t,landscape:"p",pageSize:[210,297],position:{column:2,underlinePadding:-1,paddingTop:-2,marginLeft:-5}}),d.save(n+".pdf")},M=a(30939),k=a(41105);function S(){let e=(0,n.useContext)(u.Z),t=(0,r.usePathname)(),a=o.Z.useApp(),{message:c,notification:h,modal:p}=a,[g,b]=(0,n.useState)(null),[x,v]=(0,n.useState)([]),[C,Y]=(0,n.useState)([]),[_,w]=(0,n.useState)(!1),[S,A]=(0,n.useState)(0),[D,T]=(0,n.useState)(0),I=new Intl.NumberFormat("id-ID",{style:"decimal",maximumFractionDigits:2}),[O,E]=(0,n.useState)([1,"rangepicker"]);(0,n.useEffect)(()=>{(async()=>{let e=await (0,m.Z)().get("report-type/OTC");(0,M.Z)({res:e,app:a})&&v(e.data)})()},[a]),(0,n.useEffect)(()=>{let e=d()(g).format("YYYY"),t=d()(g).format("MM");"year"==O[1]&&(t="01"),w(!0),null!==g?(async()=>{let l=await (0,m.Z)().get("report/otc?month="+t+"&year="+e+"&status="+O[0]);(0,M.Z)({res:l,app:a})&&Y(l.data),w(!1)})():Y([])},[O,g,S,a]);let U=[{title:"NO",key:"no",dataIndex:"no",render:(e,t,a)=>a+1,align:"center",width:"3%"},{title:"TRAINSET",key:"i_trainset",type:"i_trainset",name:"i_trainset",dataIndex:"i_trainset",align:"left"},{title:"JUMLAH HARI",key:"i_total_day",type:"i_total_day",name:"i_total_day",dataIndex:"i_total_day",align:"center",render:e=>0==e?"-":I.format(e)},{title:"JUMLAH OTC/HARI",key:"i_total_day_otc",type:"i_total_day_otc",name:"i_total_day_otc",dataIndex:"i_total_day_otc",align:"center",render:e=>0==e?"-":I.format(e)},{title:"FREKUENSI PEMBERSIHAN/HARI",align:"center",width:"23%",key:"i_total_freq_day_otc",type:"i_total_freq_day_otc",name:"i_total_freq_day_otc",dataIndex:"i_total_freq_day_otc",render:e=>0==e?"-":I.format(e)},{title:"JUMLAH KINERJA OTC",align:"center",key:"jumlah_kinerja_otc",type:"jumlah_kinerja_otc",name:"jumlah_kinerja_otc",dataIndex:"jumlah_kinerja_otc",render:e=>0==e?"-":I.format(e)}],z=(t,a,l,n,r)=>{let o=d()(t).format("MMMM/YYYY"),i=o.split("/"),s="";1==O[0]?(o=d()(t).format("MMMM YYYY").toUpperCase(),s=a.n_line_1+" "+i[0].toUpperCase()+" "+i[1]):(o=2==O[0]?d()(t).format("MMMM YYYY").toUpperCase()+" S/D "+d()(t).add(2,"month").format("MMMM YYYY").toUpperCase():"TAHUN "+d()(t).format("YYYY"),s=a.n_line_1+" "+o);let c=[],m=[],u=0,f=0,h=0,p=0;if(Object.keys(n).forEach(e=>{m.push({trainset:n[e].i_trainset,jumlah_hari:n[e].i_total_day,jumlah_otc_hari:n[e].i_total_day_otc,frekuensi_pembersihan_hari:n[e].i_total_freq_day_otc,jumlah_kinerja_otc:n[e].jumlah_kinerja_otc}),u+=n[e].i_total_day,f+=n[e].i_total_day_otc,h+=n[e].i_total_freq_day_otc,p+=n[e].jumlah_kinerja_otc}),c.push(u),c.push(f),c.push(h),c.push(p),"excel"==r)y(t,a,l,m,s,"TOTAL",c,O[0]);else if("pdf"==r){var g;N(o,a,l,m,s,"TOTAL",c,null==e?void 0:null===(g=e.dataUser)||void 0===g?void 0:g.user.fullname,e,O[0])}},[Z,R]=(0,n.useState)(!1),$=async e=>{R(!0);let t=async()=>{try{return"pdf"==e?z(g,x,j.x4.web.headerTable(U),C,"pdf"):z(g,x,j.x4.web.headerTable(U),C,"excel"),!0}catch(e){return!1}};setTimeout(async()=>{await t()?setTimeout(()=>{c.open({type:"success",content:(0,l.jsx)("span",{className:" capitalize",children:"Export Success"})}),R(!1)},1e3):setTimeout(()=>{c.open({type:"error",content:(0,l.jsx)("span",{className:" capitalize",children:"Export Invalid"})}),R(!1)},1e3)},500)};return(0,l.jsx)(f.Z,{pathname:t,globalState:e,children:(0,l.jsx)(k.Z,{type:1==O[0]?"month":2==O[0]?"triwulan":"year",className:" flex justify-center",loadingExport:Z,childrenInput:(0,l.jsxs)("div",{className:"flex flex-col max-md:w-full ml-2",children:[(0,l.jsx)("span",{id:"subject",className:"mb-5 mt-3  text-[14px]",children:"Tipe"}),(0,l.jsx)(i.default,{disabled:Z,placeholder:"Select Filter",onChange:e=>{T(D+1),Y([]);let t="",a=0;"rangepicker"==e?(t="rangepicker",a=1):"triwulan"==e?(t="month",a=2):(t="year",a=3),E([a,t])},defaultValue:"Per Bulan",className:"max-md:w-full",options:[{value:"rangepicker",label:"Per Bulan"},{value:"triwulan",label:"Per Triwulan"},{value:"year",label:"Per Tahun"}]})]}),data:C,loading:_,dateChange:e=>{e&&b(d()(e).format("YYYY-MM"))},downloadPdf:()=>$("pdf"),downloadExcel:()=>$("excel"),codeDelete:1==O[0]?"OTC":"",onDelete:()=>{A(S+1)},onChangeTri:D,children:(0,l.jsxs)("div",{className:" w-[830px]",children:[j.x4.web.header(x,1==O[0]?"PERIODE : "+d()(g).format("MMMM YYYY"):2==O[0]?"PERIODE : "+d()(g).format("MMMM YYYY")+" S/D "+d()(g).add(2,"month").format("MMMM YYYY"):"PERIODE : TAHUN "+d()(g).format("YYYY")),(0,l.jsx)(s.Z,{rowClassName:j.x4.web.striped,bordered:!0,className:"",rowKey:"i_id",columns:j.x4.web.headerTable(U),dataSource:C,pagination:!1,summary:e=>{let t=0,a=0,n=0,r=0;return e.forEach(e=>{let{i_total_day:l,i_total_day_otc:o,i_total_freq_day_otc:i,jumlah_kinerja_otc:s}=e;t+=l,a+=o,n+=i,r+=s}),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.Z.Summary.Row,{children:[(0,l.jsx)(s.Z.Summary.Cell,{index:0,className:"font-bold",colSpan:2,align:"center",children:"TOTAL"}),(0,l.jsx)(s.Z.Summary.Cell,{index:1,className:"font-bold",align:"center",children:0==t?"-":I.format(t)}),(0,l.jsx)(s.Z.Summary.Cell,{index:2,className:"font-bold",align:"center",children:0==a?"-":I.format(a)}),(0,l.jsx)(s.Z.Summary.Cell,{index:3,className:"font-bold",align:"center",children:0==n?"-":I.format(n)}),(0,l.jsx)(s.Z.Summary.Cell,{index:4,className:"font-bold",align:"center",children:0==r?"-":I.format(r)})]})})}})]})})})}},57608:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return s}});var l=a(57437),n=a(2265),r=a(13498);let o=n.forwardRef((e,t)=>{let{className:a,classNameFalse:n,...o}=e;return(0,l.jsx)("div",{ref:t,className:n?a:(0,r.cn)("rounded-2xl my-2 border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",a),...o})});o.displayName="Card",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("rounded-2xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-50",a),...n})}).displayName="Card900";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 px-6 py-3  rounded-t-2xl  bg-white dark:bg-black",a),...n})});i.displayName="CardHeader";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});s.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-zinc-500 dark:text-zinc-400 ",a),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-5 bg-white dark:bg-black rounded-b-2xl",a),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},41105:function(e,t,a){"use strict";a.d(t,{Z:function(){return I}});var l=a(57437),n=a(2265),r=a(16463),o=a(68348),i=a(62586),s=a(46682),c=a(62575),d=a(85169),m=a(62737),u=a.n(m);a(65799);var f=a(71275),h=a(57608),p=a(16584),g=a(32034),b=a(23288),x=a(85313),y=a(90696),v=a(9707),C=a(66407),Y=a(63843),_=a(99945),w=a(73717),j=e=>{let{downloadFalse:t,loadingExport:a,trueApprave:r,downloadPdf:i,downloadExcel:c,title:d,onDelete:m,falseDelete:u,date:h,approve:p,onApprove:j,onUnapprove:N,loadingDisable:M}=e,k=(0,n.useContext)(f.Z),[S,A]=(0,n.useState)([]),[D,T]=(0,n.useState)([]),{message:I,notification:O,modal:E}=o.Z.useApp(),{confirm:U}=E;return(0,n.useEffect)(()=>{var e,a,n,o,s;let f=[],g=[];(null==k?void 0:null===(e=k.permission)||void 0===e?void 0:e.indexOf("export excel"))!==-1&&c&&!t&&f.push({key:"excel",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:c,children:"Excel"}),icon:(0,l.jsx)(x.Z,{style:{color:"green"}}),className:"h-10"}),(null==k?void 0:null===(a=k.permission)||void 0===a?void 0:a.indexOf("export pdf"))!==-1&&i&&!t&&f.push({key:"pdf",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:i,children:"PDF"}),icon:(0,l.jsx)(y.Z,{style:{color:"red"}}),className:"h-10"}),(null==k?void 0:null===(n=k.permission)||void 0===n?void 0:n.indexOf("delete"))===-1||u||g.push({key:"delete",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{U({title:"Delete data?",icon:(0,l.jsx)(v.Z,{}),content:"Are you sure want to delete this ".concat(d," data in ").concat(h," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){m(!0)}})},children:"Delete"}),icon:(0,l.jsx)(v.Z,{style:{color:"red"}}),className:"h-10"}),h&&(p?(null==k?void 0:null===(s=k.permission)||void 0===s?void 0:s.indexOf("unapprove"))!==-1&&r&&g.push({key:"unapprove",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{U({title:"Unapprove data?",icon:(0,l.jsx)(Y.Z,{}),content:"Are you sure want to Unapprove this ".concat(d," data in ").concat(h," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){N(!0)}})},children:"Unapprove"}),icon:(0,l.jsx)(Y.Z,{style:{color:"red"}}),className:"h-10"}):(null==k?void 0:null===(o=k.permission)||void 0===o?void 0:o.indexOf("approve"))!==-1&&r&&g.push({key:"approve",label:(0,l.jsx)("a",{className:"w-full text-left",onClick:()=>{U({title:"Approve data?",icon:(0,l.jsx)(C.Z,{style:{color:"green"}}),content:"Are you sure want to Approve this ".concat(d," data in ").concat(h," ?"),okText:"Yes",cancelText:"No",onOk(){j(!0)}})},children:"Approve"}),icon:(0,l.jsx)(C.Z,{style:{color:"green"}}),className:"h-10"})),A(f),T(g)},[U,t,r,u,k,d,h,m,i,c,p,j,N]),(0,l.jsxs)(l.Fragment,{children:[D.length?(0,l.jsx)("div",{className:"",children:(0,l.jsx)(g.Z,{className:"md:mt-12 float-right mr-4",disabled:a,menu:{items:D},children:(0,l.jsx)(s.ZP,{children:(0,l.jsxs)(b.Z,{children:[(0,l.jsx)(_.Z,{})," Opsi"]})})})}):null,S.length?(0,l.jsx)("div",{className:"",children:(0,l.jsx)(g.Z,{className:"md:mt-12 float-right",disabled:!!a||!!M,menu:{items:S},children:(0,l.jsx)(s.ZP,{loading:a,children:(0,l.jsxs)(b.Z,{children:[a?"":(0,l.jsx)(w.Z,{})," Export"]})})})}):null]})},N=a(42005),M=a(30939),k=a(95053),S=a(72100);let{RangePicker:A}=k.default;var D=e=>{let{disabled:t,className:a,onDateSelect:r,widthDate:o,enableSelect:i,onDistanceSelect:s,typeDatePicker:c,showTime:d,loadingDisable:m,allowClear:f,onChangeTri:h,disabledDate:p}=e,[g,b]=(0,n.useState)([]),[x,y]=(0,n.useState)(""),[v,C]=(0,n.useState)(""),[Y,_]=(0,n.useState)(0),[w,j]=(0,n.useState)(null),[M,D]=(0,n.useState)(0),[T,I]=(0,n.useState)(null),[O,E]=(0,n.useState)(null),[U,z]=(0,n.useState)([null,null]);(0,n.useEffect)(()=>{r(x)},[x]),(0,n.useEffect)(()=>{E(null),I(null),j(null)},[h]),(0,n.useEffect)(()=>{(async()=>{let e=await (0,N.Z)().get("/distance/"),t=null==e?void 0:e.data;if(void 0!==t){let e=[];e.push({value:"",label:"All Data"}),t.map((t,a)=>e.push({value:t.distance,label:t.distance})),b(e)}})()},[]);let Z=(e,t)=>{if(null==e?void 0:e[0]){let a=parseInt(u()(e[0]).format("DD")),l=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),o=parseInt(u()(e[0]).format("HH")),i=parseInt(u()(e[0]).format("mm")),s=parseInt(u()(e[0]).format("ss")),c=parseInt(u()(e[1]).format("DD")),d=parseInt(u()(e[1]).format("MM")),m=parseInt(u()(e[1]).format("YYYY")),f=parseInt(u()(e[1]).format("hh")),h=parseInt(u()(e[1]).format("mm")),p=parseInt(u()(e[1]).format("ss"));y({...x,dateFrom:a,monthFrom:l,yearFrom:n,hourFrom:o,minuteFrom:i,secondFrom:s,dateUntil:c,monthUntil:d,yearUntil:m,hourUntil:f,minuteUntil:h,secondUntil:p,dateStrings:t}),r(x,v,Y,w,M)}else r(void 0)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col border-none mb-7 mt-2 ml-1",children:[(0,l.jsx)("span",{id:"subject",className:"mb-5 mt-1 text-[14px] font-bold",children:"Periode"}),(0,l.jsxs)("div",{className:"flex flex-wrap",children:[""===c?(0,l.jsx)(A,{allowClear:f,disabled:!!t||!!m,allowEmpty:[!0,!1],className:"".concat(a," mb-3 lg:mr-3"),showTime:d,onChange:Z,disabledDate:p}):"rangemonth"===c?(0,l.jsx)(A,{picker:"month",disabled:!!t||!!m,className:"".concat(a," mb-3 lg:mr-3 sm:w-32"),onChange:Z,disabledDate:p}):"triwulan"===c?(0,l.jsx)(A,{picker:"month",placeholder:["Start month","End month"],allowEmpty:[!0,!0],allowClear:!0,value:[O?u()(O,"YYYY-MM"):null,T?u()(T,"YYYY-MM"):null],disabled:[!!t||!!m,!0],onChange:(e,t)=>{if(null==e?void 0:e[0]){let a=parseInt(u()(e[0]).format("DD")),l=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),o=parseInt(u()(e[0]).format("HH")),i=parseInt(u()(e[0]).format("mm")),s=parseInt(u()(e[0]).format("ss")),c=parseInt(u()(e[0]).add(2,"month").format("DD")),d=parseInt(u()(e[0]).add(2,"month").format("MM")),m=parseInt(u()(e[0]).add(2,"month").format("YYYY")),f=parseInt(u()(e[0]).add(2,"month").format("hh")),h=parseInt(u()(e[0]).add(2,"month").format("mm")),p=parseInt(u()(e[0]).add(2,"month").format("ss")),g=u()(e[0]).locale("id").format("MMMM"),b=parseInt(u()(e[0]).format("M")),N=parseInt(u()(e[0]).format("YYYY")),k=parseInt(u()(e[0]).format("DD"));E(u()(null==e?void 0:e[0]).format("YYYY-MM-DD")),I(u()(null==e?void 0:e[0]).add(2,"month").format("YYYY-MM-DD")),C(g),_(b),j(N),D(k),y({...x,dateFrom:a,monthFrom:l,yearFrom:n,hourFrom:o,minuteFrom:i,secondFrom:s,dateUntil:c,monthUntil:d,yearUntil:m,hourUntil:f,minuteUntil:h,secondUntil:p,month:b,monthNumber:b,year:N,day:k,dateStrings:t}),r(x,v,Y,w,M)}else E(null),I(null),r(void 0)},disabledDate:p}):"rangepicker"===c?(0,l.jsx)(A,{allowClear:f,disabled:!!t||!!m,allowEmpty:[!0,!1],className:"".concat(a," mb-3 lg:mr-3"),showTime:d,onChange:Z,disabledDate:p}):"year"===c?(0,l.jsx)(k.default,{disabled:!!t||!!m,className:"".concat(a," mb-3 lg:mr-3 sm:w-[500px] w-96"),value:w?u()(w,"YYYY"):null,onChange:(e,t)=>{if(null===e)j(null),r(w);else{let a=u()(e).locale("id").format("MMMM"),l=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),o=parseInt(u()(e).format("DD"));C(a),_(l),j(t),D(o),y({...x,month:a,monthNumber:l,year:n,day:o}),r(x,v,Y,w,M)}},allowClear:!0,format:"YYYY",picker:"year",disabledDate:p}):(0,l.jsx)(k.default,{disabled:!!t||!!m,className:"".concat(a," mb-3 lg:mr-3 sm:w-[500px] w-96"),onChange:(e,t)=>{let a=u()(e).locale("id").format("MMMM"),l=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),o=parseInt(u()(e).format("DD"));C(a),_(l),j(n),D(o),y({...x,month:a,monthNumber:l,year:n,day:o}),r(x,v,Y,w,M)},picker:c||"month",disabledDate:p}),(0,l.jsx)(S.default,{disabled:!!t||!!m,showSearch:!0,defaultValue:"",className:"".concat(null!=i?i:"hidden"," sm:ml-2 md:w-32 sm-w-32 "),onChange:e=>{s&&s(e)},placeholder:"Select Distance",filterOption:(e,t)=>((null==t?void 0:t.label)||"").toLowerCase().includes((null!=e?e:"").toLowerCase()),options:g.map((e,t)=>({value:e.value,label:"".concat(e.label)}))})]})]})})},T=a(86658);function I(e){let{className:t,loadingBottom:a,loadingExport:m,childrenInput:g,enableSelect:b,onDistanceSelect:x,typeLoading:y,type:v,codeDelete:C,onDelete:Y,downloadPdf:_,downloadExcel:w,loading:k,dateChange:S,children:A,data:I,loadingDisable:O,showTime:E,allowClear:U,warning:z,showModalWarn:Z,onApprove:R,onChangeTri:$,disabledDate:F,downloadFalse:P,emptyFalse:H,noTheme:L,codeMenu:B}=e;(0,n.useContext)(f.Z);let[J,q]=(0,n.useState)(),[W,K]=(0,n.useState)(),[V,G]=(0,n.useState)(),Q=o.Z.useApp(),{message:X}=Q;(0,r.usePathname)(),(0,n.useEffect)(()=>{var e,t;G((null==I?void 0:null===(e=I[0])||void 0===e?void 0:e.approved_at)=="-"?null:null==I?void 0:null===(t=I[0])||void 0===t?void 0:t.approved_at)},[I]),(0,n.useEffect)(()=>{q(m)},[m,X]),(0,n.useEffect)(()=>{K(void 0)},[$]);let ee=async()=>{X.open({key:"approve_report",type:"loading",content:"Approveing...",duration:0});let e=await (0,N.Z)().post("report/approve",{code:C,codeMenu:null!=B?B:null,month:2==W.length?Number(u()(W[0]).format("MM")):Number(u()(W).format("MM")),year:2==W.length?Number(u()(W[0]).format("YYYY")):Number(u()(W).format("YYYY"))});(0,M.Z)({res:e,app:Q,msgTrue:!0,key:"approve_report"})&&(G(new Date),R(!0))},et=async()=>{X.open({key:"unapprove_report",type:"loading",content:"Unapproveing...",duration:0});let e=await (0,N.Z)().post("report/unapprove",{code:C,codeMenu:null!=B?B:null,month:2==W.length?Number(u()(W[0]).format("MM")):Number(u()(W).format("MM")),year:2==W.length?Number(u()(W[0]).format("YYYY")):Number(u()(W).format("YYYY"))});(0,M.Z)({res:e,app:Q,msgTrue:!0,key:"unapprove_report"})&&(G(null),R(!1))},ea=async()=>{X.open({key:"delete_report",type:"loading",content:"Deleting...",duration:0});let e=await (0,N.Z)().post("report/delete",{code:C,codeMenu:null!=B?B:null,month:2==W.length?Number(u()(W[0]).format("MM")):Number(u()(W).format("MM")),year:2==W.length?Number(u()(W[0]).format("YYYY")):Number(u()(W).format("YYYY"))});(0,M.Z)({res:e,app:Q,msgTrue:!0,key:"delete_report"})&&Y(!0)},{systemTheme:el,theme:en}=(0,d.F)();return(0,l.jsx)(i.ZP,{theme:L?void 0:{components:{Table:"dark"===en?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:"system"===en&&"dark"===el?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:{headerBg:"#79c1eb",borderColor:"#000",headerBorderRadius:0,cellPaddingBlock:5}}},componentSize:"large",children:(0,l.jsxs)(h.Zb,{className:"border-none p-7 w-full shadow-md",children:[(0,l.jsxs)("div",{className:g?"flex flex-wrap mb-6":"flex flex-wrap mb-6 justify-between",children:[(0,l.jsx)(D,{allowClear:U,onDistanceSelect:null!=x?x:void 0,enableSelect:b,disabled:y?k:null!=J&&J,typeDatePicker:"rangepicker"===v?"":"triwulan"===v?"triwulan":void 0===v?"month":v,disabledDate:F,className:g?"":"rangepicker"==v?"w-full lg:w-2/3 xl:w-3/4":"w-full md:w-3/4 lg:w-2/4",onDateSelect:e=>{""===e||isNaN(null==e?void 0:e.monthNumber)?(null==e?void 0:e.dateStrings)?(S(e.dateStrings),K(e.dateStrings)):(S(void 0),K(void 0)):"rangepicker"===v?(null==e?void 0:e.dateStrings)&&(S(e.dateStrings),K(e.dateStrings)):(S(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")),K(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")))},loadingDisable:O,showTime:E,onChangeTri:$}),g,null!=I&&!!I.length&&W&&!k&&(0,l.jsxs)("div",{className:g?"flex flex-row md:justify-end w-full sm:justify-start md:-mt-32 mt-3 ml-1":"flex flex-row",children:[z&&(0,l.jsx)(s.ZP,{className:"w-6 md:my-12 mr-2",onClick:()=>{Z(!0)},icon:(0,l.jsx)(T.Z,{style:{fontSize:"25px",color:"#ebde34"}})}),(0,l.jsx)(j,{loadingExport:J,trueApprave:C,approve:V,onApprove:ee,onUnapprove:et,onDelete:ea,falseDelete:!C,title:null==C?void 0:C.toLowerCase().replaceAll("_"," "),downloadFalse:P,date:"rangemonth"==v?(null==W?void 0:W[0])===(null==W?void 0:W[1])&&"".concat(u()(W[0]).format("YYYY MMMM")):"".concat(u()(W).format("YYYY MMMM")),downloadPdf:_,downloadExcel:w,loadingDisable:O})]})]}),W&&(0,l.jsx)(l.Fragment,{children:k?(0,l.jsx)(p.Z,{className:"-mt-6"}):(0,l.jsx)("div",{className:" md:-mt-6 overflow-auto w-full",children:(null==I?void 0:I.length)||H?(0,l.jsx)("div",{className:t,children:A}):(0,l.jsx)(c.Z,{})})}),a]})})}u().locale("id")},5454:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});var l=a(57437),n=a(13498);function r(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-lg bg-zinc-300 dark:bg-zinc-800",t),...a})}},16584:function(e,t,a){"use strict";var l=a(57437),n=a(5454);t.Z=e=>{let{className:t}=e;return(0,l.jsx)("div",{className:"flex flex-col w-full  ".concat(t),children:(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-950 p-6 rounded-2xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.O,{className:"h-8 md:w-40"}),(0,l.jsx)(n.O,{className:"h-6 md:w-96"})]}),(0,l.jsx)(n.O,{className:"h-10 w-36 rounded-2xl"})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center w-full mt-6 mb-4",children:[(0,l.jsxs)("div",{className:"space-x-2 flex",children:[(0,l.jsx)(n.O,{className:"h-6 md:w-64"}),(0,l.jsx)(n.O,{className:"h-6 w-28"})]}),(0,l.jsx)(n.O,{className:"h-6 w-28 rounded-2xl"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"}),(0,l.jsx)(n.O,{className:"h-6 w-full"})]})]})]})})}},8558:function(e){var t;t=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,n,r){var o=n.prototype;r.utc=function(e){var t={date:e,utc:!0,args:arguments};return new n(t)},o.utc=function(t){var a=r(this.toDate(),{locale:this.$L,utc:!0});return t?a.add(this.utcOffset(),e):a},o.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var i=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),i.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(l,n){var r=this.$utils().u;if(r(l))return this.$u?0:r(this.$offset)?c.call(this):this.$offset;if("string"==typeof l&&null===(l=function(e){void 0===e&&(e="");var l=e.match(t);if(!l)return null;var n=(""+l[0]).match(a)||["-",0,0],r=n[0],o=60*+n[1]+ +n[2];return 0===o?0:"+"===r?o:-o}(l)))return this;var o=16>=Math.abs(l)?60*l:l,i=this;if(n)return i.$offset=o,i.$u=0===l,i;if(0!==l){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(i=this.local().add(o+s,e)).$offset=o,i.$x.$localOffset=s}else i=this.utc();return i};var d=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var m=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var u=o.diff;o.diff=function(e,t,a){if(e&&this.$u===e.$u)return u.call(this,e,t,a);var l=this.local(),n=r(e).local();return u.call(l,n,t,a)}}},e.exports=t()}},function(e){e.O(0,[2505,3113,8173,9141,2470,3919,8348,2100,4309,5053,5458,2034,9155,7824,428,8421,8028,4052,5325,6487,8378,4746,5141,7642,2971,7023,1744],function(){return e(e.s=55347)}),_N_E=e.O()}]);