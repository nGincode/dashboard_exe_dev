(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1270],{64454:function(e,s,r){Promise.resolve().then(r.bind(r,50268))},50268:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return S}});var a=r(57437),t=r(2265),o=r(16463);r(65799);var d=r(71275),i=r(65188),l=r(42005),n=r(28883),b=r(69552),c=r(16584),f=r(68348),h=r(72100),m=r(9257),x=r(41105),p=r(30939),j=r(62737),u=r.n(j),N=r(38797),w=()=>{let e=(0,t.useContext)(d.Z),s=f.Z.useApp(),{message:r,notification:o,modal:i}=s,[j,w]=(0,t.useState)(null),[S,v]=(0,t.useState)(null),[k,T]=(0,t.useState)(""),[A,y]=(0,t.useState)(null),[_,z]=(0,t.useState)([]),[I,M]=(0,t.useState)([]),[Y,C]=(0,t.useState)(!1),[U,K]=(0,t.useState)(!1),[g,F]=(0,t.useState)([]),[L,D]=(0,t.useState)([]),[O,R]=(0,t.useState)([]),[E,H]=(0,t.useState)([]),[Z,B]=(0,t.useState)(!1),[P,J]=(0,t.useState)(0),[G,W]=(0,t.useState)(!1),[V,q]=(0,t.useState)([3,"rangepicker"]),Q=new Intl.NumberFormat("id-ID",{style:"decimal",maximumFractionDigits:2}),[X,$]=(0,t.useState)([]),[ee,es]=(0,t.useState)(0);(0,t.useEffect)(()=>{(0,l.Z)().get("/distance/").then(e=>{let s=null==e?void 0:e.data,r=s.map(e=>e.distance);r.unshift(null),void 0!==s&&y(r)})},[]),(0,t.useEffect)(()=>{(async()=>{let e=await (0,l.Z)().get("report-type/OD_PEAK_SML");(0,p.Z)({res:e,app:s})&&$(e.data)})()},[s]),(0,t.useEffect)(()=>{(async()=>{let e=await (0,l.Z)().get("master-station"),r=[];(0,p.Z)({res:e,app:s})&&(e.data.map((e,s)=>{e.station.map((e,s)=>{r.push(e.c_station)})}),z(r),F(e.data)),C(!0)})()},[s]),(0,t.useEffect)(()=>{let e=0,r=async()=>{let r="",t="";if(1==V[0]){let e=u()(j).add(3,"month");e=u()(e).subtract(1,"day"),r=u()(j+" 00:00:00").format("YYYY-MM-DD HH:mm:ss"),t=u()(e).format("YYYY-MM-DD 23:59:59"),v("".concat(u()(r).format("MMMM YYYY").toUpperCase()," S/D ").concat(u()(t).format("MMMM YYYY").toUpperCase())),o()}else if(2==V[0]){let e=u()(j).add(1,"month");e=u()(e).subtract(1,"day"),r=u()(j+" 00:00:00").format("YYYY-MM-DD HH:mm:ss"),t=u()(e).format("YYYY-MM-DD 23:59:59"),v("".concat(u()(r).format("MMMM YYYY").toUpperCase())),o()}else 3==V[0]?""!=j[0]&&""!=j[1]&&(r=j[0],t=j[1],v("".concat(u()(r).format("DD MMMM YYYY").toUpperCase()," JAM ").concat(u()(r).format("HH:mm")," S/D ").concat(u()(t).format("DD MMMM YYYY").toUpperCase()," JAM ").concat(u()(t).format("HH:mm"))),o()):4==V[0]&&(r=u()(j).format("YYYY-01-01 00:00:00"),t=u()(j).format("YYYY-12-31 23:59:59"),v("TAHUN ".concat(u()(r).format("YYYY").toUpperCase())),o());async function o(){for(let a of(M([]),A)){K(!0);try{let o=await (0,l.Z)().post("report/od-peak-sml/v2",{start_at:r,end_at:t,fare_type:1,distance:a});(0,p.Z)({res:o,app:s})&&(e++,J(e),M(e=>[...e,o.data[0]]))}catch(e){console.error("Error fetching data:",e)}finally{C(!1),K(!1)}}W(!1)}(()=>{let e=[],s=[];null==g||g.map((s,r)=>{e.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"p-2 border border-solid  dark:border-white border-black",colSpan:g[r].station.length,children:s.n_lane},r)),r==g.length-1&&e.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"px-2 border border-solid  dark:border-white border-black",rowSpan:2,children:"TOTAL"},r+1))});for(let e=0;e<g.length;e++)g[e].station.map((r,t)=>{s.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"p-2 border border-solid px-3 dark:border-white  border-black  ",children:r.c_station},e+""+t))});D(e),H(s)})()};j?(B(!0),W(!0),C(!0),r()):M(null)},[j,A,s,g]);let er=e=>{let s=[],r=[],t=[];return e.map((o,d)=>{_.map((s,t)=>{r.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"p-2 border border-solid text-center dark:border-white border-black ".concat(d==e.length-1?"font-bold":""),children:0!=o[s]?Q.format(o[s]):"-"},t))}),"DUKUH ATAS"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"DKA"},o.station_form+d)):"SETIABUDI"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"SET"},o.station_form+d)):"RASUNA SAID"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"RAS"},o.station_form+d)):"KUNINGAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"KUA"},o.station_form+d)):"PANCORAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"PAN"},o.station_form+d)):"CIKOKO"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CKK"},o.station_form+d)):"CILIWUNG"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CIL"},o.station_form+d)):"CAWANG"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CWG"},o.station_form+d)):"HALIM"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"HAL"},o.station_form+d)):"JATIBENING BARU"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"JTU"},o.station_form+d)):"CIKUNIR 1"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CK1"},o.station_form+d)):"CIKUNIR 2"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CK2"},o.station_form+d)):"BEKASI BARAT"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"BEK"},o.station_form+d)):"JATIMULYA"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"JTM"},o.station_form+d)):"HARJAMUKTI"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"HAR"},o.station_form+d)):"CIRACAS"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CRC"},o.station_form+d)):"KAMPUNG RAMBUTAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"KAM"},o.station_form+d)):t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:o.station_from},o.station_form+d)),s.push((0,a.jsxs)("tr",{className:"text-center stripped dark:stripped",children:[t,r,(0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"p-2 border border-solid text-center font-bold dark:border-white border-black",children:0!=o.i_total?Q.format(o.i_total):"-"})]},"dt"+d)),t=[],r=[]}),s},ea=async e=>{if(""===e){let e=await (0,l.Z)().get("/distance/"),s=null==e?void 0:e.data,r=s.map(e=>e.distance);r.unshift(null),void 0!==s&&y(r)}else 0===e?y([0]):y([e])},[et,eo]=(0,t.useState)(!1),ed=async s=>{eo(!0);let t=async()=>{let r=X.n_line_1+S;try{if("pdf"==s){var a,t;(0,n.Z)(I,g,A,"",A,null==e?void 0:null===(t=e.dataUser)||void 0===t?void 0:null===(a=t.user)||void 0===a?void 0:a.username,_,S,X,e)}else(0,b.Z)(I,g,A,r,_,S,X);return!0}catch(e){return!1}};setTimeout(async()=>{await t()?setTimeout(()=>{r.open({type:"success",content:(0,a.jsx)("span",{className:" capitalize",children:"Export Success"})}),eo(!1)},1e3):setTimeout(()=>{r.open({type:"error",content:(0,a.jsx)("span",{className:" capitalize",children:"Export Invalid"})}),eo(!1)},1e3)},500)};return(0,a.jsxs)(x.Z,{loadingExport:et,childrenInput:(0,a.jsxs)("div",{className:"flex flex-col ml-2",children:[(0,a.jsx)("span",{id:"subject",className:"mb-5 mt-3  text-[14px]",children:"Tipe"}),(0,a.jsx)(h.default,{disabled:U,placeholder:"Select Filter",onChange:e=>{es(ee+1),M([]);let s="",r=0;"triwulan"==e?(s="triwulan",r=1):"month"==e?(s="month",r=2):"rangepicker"==e?(s="rangepicker",r=3):(s="year",r=4),q([r,s])},defaultValue:"rangepicker",className:"max-md:w-full",options:[{value:"rangepicker",label:"Per Hari"},{value:"month",label:"Per Bulan"},{value:"triwulan",label:"Per Triwulan"},{value:"year",label:"Per Tahun"}]})]}),data:I,loading:Y,allowClear:!1,dateChange:e=>{w(e)},loadingDisable:U,enableSelect:!0,typeLoading:U,showTime:"rangepicker"==V[1],type:V[1],onDistanceSelect:ea,downloadPdf:()=>ed("pdf"),downloadExcel:()=>ed("excel"),loadingBottom:U&&(0,a.jsx)(c.Z,{}),warning:G,showModalWarn:e=>{B(e)},onChangeTri:ee,children:[Z&&(0,a.jsx)(m.Z,{title:"Info!",open:Z,onCancel:()=>B(!1),footer:null,children:(0,a.jsxs)(a.Fragment,{children:["Sedang Memuat Data! Harap Tunggu!",(0,a.jsx)("br",{}),P," of ",A.length]})}),j?null==I?void 0:I.map((e,s)=>(0,a.jsxs)("div",{children:[A.map((e,r)=>r===s&&0===r?(0,a.jsx)("div",{className:" text-base font-bold mb-2",style:{fontSize:N.wF.web.header.one.fontSize},children:(0,a.jsx)("div",{children:N.x4.web.header(X,"PERIODE : ".concat(S))})},"head: "+s):r===s?(0,a.jsx)("div",{className:"text-lg font-bold",style:{fontSize:N.wF.web.header.one.fontSize},children:(0,a.jsx)("div",{children:X.n_line_1})},"head: "+s):void 0),(0,a.jsxs)("table",{className:"w-full mb-3 table-auto border-collapse border border-solid dark:border-white border-black",style:{whiteSpace:"nowrap"},children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{className:"bg-[#79c1eb] dark:bg-black",children:[A.map((e,r)=>r===s&&0===r?(0,a.jsx)("th",{className:"".concat(null===e?"px-12":"px-1"," w-40"),style:{fontSize:N.wF.web.headerTable.fontSize},rowSpan:null===e?2:1,children:null===e?"STASIUN":"JARAK STASIUN ".concat(e," KM")},"th1"+r):r===s?(0,a.jsxs)("th",{className:"".concat(e<10?"px-2 w-40":"px-1 w-40"),style:{fontSize:N.wF.web.headerTable.fontSize},children:["JARAK STASIUN ",e," KM"]},"th1"+r):void 0),L]},s),(0,a.jsxs)("tr",{className:"bg-[#79c1eb] dark:bg-black",children:[A.map((e,r)=>{if(r===s&&0===r){if(null!==e)return(0,a.jsx)("th",{className:"p-2 border border-solid  dark:border-white border-black",style:{fontSize:N.wF.web.headerTable.fontSize},children:"STASIUN"},"th2"+r)}else if(r===s)return(0,a.jsx)("th",{className:"p-2 border border-solid  dark:border-white border-black",style:{fontSize:N.wF.web.headerTable.fontSize},children:"STASIUN"},"th2"+r)}),E]})]}),(0,a.jsx)("tbody",{children:er(e)},s)]},s),(0,a.jsxs)("div",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"flex flex-col justify-start mb-2",children:[(0,a.jsx)("div",{className:"font-bold",children:"KETERANGAN : "}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"DKA"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"DUKUH ATAS"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"SET"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"SETIABUDI"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"RAS"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" RASUNA SAID"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"KUA"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" KUNINGAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"PAN"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" PANCORAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CKK"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" CIKOKO"})]})]}),(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CIL"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CILIWUNG"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CWG"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CAWANG"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"HAL"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"HALIM"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"JTU"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"JATIBENING BARU"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CK1"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIKUNIR 1"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CK2"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIKUNIR 2"})]})]}),(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"BEK"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"BEKASI BARAT"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"JTM"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"JATIMULYA"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"HAR"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"HARJAMUKTI"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CRC"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIRACAS"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"KAM"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"KAMPUNG RAMBUTAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"TMII"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"TMII"})]})]})]})]})]},s)):""]})},S=e=>{let{}=e,s=(0,t.useContext)(d.Z),r=(0,o.usePathname)();return(0,a.jsx)(i.Z,{pathname:r,globalState:s,children:(0,a.jsx)(w,{})})}}},function(e){e.O(0,[2505,3113,8173,9141,2470,3919,8348,2100,4309,5053,5458,2034,9155,7824,4746,5141,7642,1105,9593,2971,7023,1744],function(){return e(e.s=64454)}),_N_E=e.O()}]);