(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5465],{89248:function(e,s,r){Promise.resolve().then(r.bind(r,50106))},50106:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return S}});var a=r(57437),t=r(2265),o=r(16463);r(65799);var d=r(71275),l=r(65188),i=r(42005),n=r(28883),b=r(69552),c=r(16584),f=r(62737),h=r.n(f),m=r(68348),x=r(72100),p=r(9257),j=r(41105),u=r(30939),N=r(38797),w=()=>{let e=(0,t.useContext)(d.Z),s=m.Z.useApp(),{message:r,notification:o,modal:l}=s,[f,w]=(0,t.useState)(null),[S,v]=(0,t.useState)(null),[k,T]=(0,t.useState)(null),[A,y]=(0,t.useState)([]),[_,z]=(0,t.useState)([]),[I,M]=(0,t.useState)(!1),[Y,C]=(0,t.useState)(!1),[U,K]=(0,t.useState)([]),[g,F]=(0,t.useState)([]),[D,L]=(0,t.useState)([]),[O,E]=(0,t.useState)([]),[R,H]=(0,t.useState)([]),[Z,B]=(0,t.useState)(!1),[P,J]=(0,t.useState)(0),[G,W]=(0,t.useState)(!1),[V,q]=(0,t.useState)(0),[Q,X]=(0,t.useState)([3,"rangepicker"]),$=new Intl.NumberFormat("id-ID",{style:"decimal",maximumFractionDigits:2});(0,t.useEffect)(()=>{(0,i.Z)().get("/distance/").then(e=>{let s=null==e?void 0:e.data,r=s.map(e=>e.distance);r.unshift(null),void 0!==s&&T(r)})},[]),(0,t.useEffect)(()=>{(async()=>{let e=await (0,i.Z)().get("master-station"),r=[];(0,u.Z)({res:e,app:s})&&(e.data.map((e,s)=>{e.station.map((e,s)=>{r.push(e.c_station)})}),y(r),K(e.data)),M(!0)})()},[s]),(0,t.useEffect)(()=>{(async()=>{let e=await (0,i.Z)().get("report-type/OD_PEAK");(0,u.Z)({res:e,app:s})&&H(e.data)})()},[s]),(0,t.useEffect)(()=>{let e=0,r=async()=>{let r="",t="";if(1==Q[0]){let e=h()(f).add(3,"month");e=h()(e).subtract(1,"day"),r=h()(f+" 00:00:00").format("YYYY-MM-DD HH:mm:ss"),t=h()(e).format("YYYY-MM-DD 23:59:59"),v("".concat(h()(r).format("MMMM YYYY").toUpperCase()," S/D ").concat(h()(t).format("MMMM YYYY").toUpperCase())),o()}else if(2==Q[0]){let e=h()(f).add(1,"month");e=h()(e).subtract(1,"day"),r=h()(f+" 00:00:00").format("YYYY-MM-DD HH:mm:ss"),t=h()(e).format("YYYY-MM-DD 23:59:59"),v("".concat(h()(r).format("MMMM YYYY").toUpperCase())),o()}else 3==Q[0]?""!=f[0]&&""!=f[1]&&(r=f[0],t=f[1],v("".concat(h()(r).format("DD MMMM YYYY").toUpperCase()," JAM ").concat(h()(r).format("HH:mm")," S/D ").concat(h()(t).format("DD MMMM YYYY").toUpperCase()," JAM ").concat(h()(t).format("HH:mm"))),o()):4==Q[0]&&(r=h()(f).format("YYYY-01-01 00:00:00"),t=h()(f).format("YYYY-12-31 23:59:59"),v("TAHUN ".concat(h()(r).format("YYYY").toUpperCase())),o());async function o(){for(let a of(z([]),k)){C(!0);try{let o=await (0,i.Z)().post("report/od-peak-sml/v2",{start_at:r,end_at:t,fare_type:0,distance:a});(0,u.Z)({res:o,app:s})&&(e++,J(e),z(e=>[...e,o.data[0]]))}catch(e){console.error("Error fetching data:",e)}finally{M(!1),C(!1)}}W(!1)}console.log("start",r),console.log("end",t),(()=>{let e=[],s=[];null==U||U.map((s,r)=>{e.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"p-2 border border-solid  dark:border-white border-black",colSpan:U[r].station.length,children:s.n_lane},r)),r==U.length-1&&e.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"px-2 border border-solid  dark:border-white border-black",rowSpan:2,children:"TOTAL"},r+1))});for(let e=0;e<U.length;e++)U[e].station.map((r,t)=>{s.push((0,a.jsx)("th",{style:{fontSize:N.wF.web.headerTable.fontSize},className:"p-2 px-3 border border-solid  dark:border-white  border-black  ",children:r.c_station},e+""+t))});F(e),E(s)})()};f?(B(!0),W(!0),M(!0),r()):z(null)},[f,k,s,U]);let ee=e=>{let s=[],r=[],t=[];return e.map((o,d)=>{A.map((s,t)=>{r.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"p-2 border border-solid text-center dark:border-white border-black ".concat(d==e.length-1?"font-bold":""),children:0!=o[s]?$.format(o[s]):"-"},t))}),"DUKUH ATAS"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"DKA"},o.station_form+d)):"SETIABUDI"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"SET"},o.station_form+d)):"RASUNA SAID"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"RAS"},o.station_form+d)):"KUNINGAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"KUA"},o.station_form+d)):"PANCORAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"PAN"},o.station_form+d)):"CIKOKO"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CKK"},o.station_form+d)):"CILIWUNG"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CIL"},o.station_form+d)):"CAWANG"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CWG"},o.station_form+d)):"HALIM"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"HAL"},o.station_form+d)):"JATIBENING BARU"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"JTU"},o.station_form+d)):"CIKUNIR 1"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CK1"},o.station_form+d)):"CIKUNIR 2"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CK2"},o.station_form+d)):"BEKASI BARAT"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"BEK"},o.station_form+d)):"JATIMULYA"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"JTM"},o.station_form+d)):"HARJAMUKTI"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"HAR"},o.station_form+d)):"CIRACAS"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"CRC"},o.station_form+d)):"KAMPUNG RAMBUTAN"==o.station_from?t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:"KAM"},o.station_form+d)):t.push((0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"".concat("TOTAL"===o.station_from?"p-2 border border-solid font-bold dark:border-white border-black":"p-2 border font-bold border-solid dark:border-white border-black"),children:o.station_from},o.station_form+d)),s.push((0,a.jsxs)("tr",{className:"text-center stripped dark:stripped",children:[t,r,(0,a.jsx)("td",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"p-2 border border-solid text-center font-bold dark:border-white border-black",children:0!=o.i_total?$.format(o.i_total):"-"})]},"dt"+d)),t=[],r=[]}),s},es=async e=>{if(""===e){let e=await (0,i.Z)().get("/distance/"),s=null==e?void 0:e.data,r=s.map(e=>e.distance);r.unshift(null),void 0!==s&&T(r)}else 0===e?T([0]):T([e])},[er,ea]=(0,t.useState)(!1),et=async s=>{ea(!0);let t=async()=>{let r=R.n_line_1+" "+S;try{if("pdf"==s){var a,t;(0,n.Z)(_,U,k,"OD PEAK",k,null==e?void 0:null===(t=e.dataUser)||void 0===t?void 0:null===(a=t.user)||void 0===a?void 0:a.username,A,S,R,e)}else(0,b.Z)(_,U,k,r,A,S,R);return!0}catch(e){return!1}};setTimeout(async()=>{await t()?setTimeout(()=>{r.open({type:"success",content:(0,a.jsx)("span",{className:" capitalize",children:"Export Success"})}),ea(!1)},1e3):setTimeout(()=>{r.open({type:"error",content:(0,a.jsx)("span",{className:" capitalize",children:"Export Invalid"})}),ea(!1)},1e3)},500)};return(0,a.jsxs)(j.Z,{loadingExport:er,childrenInput:(0,a.jsxs)("div",{className:"flex flex-col md:ml-2 sm:ml-2 ml-1",children:[(0,a.jsx)("span",{id:"subject",className:"mb-5 mt-3  text-[14px]",children:"Tipe"}),(0,a.jsx)(x.default,{disabled:Y,placeholder:"Select Filter",onChange:e=>{q(V+1),w(null),z([]);let s="",r=0;"triwulan"==e?(s="triwulan",r=1):"month"==e?(s="month",r=2):"rangepicker"==e?(s="rangepicker",r=3):(s="year",r=4),X([r,s])},defaultValue:"rangepicker",className:"max-md:w-full",options:[{value:"rangepicker",label:"Per Hari"},{value:"month",label:"Per Bulan"},{value:"triwulan",label:"Per Triwulan"},{value:"year",label:"Per Tahun"}]})]}),data:_,loading:I,allowClear:!1,dateChange:e=>{w(e)},loadingDisable:Y,enableSelect:!0,typeLoading:Y,showTime:"rangepicker"==Q[1],type:Q[1],onDistanceSelect:es,downloadPdf:()=>et("pdf"),downloadExcel:()=>et("excel"),loadingBottom:Y&&(0,a.jsx)(c.Z,{}),warning:G,showModalWarn:e=>{B(e)},onChangeTri:V,children:[Z&&(0,a.jsx)(p.Z,{title:"Info!",open:Z,onCancel:()=>B(!1),footer:null,children:(0,a.jsxs)(a.Fragment,{children:["Sedang Memuat Data! Harap Tunggu!",(0,a.jsx)("br",{}),P," of ",k.length]})}),f?null==_?void 0:_.map((e,s)=>(0,a.jsxs)("div",{children:[k.map((e,r)=>r===s&&0===r?(0,a.jsx)("div",{className:" text-base font-bold mb-2",style:{fontSize:N.wF.web.header.one.fontSize},children:(0,a.jsx)("div",{children:N.x4.web.header(R,"PERIODE : ".concat(S))})},"head: "+s):r===s?(0,a.jsx)("div",{className:"text-lg font-bold",style:{fontSize:N.wF.web.header.one.fontSize},children:(0,a.jsx)("div",{children:R.n_line_1})},"head: "+s):void 0),(0,a.jsxs)("table",{className:"w-full mb-3 table-auto border-collapse border border-solid dark:border-white border-black",style:{whiteSpace:"nowrap"},children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{className:"bg-[#79c1eb] dark:bg-black",children:[k.map((e,r)=>r===s&&0===r?(0,a.jsx)("th",{className:"".concat(null===e?"px-12":"px-1"," w-40"),style:{fontSize:N.wF.web.headerTable.fontSize},rowSpan:null===e?2:1,children:null===e?"STASIUN":"JARAK STASIUN ".concat(e," KM")},"th1"+r):r===s?(0,a.jsxs)("th",{className:"".concat(e<10?"px-2 w-40":"px-1 w-40"),style:{fontSize:N.wF.web.headerTable.fontSize},children:["JARAK STASIUN ",e," KM"]},"th1"+r):void 0),g]},s),(0,a.jsxs)("tr",{className:"bg-[#79c1eb] dark:bg-black",children:[k.map((e,r)=>{if(r===s&&0===r){if(null!==e)return(0,a.jsx)("th",{className:"p-2 border border-solid  dark:border-white border-black",style:{fontSize:N.wF.web.headerTable.fontSize},children:"STASIUN"},"th2"+r)}else if(r===s)return(0,a.jsx)("th",{className:"p-2 border border-solid  dark:border-white border-black",style:{fontSize:N.wF.web.headerTable.fontSize},children:"STASIUN"},"th2"+r)}),O]})]}),(0,a.jsx)("tbody",{children:ee(e)},s)]},s),(0,a.jsxs)("div",{style:{fontSize:N.wF.web.bodyTable.fontSize},className:"flex flex-col justify-start mb-2",children:[(0,a.jsx)("div",{className:"font-bold",children:"KETERANGAN : "}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"DKA"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"DUKUH ATAS"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"SET"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"SETIABUDI"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"RAS"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" RASUNA SAID"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"KUA"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" KUNINGAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"PAN"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" PANCORAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CKK"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:" CIKOKO"})]})]}),(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CIL"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CILIWUNG"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CWG"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CAWANG"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"HAL"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"HALIM"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"JTU"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"JATIBENING BARU"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CK1"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIKUNIR 1"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CK2"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIKUNIR 2"})]})]}),(0,a.jsxs)("div",{className:"w-52",children:[(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"BEK"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"BEKASI BARAT"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"JTM"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"JATIMULYA"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"HAR"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"HARJAMUKTI"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"CRC"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"CIRACAS"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"KAM"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"KAMPUNG RAMBUTAN"})]}),(0,a.jsxs)("div",{className:"flex justify-items-start",children:[(0,a.jsx)("div",{className:"basis-1/6 ",children:"TMII"}),(0,a.jsx)("div",{className:"basis-1/12",children:":"}),(0,a.jsx)("div",{children:"TMII"})]})]})]})]})]},s)):null]})},S=e=>{let{}=e,s=(0,t.useContext)(d.Z),r=(0,o.usePathname)();return(0,a.jsx)(l.Z,{pathname:r,globalState:s,children:(0,a.jsx)(w,{})})}}},function(e){e.O(0,[2505,3113,8173,9141,2470,3919,8348,2100,4309,5053,5458,2034,9155,7824,4746,5141,7642,1105,9593,2971,7023,1744],function(){return e(e.s=89248)}),_N_E=e.O()}]);