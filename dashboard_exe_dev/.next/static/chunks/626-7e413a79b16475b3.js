"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{90626:function(e,l,t){t.d(l,{Z:function(){return S}});var i=t(57437),d=t(2265),a=t(16463),n=t(68348),s=t(88625),o=t(52755),r=t(46682),c=t(38378),m=t(78421),u=t(93098),p=t(26509),f=t(10695),h=t(96217),v=t(56115),x=t(46622),y=t(71480),k=t(9707),j=t(62737),g=t.n(j);t(65799);var I=t(51470),E=t.n(I),_=t(71275),N=t(65188),w=t(42005),C=t(41105),Z=t(30939),B=t(38797);g().locale("id");let M=t(8558);function S(){var e,l,t,j,I,E,M,S;let Y=(0,d.useContext)(_.Z),L=(0,a.usePathname)(),A=n.Z.useApp(),{message:b,notification:D,modal:z}=A,H=L.split("/").filter(e=>e).join("_").toUpperCase(),F=null==Y?void 0:null===(e=Y.dataUser)||void 0===e?void 0:e.menuList.map(e=>(function e(l,t){if(Array.isArray(l.submenuItems))for(let i of l.submenuItems){if(i.path===t)return{parent:l,submenuItem:i};let d=e(i,t);if(d)return d}return null})(e,L)).find(Boolean),R=null==F?void 0:null===(l=F.submenuItem)||void 0===l?void 0:l.path.split("/").pop().toLowerCase(),T="daftarhadirdinasan"==R?"prasarana-upload/daftar-hadir-dinasan":"serahterimadinasan"==R?"prasarana-upload/serah-terima-dinasan":"datakelambatan"==R?"prasarana-upload/data-kelambatan":"",[V,U]=(0,d.useState)(),[P,O]=(0,d.useState)(),[K,W]=(0,d.useState)(null),[q,G]=(0,d.useState)([2,"month"]),[J,Q]=(0,d.useState)(!1),[X,$]=(0,d.useState)([]),[ee,el]=(0,d.useState)(0),et=e=>{if(!e)return"-";if("xlsx"==e.split(".").pop().toLowerCase())return(0,i.jsx)("a",{onClick:()=>{window.location.href=window.makeUrl("/file/"+e)},children:(0,i.jsx)(s.Z,{placement:"top",title:"Download Excel \n"+e,children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"w-5 h-5 m-1",children:[(0,i.jsx)("path",{fill:"#169154",d:"M29,6H15.744C14.781,6,14,6.781,14,7.744v7.259h15V6z"}),(0,i.jsx)("path",{fill:"#18482a",d:"M14,33.054v7.202C14,41.219,14.781,42,15.743,42H29v-8.946H14z"}),(0,i.jsx)("path",{fill:"#0c8045",d:"M14 15.003H29V24.005000000000003H14z"}),(0,i.jsx)("path",{fill:"#17472a",d:"M14 24.005H29V33.055H14z"}),(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{fill:"#29c27f",d:"M42.256,6H29v9.003h15V7.744C44,6.781,43.219,6,42.256,6z"}),(0,i.jsx)("path",{fill:"#27663f",d:"M29,33.054V42h13.257C43.219,42,44,41.219,44,40.257v-7.202H29z"}),(0,i.jsx)("path",{fill:"#19ac65",d:"M29 15.003H44V24.005000000000003H29z"}),(0,i.jsx)("path",{fill:"#129652",d:"M29 24.005H44V33.055H29z"})]}),(0,i.jsx)("path",{fill:"#0c7238",d:"M22.319,34H5.681C4.753,34,4,33.247,4,32.319V15.681C4,14.753,4.753,14,5.681,14h16.638 C23.247,14,24,14.753,24,15.681v16.638C24,33.247,23.247,34,22.319,34z"}),(0,i.jsx)("path",{fill:"#fff",d:"M9.807 19L12.193 19 14.129 22.754 16.175 19 18.404 19 15.333 24 18.474 29 16.123 29 14.013 25.07 11.912 29 9.526 29 12.719 23.982z"})]})})});if("pdf"!=e.split(".").pop().toLowerCase())return(0,i.jsx)("a",{onClick:()=>{window.location.href=window.makeUrl("/file/"+e)},children:(0,i.jsx)(s.Z,{placement:"top",title:"Download File \n"+e,children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 m-1",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})})});{let l="";return(0,i.jsx)(s.Z,{placement:"top",title:"Download Pdf \n"+e,children:(0,i.jsx)(o.Z,{width:25,onClick:()=>{l=window.makeUrl("/file/"+e)},preview:{mask:(0,i.jsx)(u.Z,{}),destroyOnClose:!0,imageRender:()=>(0,i.jsx)("iframe",{className:"px-20 pt-3",width:"100%",height:"100%",src:l}),toolbarRender:()=>null},src:"/assets/pdf.svg"})})}};(0,d.useEffect)(()=>{let e=async()=>{let e=await (0,w.Z)().post(T.replace("prasarana-upload","prasarana"),{period:g()(V).format("YYYY-MM-DD"),menu_at:H});(0,Z.Z)({res:e,app:A})&&en({dataInput:e.data.map((e,l)=>({key:l+1,no:l+1,code:e.code,deskripsi:(0,i.jsx)("input",{defaultValue:e.description,className:"h-10 mt-2 mr-2 p-2 border  rounded w-full  text-center",name:"deskripsi",id:"deskripsi_"+(l+1)}),file:(0,i.jsxs)("label",{htmlFor:"file_"+(l+1),className:" cursor-pointer",onMouseEnter:()=>{if(document.getElementById("file_"+(l+1)).value){var e,t;null===(e=document.getElementById("fileEmpty_"+(l+1)))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("fileCheck_"+(l+1)))||void 0===t||t.classList.add("hidden")}},onMouseLeave:()=>{if(document.getElementById("file_"+(l+1)).value){var e,t;null===(e=document.getElementById("fileEmpty_"+(l+1)))||void 0===e||e.classList.add("hidden"),null===(t=document.getElementById("fileCheck_"+(l+1)))||void 0===t||t.classList.remove("hidden")}},children:[(0,i.jsxs)(s.Z,{placement:"top",className:" w-5 h-5 m-1",title:"Upload File",children:[(0,i.jsx)(p.Z,{style:{fontSize:"20px"},id:"fileEmpty_"+(l+1)}),(0,i.jsx)(f.Z,{style:{fontSize:"20px",color:"blue"},className:"hidden",id:"fileCheck_"+(l+1)})]}),(0,i.jsx)("input",{id:"file_"+(l+1),onChange:e=>{var t,i,d,a;e.target.value?(null===(t=document.getElementById("fileEmpty_"+(l+1)))||void 0===t||t.classList.add("hidden"),null===(i=document.getElementById("fileCheck_"+(l+1)))||void 0===i||i.classList.remove("hidden")):(null===(d=document.getElementById("fileEmpty_"+(l+1)))||void 0===d||d.classList.remove("hidden"),null===(a=document.getElementById("fileCheck_"+(l+1)))||void 0===a||a.classList.add("hidden"))},accept:".pdf",type:"file",className:"hidden"})]})})),data:e.data.map((e,l)=>({...e,key:l+1,no:l+1,code:e.code,deskripsi:e.description,file:et(e.file)}))}),W(!1)};V&&"Invalid Date"!==g()(V).format("YYYY-MM-DD")?(W(!0),$([]),e()):en(null)},[V,A,P,q,H,T]);let[ei,ed]=(0,d.useState)(!1),[ea,en]=(0,d.useState)(),es=async e=>{var l,t,d;if(!e.code)return b.warning("Code Tidak Terdeteksi");let a=null!==(d=null===(t=e.file)||void 0===t?void 0:null===(l=t.files)||void 0===l?void 0:l[0])&&void 0!==d?d:e.file[0];Q(!0);let n=await (0,w.Z)({"Content-Type":"multipart/form-data"}).post(T,{period:g()(V).format("YYYY-MM-DD"),menu_at:H,code:e.code,description:e.deskripsi,file:a});(0,Z.Z)({res:n,app:A})?(Q(!1),$(X.filter(l=>l!==e.key)),en({dataInput:ea.dataInput.map(l=>(l.key==e.key&&(l.create=!1,l.deskripsi=(0,i.jsx)("input",{defaultValue:e.deskripsi,className:"h-10 mt-2 mr-2 p-2 border  rounded w-full  text-center",name:"deskripsi",id:"deskripsi_"+l.key}),l.file=(0,i.jsxs)("label",{htmlFor:"file_"+e.key,className:" cursor-pointer",onMouseEnter:()=>{if(document.getElementById("file_"+e.key).value){var l,t;null===(l=document.getElementById("fileEmpty_"+e.key))||void 0===l||l.classList.remove("hidden"),null===(t=document.getElementById("fileCheck_"+e.key))||void 0===t||t.classList.add("hidden")}},onMouseLeave:()=>{if(document.getElementById("file_"+e.key).value){var l,t;null===(l=document.getElementById("fileEmpty_"+e.key))||void 0===l||l.classList.add("hidden"),null===(t=document.getElementById("fileCheck_"+e.key))||void 0===t||t.classList.remove("hidden")}},children:[(0,i.jsxs)(s.Z,{placement:"top",className:" w-5 h-5 m-1",title:"Upload File",children:[(0,i.jsx)(p.Z,{style:{fontSize:"20px"},id:"fileEmpty_"+e.key}),(0,i.jsx)(f.Z,{style:{fontSize:"20px",color:"blue"},className:"hidden",id:"fileCheck_"+e.key})]}),(0,i.jsx)("input",{id:"file_"+e.key,onChange:e=>{var l,t,i,d;e.target.value?(null===(l=document.getElementById("fileEmpty_"+e.key))||void 0===l||l.classList.add("hidden"),null===(t=document.getElementById("fileCheck_"+e.key))||void 0===t||t.classList.remove("hidden")):(null===(i=document.getElementById("fileEmpty_"+e.key))||void 0===i||i.classList.remove("hidden"),null===(d=document.getElementById("fileCheck_"+e.key))||void 0===d||d.classList.add("hidden"))},accept:".pdf",type:"file",className:"hidden"})]})),l)),data:ea.data.map(l=>(l.key==e.key&&(l.create=!1,l.deskripsi=e.deskripsi,l.file=a?et(H+"_"+e.code+"_"+g()(V).format("YYYYMMDD")+".pdf"):l.file),l))})):Q(!1)},eo=async e=>{Q(!0);let l=await (0,w.Z)().post(T.replaceAll("-upload","")+"/delete",{period:g()(V).format("YYYY-MM-DD"),menu_at:H,code:e.code});(0,Z.Z)({res:l,app:A})?(Q(!1),en({dataInput:ea.dataInput.filter(l=>l.key!=e.key),data:ea.data.filter(l=>l.key!=e.key)})):Q(!1)};return(0,i.jsx)(N.Z,{pathname:L,globalState:Y,children:(0,i.jsx)(C.Z,{loadingExport:ei,onApprove:e=>{O(e)},codeDelete:H.includes("DAFTARHADIRDINASAN")?"DAFTAR_HADIR_DINASAN":H.includes("DATAKELAMBATAN")?"DATA_KELAMBATAN":H.includes("SERAHTERIMADINASAN")?"SERAH_TERIMA_DINASAN":"",type:"month",data:null==ea?void 0:ea.data,codeMenu:H,loading:K,onChangeTri:ee,dateChange:e=>U(e),emptyFalse:!0,downloadFalse:!0,children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("div",{className:"w-full md:w-auto",children:[B.x4.web.header(null,(0,i.jsxs)("div",{className:" uppercase",children:[null==F?void 0:null===(t=F.submenuItem)||void 0===t?void 0:t.title," ",null==F?void 0:null===(j=F.parent)||void 0===j?void 0:j.title,(0,i.jsx)("br",{}),2==q[0]?"PERIODE : "+g()(V).format("MMMM YYYY"):1==q[0]?"PERIODE : "+g()(V).format("MMMM YYYY")+" S/D "+g()(V).add(2,"month").format("MMMM YYYY"):"PERIODE : TAHUN "+g()(V).format("YYYY")]})),(null==ea?void 0:null===(E=ea.data)||void 0===E?void 0:null===(I=E[0])||void 0===I?void 0:I.approved_at)||!(null==Y?void 0:Y.permission.includes("create"))?null:(0,i.jsx)("div",{className:" w-full text-right",children:(0,i.jsx)(r.ZP,{onClick:()=>{var e;let l=(null!==(e=null==ea?void 0:ea.dataInput.length)&&void 0!==e?e:0)+1,t=e=>(null==ea?void 0:ea.dataInput.find(l=>l.code==e+"_"+H))?t(l):g()(V).format("YYYY_MM|")+e+"_"+H,d=t(l);$([...X,l]),(null==ea?void 0:ea.dataInput)?en({dataInput:[...ea.dataInput,{key:l,create:!0,code:d,action:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("label",{onClick:()=>{es({code:d,key:l,file:document.getElementById("file_"+l).files,deskripsi:document.getElementById("deskripsi_"+l).value})},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})})}),no:l,deskripsi:(0,i.jsx)("input",{className:"h-10 mt-2 mr-2 p-2 border  rounded w-full  text-center",name:"deskripsi",id:"deskripsi_"+l}),file:(0,i.jsxs)("label",{htmlFor:"file_"+l,className:" cursor-pointer",onMouseEnter:()=>{if(document.getElementById("file_"+l).value){var e,t;null===(e=document.getElementById("fileEmpty_"+l))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("fileCheck_"+l))||void 0===t||t.classList.add("hidden")}},onMouseLeave:()=>{if(document.getElementById("file_"+l).value){var e,t;null===(e=document.getElementById("fileEmpty_"+l))||void 0===e||e.classList.add("hidden"),null===(t=document.getElementById("fileCheck_"+l))||void 0===t||t.classList.remove("hidden")}},children:[(0,i.jsxs)(s.Z,{placement:"top",className:" w-5 h-5 m-1",title:"Upload File",children:[(0,i.jsx)(p.Z,{style:{fontSize:"20px"},id:"fileEmpty_"+l}),(0,i.jsx)(f.Z,{style:{fontSize:"20px",color:"blue"},className:"hidden",id:"fileCheck_"+l})]}),(0,i.jsx)("input",{id:"file_"+l,onChange:e=>{var t,i,d,a;e.target.value?(null===(t=document.getElementById("fileEmpty_"+l))||void 0===t||t.classList.add("hidden"),null===(i=document.getElementById("fileCheck_"+l))||void 0===i||i.classList.remove("hidden")):(null===(d=document.getElementById("fileEmpty_"+l))||void 0===d||d.classList.remove("hidden"),null===(a=document.getElementById("fileCheck_"+l))||void 0===a||a.classList.add("hidden"))},accept:".pdf",type:"file",className:"hidden"})]})}],data:[...ea.data,{key:l,create:!0,code:d,action:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("label",{onClick:()=>{es({code:d,key:l,file:document.getElementById("file_"+l).files,deskripsi:document.getElementById("deskripsi_"+l).value})},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})})}),no:l,deskripsi:"",file:""}]}):en({dataInput:[{key:l,create:!0,code:d,action:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("label",{onClick:()=>{es({code:d,key:l,file:document.getElementById("file_"+l).files,deskripsi:document.getElementById("deskripsi_"+l).value})},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})})}),no:l,deskripsi:(0,i.jsx)("input",{className:"h-10 mt-2 mr-2 p-2 border  rounded w-full  text-center",name:"deskripsi",id:"deskripsi_"+l}),file:(0,i.jsxs)("label",{htmlFor:"file_"+l,className:" cursor-pointer",children:[(0,i.jsx)(s.Z,{placement:"top",className:" mt-1  mr-3",title:"Upload File",children:(0,i.jsx)(p.Z,{style:{fontSize:"20px"}})}),(0,i.jsx)("input",{id:"file_"+l,accept:".pdf",type:"file",className:"hidden"})]})}],data:[{key:l,create:!0,code:d,action:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("label",{onClick:()=>{es({code:d,key:l,file:document.getElementById("file_"+l).files,deskripsi:document.getElementById("deskripsi_"+l).value})},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})})}),no:l,deskripsi:"",file:""}]})},icon:(0,i.jsx)(v.Z,{}),className:" mt-2 mr-2",type:"primary",style:{marginBottom:16}})}),(0,i.jsx)(c.Z,{bordered:!0,scroll:{x:800},dataSource:null==ea?void 0:ea.data.map((e,l)=>{let t=e.key;return X.find(e=>e===t)&&(e=ea.dataInput[l]),{...e,action:(0,i.jsx)("div",{className:"flex justify-center",children:e.create?(0,i.jsx)(i.Fragment,{children:J&&X.find(e=>e===t)?(0,i.jsx)(m.Z,{}):(0,i.jsx)("label",{onClick:()=>{var l;return es({code:e.code,key:t,deskripsi:null===(l=document.getElementById("deskripsi_"+t))||void 0===l?void 0:l.value,file:document.getElementById("file_"+t).files})},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})})}):(0,i.jsx)(i.Fragment,{children:J&&X.find(e=>e===t)?(0,i.jsx)(m.Z,{}):(0,i.jsxs)(i.Fragment,{children:[X.find(e=>e===t)?(0,i.jsx)("label",{onClick:()=>{$(X.filter(e=>e!==t))},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"left",className:" mt-1 ",children:(0,i.jsx)(x.Z,{style:{fontSize:"20px"},className:"mr-3"})})}):(0,i.jsx)("label",{onClick:()=>{$([...X,t])},className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"left",className:" mt-1 ",children:(0,i.jsx)(y.Z,{style:{fontSize:"20px"}})})}),X.find(e=>e===t)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{onClick:()=>es({code:e.code,key:t,deskripsi:document.getElementById("deskripsi_"+t).value,file:document.getElementById("file_"+t)}),className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Save",children:(0,i.jsx)(h.Z,{style:{fontSize:"20px",color:"green"},className:"mr-3"})})}),(0,i.jsx)("label",{onClick:()=>eo({code:e.code,key:t}),className:" cursor-pointer",children:(0,i.jsx)(s.Z,{placement:"top",className:" mt-1 ",title:"Delete",children:(0,i.jsx)(k.Z,{style:{fontSize:"20px",color:"red"}})})})]}):null]})})})}}),pagination:!1,columns:(null==ea?void 0:null===(S=ea.data)||void 0===S?void 0:null===(M=S[0])||void 0===M?void 0:M.approved_at)||!(null==Y?void 0:Y.permission.includes("create"))?[{title:"NO",dataIndex:"no",width:"5%",align:"center"},{title:"DESKRIPSI",dataIndex:"deskripsi",align:"center"},{title:"FILE",dataIndex:"file",align:"center",width:"10%"}]:[{title:"NO",dataIndex:"no",width:"5%",align:"center"},{title:"DESKRIPSI",dataIndex:"deskripsi",align:"center"},{title:"FILE",dataIndex:"file",align:"center",width:"10%"},{title:"ACTION",dataIndex:"action",align:"center",width:"5%"}]})]})})})})}g().extend(M),g().extend(E())}}]);