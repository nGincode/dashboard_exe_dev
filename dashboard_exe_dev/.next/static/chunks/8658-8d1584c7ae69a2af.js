"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8658],{18658:function(e,l,n){var i=n(57437),t=n(2265),a=n(66910),s=n.n(a),r=n(16463),d=n(85313),o=n(90696),u=n(10695),c=n(46622),m=n(57834),p=n(9707),v=n(71480),h=n(40117),x=n(44921),w=n(98169),f=n(73717),j=n(25325),k=n(68348),y=n(93122),g=n(88625),N=n(66311),_=n(52755),b=n(23288),Z=n(46682),L=n(62476),C=n(9257),M=n(73454),S=n(38378),E=n(95053),P=n(30252),I=n(44052),D=n(18357),B=n(32034),O=n(62737),A=n.n(O);n(65799);var W=n(51470),F=n.n(W),z=n(30939),V=n(8782),T=n(98246),U=n(57929),H=n(18676),q=n(4756),Y=n(5454),R=n(17136),K=n(78644),$=n(99020),G=n(42005),J=n(71275),Q=n(31405),X=n(16584),ee=n(75149),el=n(95565),en=n(85392),ei=n(15554),et=n(22599),ea=n.n(et),es=n(97501),er=n(27824),ed=n.n(er);A().locale("id");let eo=n(8558);A().extend(eo),A().extend(F());let{TextArea:eu}=j.default;l.Z=e=>{var l,n,a,O,W,F,et,er,eo,ec,em,ep,ev,eh,ex,ew,ef,ej;let{columnData:ek,fetch:ey,type:eg,modalTitle:eN,loadFirst:e_,load:eb,urlData:eZ,updateFetch:eL}=e,eC=(0,r.usePathname)(),eM=(0,t.useContext)(J.Z),eS=k.Z.useApp(),[eE,eP]=(0,t.useState)([]),[eI,eD]=(0,t.useState)(!1),[eB,eO]=(0,t.useState)([]),[eA,eW]=(0,t.useState)([]),[eF,ez]=y.ZP.useMessage(),[eV,eT]=(0,t.useState)([]),[eU,eH]=(0,t.useState)({});(0,t.useEffect)(()=>{eD(eb),"Role"===eN&&(async()=>{let e=await (0,G.Z)().get("menu"),l=await (0,G.Z)().get("action");if("00"==e.code&&"00"==l.code){var n,i,t;let a=[];(null===(n=l.data)||void 0===n?void 0:n.edges)?null===(t=l.data)||void 0===t||null===(i=t.edges)||void 0===i||i.reverse().map(e=>{a.push(e.node)}):a=l.data,eW(a),eO(e.data)}})()},[eb,eN]);let eq=async e=>{let l=null==e?void 0:e.map((e,l)=>{let n={};n.key=l+1,ek.map(l=>{n[l.key]=e[l.key]});let i=e=>e.sub_menu.map((e,l)=>{let n={};return ek.map(l=>{n[l.key]=e[l.key],n.key=e.id}),e.sub_menu&&(n.children=i(e)),n});return e.sub_menu&&(n.children=i(e)),n}),n=[];for(let e=0;e<l.length;e++){var t,a,s,r,m;let p=l[e],v=e,h={};if(Array.isArray(p.permission)&&(h.permission=(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(t=p.permission)||void 0===t?void 0:t.map((e,l)=>(0,i.jsxs)("div",{className:"sm:flex w-full mb-2",children:[(0,i.jsx)("div",{children:e.name}),(0,i.jsxs)("div",{className:"flex sm:absolute right-2",children:[-1!==e.data.indexOf("view")&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),-1!==e.data.indexOf("create")&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),-1!==e.data.indexOf("update")&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),-1!==e.data.indexOf("delete")&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),-1!==e.data.indexOf("export")&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),-1!==e.data.indexOf("export excel")&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),-1!==e.data.indexOf("export pdf")&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})}),-1!==e.data.indexOf("export pdf")&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})}),-1!==e.data.indexOf("approve")&&(0,i.jsx)(g.Z,{title:"Approve",children:(0,i.jsx)(u.Z,{className:"ml-2"})}),-1!==e.data.indexOf("unapprove")&&(0,i.jsx)(g.Z,{title:"Unapprove",children:(0,i.jsx)(c.Z,{className:"ml-2"})})]})]},l))},v)),p.avatar||null===p.avatar){if((null==p?void 0:p.avatar)==null)h.avatar_input=p.avatar,h.avatar=(0,i.jsx)(N.C,{style:{backgroundColor:"#"+Math.floor(16777215*Math.random()).toString(16)},children:null===(a=null!==(r=null!==(s=p.name)&&void 0!==s?s:p.username)&&void 0!==r?r:p.fullName)||void 0===a?void 0:a.substring(0,2)});else{let e=await window.convertImageToBase64(window.makeUrl("avatar/"+p.avatar));h.avatar_input=e,h.avatar=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.C,{style:{cursor:"pointer"},src:e,onClick:()=>{document.getElementById(p.key+v).click()}}),(0,i.jsx)(_.Z,{id:p.key+v,style:{display:"none"},alt:p.title,src:e})]})}}p.icon&&(h.icon=(0,i.jsxs)("div",{className:"flex items-center",children:[(0,K.s)(p.icon),"\xa0",p.icon]})),p.action&&(h.action_input=p.action.map(e=>null==e?void 0:e.id).filter(e=>e),h.action=(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(m=p.action)||void 0===m?void 0:m.map((e,l)=>(0,i.jsxs)("div",{className:"mb-2",children:[(null==e?void 0:e.name)=="view"&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(null==e?void 0:e.name)=="create"&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(null==e?void 0:e.name)=="update"&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),(null==e?void 0:e.name)=="delete"&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),(null==e?void 0:e.name)=="import"&&(0,i.jsx)(g.Z,{title:"Import",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),(null==e?void 0:e.name)=="export"&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),(null==e?void 0:e.name)=="export excel"&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="export pdf"&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})})]},l))},v));let x=e=>{if(e.children)return e.children.map(e=>{var l;let n={icon:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,K.s)(e.icon),"\xa0",e.icon]}),action_input:e.action.map(e=>null==e?void 0:e.id).filter(e=>e),action:(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(l=e.action)||void 0===l?void 0:l.map((e,l)=>(0,i.jsxs)("div",{className:"mb-2",children:[(null==e?void 0:e.name)=="view"&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(null==e?void 0:e.name)=="create"&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(null==e?void 0:e.name)=="update"&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),(null==e?void 0:e.name)=="delete"&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),(null==e?void 0:e.name)=="import"&&(0,i.jsx)(g.Z,{title:"Import",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),(null==e?void 0:e.name)=="export"&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),(null==e?void 0:e.name)=="export excel"&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="export pdf"&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="approve"&&(0,i.jsx)(g.Z,{title:"Approve",children:(0,i.jsx)(u.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="unapprove"&&(0,i.jsx)(g.Z,{title:"Unapprove",children:(0,i.jsx)(c.Z,{className:"ml-2"})})]},l))},v)};return(null==e?void 0:e.children)?{...e,...n,children:x(e)}:{...e,...n}})};p.children&&(h.children=x(p)),n.push({...p,...h})}return n};(0,t.useEffect)(()=>{let e=e=>{null==e||e.filter((e,l)=>{var n,i;e.key=l+1;let t=e.date;if((null===(n=eg.filterDate)||void 0===n?void 0:n.start_date)&&(null===(i=eg.filterDate)||void 0===i?void 0:i.end_date))return t>=eg.filterDate.start_date&&t<=eg.filterDate.end_date})};(async e=>{let l=null==e?void 0:e.map((e,l)=>{let n={};n.key=l+1,ek.map(l=>{n[l.key]=e[l.key]});let i=e=>e.sub_menu.map((e,l)=>{let n={};return ek.map(l=>{n[l.key]=e[l.key],n.key=e.id}),e.sub_menu&&(n.children=i(e)),n});return e.sub_menu&&(n.children=i(e)),n}),n=[];for(let e=0;e<l.length;e++){var t,a,s,r,m;let p=l[e],v=e,h={};if(Array.isArray(p.permission)&&(h.permission=(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(t=p.permission)||void 0===t?void 0:t.map((e,l)=>(0,i.jsxs)("div",{className:"flex items-center w-full mb-2 border-b border-gray-300 px-1 pb-1",children:[(0,i.jsx)("div",{className:"flex-1",children:e.name}),(0,i.jsxs)("div",{className:"flex",children:[-1!==e.data.indexOf("view")&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),-1!==e.data.indexOf("create")&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),-1!==e.data.indexOf("update")&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),-1!==e.data.indexOf("delete")&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),-1!==e.data.indexOf("import")&&(0,i.jsx)(g.Z,{title:"Import",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),-1!==e.data.indexOf("export")&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),-1!==e.data.indexOf("export excel")&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),-1!==e.data.indexOf("export pdf")&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})}),-1!==e.data.indexOf("approve")&&(0,i.jsx)(g.Z,{title:"Approve",children:(0,i.jsx)(u.Z,{className:"ml-2"})}),-1!==e.data.indexOf("unapprove")&&(0,i.jsx)(g.Z,{title:"Unapprove",children:(0,i.jsx)(c.Z,{className:"ml-2"})})]})]},l))},v)),p.avatar||null===p.avatar){if((null==p?void 0:p.avatar)==null)h.avatar_input=p.avatar,h.avatar=(0,i.jsx)(N.C,{style:{backgroundColor:"#"+Math.floor(16777215*Math.random()).toString(16)},children:null===(a=null!==(r=null!==(s=p.name)&&void 0!==s?s:p.username)&&void 0!==r?r:p.fullName)||void 0===a?void 0:a.substring(0,2)});else{let e=await window.convertImageToBase64(window.makeUrl("avatar/"+p.avatar));h.avatar_input=e,h.avatar=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.C,{style:{cursor:"pointer"},src:e,onClick:()=>{document.getElementById(p.key+v).click()}}),(0,i.jsx)(_.Z,{id:p.key+v,style:{display:"none"},alt:p.title,src:e})]})}}p.icon&&(h.icon=(0,i.jsxs)("div",{className:"flex items-center",children:[(0,K.s)(p.icon),"\xa0",p.icon]})),p.action&&(h.action_input=p.action.map(e=>null==e?void 0:e.id).filter(e=>e),h.action=(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(m=p.action)||void 0===m?void 0:m.map((e,l)=>(0,i.jsxs)("div",{className:"mb-2",children:[(null==e?void 0:e.name)=="view"&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(null==e?void 0:e.name)=="create"&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(null==e?void 0:e.name)=="update"&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),(null==e?void 0:e.name)=="delete"&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),(null==e?void 0:e.name)=="import"&&(0,i.jsx)(g.Z,{title:"Import",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),(null==e?void 0:e.name)=="export"&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),(null==e?void 0:e.name)=="export excel"&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="export pdf"&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})})]},l))},v));let x=e=>{if(e.children)return e.children.map(e=>{var l;let n={icon:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,K.s)(e.icon),"\xa0",e.icon]}),action_input:e.action.map(e=>null==e?void 0:e.id).filter(e=>e),action:(0,i.jsx)("div",{className:"flex flex-wrap",children:null===(l=e.action)||void 0===l?void 0:l.map((e,l)=>(0,i.jsxs)("div",{className:"mb-2",children:[(null==e?void 0:e.name)=="view"&&(0,i.jsx)(g.Z,{title:"View",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(null==e?void 0:e.name)=="create"&&(0,i.jsx)(g.Z,{title:"Create",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(null==e?void 0:e.name)=="update"&&(0,i.jsx)(g.Z,{title:"Update",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),(null==e?void 0:e.name)=="delete"&&(0,i.jsx)(g.Z,{title:"Delete",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),(null==e?void 0:e.name)=="import"&&(0,i.jsx)(g.Z,{title:"Import",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),(null==e?void 0:e.name)=="export"&&(0,i.jsx)(g.Z,{title:"Export",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ml-2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})}),(null==e?void 0:e.name)=="export excel"&&(0,i.jsx)(g.Z,{title:"Export Excel",children:(0,i.jsx)(d.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="export pdf"&&(0,i.jsx)(g.Z,{title:"Export PDF",children:(0,i.jsx)(o.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="approve"&&(0,i.jsx)(g.Z,{title:"Approve",children:(0,i.jsx)(u.Z,{className:"ml-2"})}),(null==e?void 0:e.name)=="unapprove"&&(0,i.jsx)(g.Z,{title:"Unapprove",children:(0,i.jsx)(c.Z,{className:"ml-2"})})]},l))},v)};return(null==e?void 0:e.children)?{...e,...n,children:x(e)}:{...e,...n}})};p.children&&(h.children=x(p)),n.push({...p,...h})}return n})(ey).then(l=>{eP(l),eT(eg.filterDate?e(l):l)})},[ey,ek,eg,eA]);let[eY,eR]=(0,t.useState)(),[eK,e$]=(0,t.useState)([null!==(ep=null===(l=eg.filterDate)||void 0===l?void 0:l.start_date)&&void 0!==ep?ep:null,null!==(ev=null===(n=eg.filterDate)||void 0===n?void 0:n.end_date)&&void 0!==ev?ev:null]),eG=(e,l)=>{var n;if(l)return null==eE?void 0:eE.filter(l=>{let n=l.date;if((null==e?void 0:e[0])&&(null==e?void 0:e[1]))return n>=e[0]&&n<=(null==e?void 0:e[1])});e$(e),(null===(n=eg.filterDate)||void 0===n?void 0:n.api)?(eD(!0),eD(!1)):eT(null==eE?void 0:eE.filter(l=>{let n=l.date;if((null==e?void 0:e[0])&&(null==e?void 0:e[1]))return n>=e[0]&&n<=(null==e?void 0:e[1])}))},eJ=(e,l)=>{if("export"==l){let l=[];return e.map(e=>{let n={};if(ek.filter(e=>e.export).map(l=>{if(e[l.key]){if("icon"===l.key)n.icon=e.icon.props.children[2];else if("permission"===l.key){var i;let l="";null===(i=e.menu_list)||void 0===i||i.map(e=>{var n,i;l+=e.title+" ="+(null!==(i=null==e?void 0:null===(n=e.permission)||void 0===n?void 0:n.map(e=>" "+e))&&void 0!==i?i:"")+" \n",e.submenuItems&&e.submenuItems.map((e,n)=>{var i,t;l+=n+1+") "+e.title+" :"+(null!==(t=null==e?void 0:null===(i=e.permission)||void 0===i?void 0:i.map(e=>" "+e))&&void 0!==t?t:"")+" \n"})}),n.permission=l}else"menu_list"!==l.key&&(n[l.key]=e[l.key])}else n[l.key]=e[l.key]}),l.push({...n}),e.children){let n=[];e.children.map(l=>{let i={};ek.filter(e=>e.export).map(n=>{if(l[n.key]){if("icon"===n.key)i.icon=l.icon.props.children[2];else if("permission"===n.key){var t;let l="";null===(t=e.menu_list)||void 0===t||t.map(e=>{var n,i;l+=e.title+" ="+(null!==(i=null==e?void 0:null===(n=e.permission)||void 0===n?void 0:n.map(e=>" "+e))&&void 0!==i?i:"")+" \n",e.submenuItems&&e.submenuItems.map((e,n)=>{var i,t;l+=n+1+") "+e.title+" :"+(null!==(t=null==e?void 0:null===(i=e.permission)||void 0===i?void 0:i.map(e=>" "+e))&&void 0!==t?t:"")+" \n"})}),i.permission=l}else"menu_list"!==n.key&&(i[n.key]=l[n.key])}}),n.push(i)}),l.push(...n)}}),l}if("search"==l){let l=[];return e.map((e,n)=>{let i={};ek.filter(e=>e.export).map(l=>{if(e[l.key]){if("icon"===l.key)i.icon=e.icon.props.children[2];else if("permission"===l.key){var n;let l="";null===(n=e.menu_list)||void 0===n||n.map(e=>{var n,i;l+=e.title+" ="+(null!==(i=null==e?void 0:null===(n=e.permission)||void 0===n?void 0:n.map(e=>" "+e))&&void 0!==i?i:"")+" \n",e.submenuItems&&e.submenuItems.map((e,n)=>{var i,t;l+=n+1+") "+e.title+" :"+(null!==(t=null==e?void 0:null===(i=e.permission)||void 0===i?void 0:i.map(e=>" "+e))&&void 0!==t?t:"")+" \n"})}),i.permission=l}else"menu_list"!==l.key&&(i[l.key]=e[l.key])}}),l.push({key:n+1,...i})}),l}},eQ=(e,l,n)=>void 0===l||""===l?e:e.filter(e=>{let i;for(let a in e){if(i=!1,null==n?void 0:n.find(e=>e!=a)){var t;i=(null===(t=e[a])||void 0===t?void 0:t.toString().toLowerCase().indexOf(l.toLowerCase()))>-1}if(i)break}return i}),[eX,e0]=(0,t.useState)(""),[e2,e1]=(0,t.useState)(""),e5=(0,t.useRef)(null),e4=e=>({filterDropdown:l=>{let{setSelectedKeys:n,selectedKeys:t,confirm:a,close:s}=l;return(0,i.jsxs)("div",{style:{padding:8},onKeyDown:e=>e.stopPropagation(),children:[(0,i.jsx)(j.default,{ref:e5,placeholder:"Search ".concat(e),value:t[0],onChange:e=>n(e.target.value?[e.target.value]:[]),onPressEnter:()=>e6(t,a,e),style:{marginBottom:8,display:"block"}}),(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>e6(t,a,e),icon:(0,i.jsx)(m.Z,{}),size:"small",style:{width:90},children:"Search"}),(0,i.jsx)(Z.ZP,{size:"small",style:{width:90},onClick:()=>{s()},children:"Close"})]})]})},filterIcon:e=>(0,i.jsx)(m.Z,{style:{color:e?"#1677ff":void 0}}),onFilter:(l,n)=>n[e].toString().toLowerCase().includes(l.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout(()=>{var e;return null===(e=e5.current)||void 0===e?void 0:e.select()},100)},render:l=>e2===e?(0,i.jsx)(s(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[eX],autoEscape:!0,textToHighlight:l?l.toString():""}):l}),e6=(e,l,n)=>{l(),e0(e[0]),e1(n)},e3=[];eg.short&&e3.push({key:"sort"}),ek.map((e,l)=>{let n,i,t,a,s;e.sort&&(n={sorter:{compare:(l,n)=>isNaN(l[e.key])?l[e.key].localeCompare(n[e.key]):l[e.key]-n[e.key],multiple:l+1}}),e.search&&(i={...e4(e.key)}),e.width&&(t={width:e.width}),e.ellipsis&&(a={ellipsis:{showTitle:!1}}),e.render&&(s={render:e.render}),e.hidden||e.tableHidden||e3.push({title:e.title,dataIndex:e.key,key:e.key,...n,...i,...t,...a,...s})}),eg.action&&((null===(eh=eg.action)||void 0===eh?void 0:eh.delete)||(null===(ex=eg.action)||void 0===ex?void 0:ex.edit))&&e3.push({title:"Action",dataIndex:"action",width:(null===(ew=eg.action)||void 0===ew?void 0:ew.change_password)?160:100,minWidth:eg.action.change_password?160:100,render:(e,l)=>eV.length>=1?(0,i.jsxs)("div",{className:" text-center",children:[eg.action.delete?(0,i.jsx)(L.Z,{title:"Sure to delete?",onConfirm:()=>li(l),children:(0,i.jsx)("span",{children:(0,i.jsx)(g.Z,{title:"Delete",placement:"left",color:"red",children:(0,i.jsx)(p.Z,{className:" cursor-pointer",style:{color:"red",fontSize:"18px"}})})})}):null,eg.action.edit?(0,i.jsx)("a",{className:"ml-4",onClick:()=>{eH(void 0),lr(l)},children:(0,i.jsx)(g.Z,{title:"Edit",color:"orange",children:(0,i.jsx)(v.Z,{style:{color:"orange",fontSize:"18px"}})})}):null,eg.action.change_password?(0,i.jsx)("a",{className:"ml-4",onClick:()=>lu(l),children:(0,i.jsx)(g.Z,{title:"Change Password",children:(0,i.jsx)(h.Z,{style:{color:"gray",fontSize:"18px"}})})}):null]}):null});let[e7,e8]=(0,t.useState)(!1),[e9,le]=(0,t.useState)(),[ll,ln]=C.Z.useModal(),li=async e=>{var l,n;eF.open({key:e,type:"loading",content:"Deleting ".concat(null!==(l=e.name)&&void 0!==l?l:"","..."),duration:0});let i=await (0,G.Z)().post(eg.action.delete,{id:[e.id]});if((0,z.Z)({res:i,key:e,app:eS})){eF.destroy(e);let l=[];if(eV.map(n=>{n.key!==e.key&&(n.children?l.push({...n,children:n.children.filter(l=>{if(l.key!=e.key)return l})}):l.push(n))}),eL){let l=await (0,G.Z)().get(eZ);(0,z.Z)({res:l,key:e,app:eS})&&eL(l.data)}else eT(l);eF.open({key:e,type:"success",content:"Delete ".concat(null!==(n=e.name)&&void 0!==n?n:""),duration:2}),setTimeout(()=>{eF.destroy(e)},3e3)}else eF.destroy(e)},lt=async()=>{let e="manyDelete",l=[],n=[];eV.map(e=>{-1==lh.indexOf(e.key)?e.children?n.push({...e,children:e.children.filter(e=>{if(-1==lh.indexOf(e.key))return e;l.push(e.id)})}):n.push(e):(e.children&&e.children.map(e=>{l.push(e.id)}),l.push(e.id))});let i=await (0,G.Z)().post(eg.action.delete,{id:l});if((0,z.Z)({res:i,key:e,app:eS})){if(eL){let l=await (0,G.Z)().get(eZ);if((null==l?void 0:l.code)=="00")eL(l.data);else if((null==l?void 0:l.code)=="ERR_NETWORK")eF.open({key:e,type:"error",content:"Server Cannot be Reached",duration:10});else{var t,a,s,r;eF.open({key:e,type:"error",content:"Code:".concat(null==l?void 0:null===(a=l.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.code," | Message:").concat(null==l?void 0:null===(r=l.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message),duration:10})}}else eT(n);return eF.open({key:e,type:"success",content:"Delete",duration:2}),lx([]),!0}},[la,ls]=(0,t.useState)(!1),lr=e=>{eH(void 0),ls(!0),le(e),ly(!0)},[ld]=M.Z.useForm(),[lo,lu]=(0,t.useState)(),lc=async e=>{if(e8(!0),null==lo?void 0:lo.id){let l=await (0,G.Z)().get("/user/"+(null==lo?void 0:lo.id));if((0,z.Z)({res:l,app:eS,key:l.code})){e.username=l.data.username;let n=await (0,G.Z)().post("/user/reset-password/"+(null==lo?void 0:lo.id),e);(0,z.Z)({res:n,app:eS,key:n.code})?(e8(!1),eF.open({key:n.code,type:"success",content:"Password updated successfully",duration:2}),ld.resetFields(),lu(void 0)):e8(!1)}else e8(!1)}else eF.open({key:eV,type:"error",content:"ID Not Found",duration:10})},[lm,lp]=(0,t.useState)(!1),lv=()=>{lp(!0),ly(!0)},[lh,lx]=(0,t.useState)([]),lw={selectedRowKeys:lh,onChange:e=>{console.log("selectedRowKeys changed: ",e),lx(e)},selections:lh.length&&(null===(a=eg.action)||void 0===a?void 0:a.delete)?[S.Z.SELECTION_ALL,{key:"delete",text:(0,i.jsx)("a",{onClick:()=>{ll.confirm({title:"Do you want to delete selected items?",icon:(0,i.jsx)(x.Z,{}),content:"You will delete the selected data",okText:"Yes",cancelText:"No",onOk:()=>lt(),onCancel(){}})},children:"Delete"})}]:[S.Z.SELECTION_ALL]},lf=(e,l,n,i)=>{eR(i.currentDataSource)},lj=[],[lk,ly]=(0,t.useState)(),[lg]=M.Z.useForm(),lN=e=>{var l;return(setTimeout(()=>{ly(!1)},300),lk)?(0,i.jsxs)(i.Fragment,{children:["Group Users"==eN?(0,i.jsx)("div",{className:"mt-6 grid ".concat(null!==(l=null==ek?void 0:ek.find(e=>"permission"==e.type))&&void 0!==l?l:"lg:grid-cols-2 lg:gap-2"," "),children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"w-1/2 text-center py-3",children:"Name"}),(0,i.jsx)("div",{className:"w-1/2 text-center py-3",children:"Permission"})]})}):null,(0,i.jsxs)("div",{className:"flex w-full ".concat("Group Users"!=eN?"mt-10":""),children:[(0,i.jsxs)("div",{className:"space-y-3 lg:w-1/2 w-full",children:[(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"})]}),(0,i.jsxs)("div",{className:"ml-3 space-y-3 lg:w-1/2 w-full",children:[(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"}),(0,i.jsx)(Y.O,{className:"h-6 w-full"})]})]})]}):null==ek?void 0:ek.map((l,n)=>{if(!l.hidden&&!l.inputHidden&&(!l.editHidden&&e||!l.createHidden&&!e)){var t,a,s,r,d,o,u,c,m,p,v,h,x;if("text"==l.type||"number"==l.type||"email"==l.type)return"icon"==l.name?(lj.push({name:[l.name],value:null!==(r=null==e9?void 0:null===(s=e9[l.key])||void 0===s?void 0:null===(a=s.props)||void 0===a?void 0:null===(t=a.children)||void 0===t?void 0:t[2])&&void 0!==r?r:""}),(0,i.jsx)(U.Z,{disabled:e7||(e?l.disabledEdit:l.disabledCreate),className:"lg:w-1/2 p-1",label:l.title,name:l.name,rules:l.rules,type:l.type,id:l.key+l.title,placeholder:l.placeholder},n)):l.change?(lj.push({name:[l.name],value:null==e9?void 0:e9[l.key]}),(0,i.jsx)(U.Z,{onChange:n=>{l.change.value==n.target.value?document.getElementById((e?"edit_":"create_")+l.change.type+l.change.key).style.display="none":document.getElementById((e?"edit_":"create_")+l.change.type+l.change.key).style.display="block"},disabled:e7||(e?l.disabledEdit:l.disabledCreate),className:"lg:w-1/2 p-1",label:l.title,name:l.name,rules:l.rules,type:l.type,id:l.key+l.title,placeholder:l.placeholder},n)):(lj.push({name:[l.name],value:null==e9?void 0:e9[l.key]}),(0,i.jsx)(U.Z,{disabled:e7||(e?l.disabledEdit:l.disabledCreate),className:"lg:w-1/2 p-1",label:l.title,name:l.name,rules:l.rules,type:l.type,id:l.key+l.title,placeholder:l.placeholder},n));if("date"==l.type)return lj.push({name:[l.name],value:A()(null==e9?void 0:e9[l.key],"YYYY-MM-DD")}),(0,i.jsx)(M.Z.Item,{name:l.name,rules:l.rules,label:l.title,className:"lg:w-1/2 p-1",children:(0,i.jsx)(E.default,{disabled:e7,className:"w-full",name:l.name,id:l.key+l.title})},n);if("file"==l.type)return(0,i.jsx)(M.Z.Item,{name:l.name,rules:l.rules,label:l.title,className:"lg:w-full p-1",children:(0,i.jsx)(j.default,{type:"file",disabled:e7,accept:l.accept,className:"w-full",name:l.name,id:e?"edit_"+l.key:"create_"+l.key})},n);if("textarea"==l.type)return(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)(P.default.Title,{level:5,children:l.title}),(0,i.jsx)(eu,{disabled:e7,rows:4})]})},n);else if("permission"==l.type)return(0,i.jsxs)("div",{className:"w-full border-b",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"w-1/2 text-center py-3",children:"Name Menu"}),(0,i.jsx)("div",{className:"w-1/2 text-center py-3",children:"Permission"})]}),null==eB?void 0:eB.map((e,l)=>e.sub_menu_length?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex border-t -mb-2",children:(0,i.jsxs)("div",{className:"py-2 w-1/2",children:[" ",e.name," "]})}),e.sub_menu.map((e,l)=>e.sub_menu_length?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-1/2 ",children:["- ",e.name," "]}),(0,i.jsx)("div",{className:"w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|$"==l.name+"|"+e.name+"|"+e.path)return i}))});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]}),e.sub_menu.map((e,l)=>e.sub_menu_length?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-1/2 ml-2",children:[" - ",e.name," "]}),(0,i.jsx)("div",{className:"w-1/2 -ml-2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|%"==l.name+"|"+e.name+"|"+e.path)return i}))})});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]}),e.sub_menu.map((e,l)=>e.sub_menu_length?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-1/2 ml-4",children:[" - ",e.name," "]}),(0,i.jsx)("div",{className:"w-1/2 -ml-4",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|&"==l.name+"|"+e.name+"|"+e.path)return i}))})})});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]}),e.sub_menu.map((e,l)=>(0,i.jsxs)("div",{className:"flex ",children:[(0,i.jsxs)("div",{className:"w-1/2 pl-6",children:[" - ",e.name]}),(0,i.jsx)("div",{className:"w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|"+n.path==l.name+"|"+e.name+"|"+e.path)return i}))})})})});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]},l))]},l):(0,i.jsxs)("div",{className:"flex ",children:[(0,i.jsxs)("div",{className:"w-1/2 pl-4",children:[" - ",e.name]}),(0,i.jsx)("div",{className:"w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|"+n.path==l.name+"|"+e.name+"|"+e.path)return i}))})})});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]},l))]},l):(0,i.jsxs)("div",{className:"flex ",children:[(0,i.jsxs)("div",{className:"w-1/2 pl-4",children:[" - ",e.name]}),(0,i.jsx)("div",{className:"w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|"+n.path==l.name+"|"+e.name+"|"+e.path)return i}))})});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]},l))]},l):(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-1/2",children:[" - ",e.name]}),(0,i.jsx)("div",{className:"w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.submenuItems)||void 0===i?void 0:i.find(n=>n.permission.find(i=>{if(i+"|"+n.title+"|"+n.path==l.name+"|"+e.name+"|"+e.path)return i}))});return(0,i.jsx)(q.Z,{checked:!lm&&t,className:"",id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]},l))]},l):(0,i.jsxs)("div",{className:"flex border-t",children:[(0,i.jsxs)("div",{className:"py-3 w-1/2",children:[" ",e.name," "]}),(0,i.jsx)("div",{className:"py-3 w-1/2",children:e.action.map((l,n)=>{let t=null!=e9&&!!e9.menu_list.find(n=>{var i;return null===(i=n.permission)||void 0===i?void 0:i.find(i=>{if(i+"|"+n.title+"|"+n.path==l.name+"|"+e.name+"|"+e.path)return i})});return(0,i.jsx)(q.Z,{onChange:e=>{},checked:!lm&&t,id:l.name+"|"+e.name+"|"+e.path,name:e.id+"|"+l.id,label:l.name},n)})})]},l))]},n);else if("select"==l.type)return(null===(d=l.select)||void 0===d?void 0:d.type)?("icon"==l.key?lj.push({name:[l.name],value:null==e9?void 0:null===(c=e9[l.key])||void 0===c?void 0:null===(u=c.props)||void 0===u?void 0:null===(o=u.children)||void 0===o?void 0:o[2]}):"action"==l.key?lj.push({name:[l.name],value:null==e9?void 0:e9.action_input}):lj.push({name:[l.name],value:null==e9?void 0:e9[l.key]}),(0,i.jsx)("div",{id:(e?"edit_":"create_")+l.type+l.key,className:"lg:w-1/2 p-1",children:(0,i.jsx)(H.Z,{disabled:e7,mode:l.mode,label:l.title,type:!0,id:l.name,name:l.name,placeholder:"Select..",className:"w-full",options:l.select.data,rules:l.rules})},n)):(0,i.jsx)("div",{id:l.type+l.key,className:"lg:w-1/2 p-1",children:(0,i.jsx)(H.Z,{disabled:e7,placeholder:"Select..",className:"w-full",id:l.name,options:l.select,label:l.title})},n);else if("avatar"==l.type)return(0,i.jsx)(R.Z,{label:l.title,rules:l.rules,name:l.name,id:e?"edit_"+l.key:"create_"+l.key,src:e?null==e9?void 0:e9[l.key+"_input"]:void 0,empty:e?(null==e9||!e9[l.key+"_input"])&&(null==e9?void 0:e9[l.key+"_input"]):void 0},n);else if("password"==l.type)return(0,i.jsxs)("div",{className:" w-full",children:[(0,i.jsx)(M.Z.Item,{hasFeedback:!0,label:"Password",name:"password",rules:[{required:!0},()=>({validator:(e,l)=>(null==l?void 0:l.length)>=8?Promise.resolve():Promise.reject(Error("Password min 8 characters!"))})],children:(0,i.jsx)(j.default,{disabled:e7,type:"password",placeholder:"Password"})}),(0,i.jsx)(M.Z.Item,{label:"Confirm Password",name:"password_confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0},e=>{let{getFieldValue:l}=e;return{validator:(e,n)=>n&&l("password")!==n?Promise.reject(Error("The new password that you entered do not match!")):Promise.resolve()}}],children:(0,i.jsx)(j.default,{disabled:e7,type:"password",placeholder:"New Password"})})]},n);else if("path_menu_parent_id"==l.type)return lj.find(e=>"menu_type"==e.name[0])?(null==eU?void 0:eU.menu_type)?lj.push({name:["menu_type"],value:eU.menu_type}):(null==e9?void 0:e9.path)=="#"||(null==e9?void 0:e9.path)=="$"||(null==e9?void 0:e9.path)=="%"||(null==e9?void 0:e9.path)=="&"||(null==e9?void 0:e9.path)=="*"?(lj.push({name:["menu_type"],value:"Primary_Sub"}),eH({menu_type:"Primary_Sub"})):!(null==e9?void 0:e9.menu_parent_id)&&(null==e9?void 0:e9.path)?(lj.push({name:["menu_type"],value:"Primary"}),eH({menu_type:"Primary"})):(null==e9?void 0:e9.menu_parent_id)&&(null==e9?void 0:e9.path)&&(lj.push({name:["menu_type"],value:"Sub"}),eH({menu_type:"Sub"})):(null==e9?void 0:e9.path)=="#"||(null==e9?void 0:e9.path)=="$"||(null==e9?void 0:e9.path)=="%"||(null==e9?void 0:e9.path)=="&"||(null==e9?void 0:e9.path)=="*"?(lj.push({name:["menu_type"],value:"Primary_Sub"}),lj.push({name:["path"],value:null==e9?void 0:e9.path})):!(null==e9?void 0:e9.menu_parent_id)&&(null==e9?void 0:e9.path)?lj.push({name:["menu_type"],value:"Primary"}):(null==e9?void 0:e9.menu_parent_id)&&(null==e9?void 0:e9.path)&&lj.push({name:["menu_type"],value:"Sub"}),lj.push({name:["path"],value:null==e9?void 0:e9.path}),lj.push({name:["menu_parent_id"],value:(null==e9?void 0:e9.path)=="#"?"primary":null==e9?void 0:e9.menu_parent_id}),(0,i.jsxs)("div",{className:" w-full lg:flex lg:flex-wrap pl-2",children:[(0,i.jsx)(M.Z.Item,{label:"Menu Type",className:"lg:w-1/2",name:"menu_type",rules:[{required:!0}],children:(0,i.jsx)(I.ZP.Group,{options:[{label:"Primary",value:"Primary"},{label:"Primary Sub",value:"Primary_Sub"},{label:"Sub",value:"Sub"}],onChange:e=>{let{target:{value:l}}=e;lj.push({name:["menu_type"],value:l}),eH({menu_type:l})},optionType:"button",buttonStyle:"solid"})}),(null==eU?void 0:eU.menu_type)==="Sub"?(0,i.jsxs)("div",{className:"lg:w-1/2 lg:flex lg:flex-wrap",children:[(0,i.jsx)("div",{className:"lg:w-1/2 p-1",children:(0,i.jsx)(U.Z,{rules:[{required:!0},()=>({validator:(e,l)=>"#"==l||"$"==l||"%"==l||"&"==l||"*"==l?Promise.reject(Error("Value is not allowed!")):"/"!=l.slice(0,1)&&l?Promise.reject(Error('Value must begin with "/"')):Promise.resolve()})],label:"Path",name:"path",id:(e?"edit_":"create_")+"path",disabled:e7||(e?l.disabledEdit:l.disabledCreate),type:"text",placeholder:"/path"})}),(0,i.jsx)("div",{id:(e?"edit_":"create_")+l.type+l.key,className:"lg:w-1/2 p-1",children:(0,i.jsx)(H.Z,{disabled:e7,label:"Menu Primary",id:(e?"edit_":"create_")+"menu_parent_id",name:"menu_parent_id",placeholder:"Select..",className:"w-full",options:null===(m=ek.find(e=>"menu_parent_id"==e.key))||void 0===m?void 0:m.select.data,rules:[{required:!0}]})})]}):(null==eU?void 0:eU.menu_type)==="Primary_Sub"?(0,i.jsx)("div",{className:"lg:w-1/2 lg:flex lg:flex-wrap",children:(0,i.jsx)("div",{id:(e?"edit_":"create_")+l.type+l.key,className:"lg:w-full p-1",children:(0,i.jsx)(H.Z,{disabled:e7,label:"Menu Section",name:"menu_parent_id",id:(e?"edit_":"create_")+"menu_section",placeholder:"Select..",className:"w-full",options:[{label:"Primary Menu",type:0,value:"primary"},...null===(p=ek.find(e=>"menu_parent_id"==e.key))||void 0===p?void 0:p.select.data],rules:[{required:!0}]})})}):(null==eU?void 0:eU.menu_type)==="Primary"?(0,i.jsx)("div",{className:"lg:w-1/2 lg:flex lg:flex-wrap",children:(0,i.jsx)("div",{id:(e?"edit_":"create_")+l.type+l.key,className:"lg:w-full p-1",children:(0,i.jsx)(U.Z,{rules:[{required:!0},()=>({validator:(e,l)=>"#"==l||"$"==l||"%"==l||"&"==l||"*"==l?Promise.reject(Error("Value is not allowed!")):"/"!=l.slice(0,1)&&l?Promise.reject(Error('Value must begin with "/"')):Promise.resolve()})],label:"Path",name:"path",id:(e?"edit_":"create_")+"path",disabled:e7||(e?l.disabledEdit:l.disabledCreate),type:"text",placeholder:"/path"})})}):null]},n);else if("kategori_sertifikat"==l.type)return lj.push({name:["unit"],value:null!==(v=null==eU?void 0:eU.unit)&&void 0!==v?v:null==e9?void 0:e9[l.key].sub_kategori}),lj.push({name:["kategori"],value:null!==(h=null==eU?void 0:eU.kategori)&&void 0!==h?h:null==e9?void 0:e9[l.key].id}),(0,i.jsxs)("div",{className:"lg:w-1/2 p-1",children:[(0,i.jsx)(H.Z,{disabled:e7,label:"Unit",type:!0,name:"unit",id:"unit",placeholder:"Select..",className:"w-full",onChange:e=>{var n;eH({unit:e,kategori:null===(n=l.select.find(l=>l.sub_kategori==e))||void 0===n?void 0:n.id})},options:ea().uniqBy(l.select.map(e=>({label:e.sub_kategori,value:e.sub_kategori})),"label")}),(null!==(x=null==eU?void 0:eU.unit)&&void 0!==x?x:null==e9?void 0:e9[l.key].sub_kategori)?(0,i.jsx)(H.Z,{disabled:e7,label:"Kategori",type:!0,name:"kategori",id:"kategori",placeholder:"Select..",className:"w-full",options:l.select.map(e=>({label:e.sub_kategori_sub,value:e.id,sub:e.sub_kategori})).filter(e=>{var n;return e.sub==(null!==(n=null==eU?void 0:eU.unit)&&void 0!==n?n:null==e9?void 0:e9[l.key].sub_kategori)})}):null]},n)}})},l_=async(e,l)=>{let n=null,i=new FormData;for(let l in e)e[l]&&i.append(l,e[l]);let t=!1;if(ek.filter(l=>(null==l?void 0:l.hidden)?void 0:!e[l.key]).map(n=>{var a,s,r,d,o,u,c,m;if("avatar"==n.type){let t=null===(a=document.getElementById("add"!==l?"edit_"+n.key:"create_"+n.key))||void 0===a?void 0:a.files;(null==t?void 0:t[0])&&i.append(n.key,t[0]),(null===(s=document.getElementById("imgDel_edit_".concat(n.key)))||void 0===s?void 0:s.value)&&(i.append(n.key,""),e[n.name]=null)}else if("date"==n.type);else if("permission"==n.type){let l=Array.from(new FormData(la?document.getElementById("editModal"):document.getElementById("addModal")).entries()),n=[];l.map(e=>{let l=e[0].split("|");if(2==l.length){if(n.length){let e=n.find(e=>e.menu_id==l[0]);e?n=[...n.filter(e=>e.menu_id!=l[0]),{menu_id:l[0],action:[...e.action,l[1]]}]:n.push({menu_id:l[0],action:[l[1]]})}else n.push({menu_id:l[0],action:[l[1]]})}}),n.length||(eF.open({key:"menu_list",type:"info",content:"There are no menus checked, please check at least one menu",duration:2}),t=!0),e.menu_list=n,i.append("menu_list",n)}else!Array.from(i.entries()).find(e=>n.name==e[0])&&((e[n.name]||"password"!==n.name)&&(e[n.name]||"action"!==n.name)&&(e[n.name]||"path"!==n.name?(e[n.name]||"action"!==n.name)&&i.append(n.name,""):(i.append(n.name,"primary"==e.menu_parent_id?"#":null!==(o=e.path)&&void 0!==o?o:null===(d=ek.find(e=>"menu_parent_id"==e.key))||void 0===d?void 0:null===(r=d.select.data.find(l=>l.value==e.menu_parent_id))||void 0===r?void 0:r.type),i.append("menu_parent_id","primary"==e.menu_parent_id||""==e.menu_parent_id?null:e.menu_parent_id))),e[n.name]||"action"!=n.name?e[n.name]||"path"!=n.name?e[n.name]||"menu_parent_id"!=n.name?(e[n.name]||"password"!=n.name)&&(e[n.name]=""):e[n.name]="primary"==e[n.name]||""==e[n.name]?null:e[n.name]:(e[n.name]="primary"==e.menu_parent_id?"#":null!==(m=e.path)&&void 0!==m?m:null===(c=ek.find(e=>"menu_parent_id"==e.key))||void 0===c?void 0:null===(u=c.select.data.find(l=>l.value==e.menu_parent_id))||void 0===u?void 0:u.type,e.menu_parent_id="primary"==e.menu_parent_id||""==e.menu_parent_id?null:e.menu_parent_id):e[n.name]=[])}),ek.filter(l=>{"number"==l.type&&"nik"!==l.key?e[l.name]=e[l.name]?Number(e[l.name]):null:"date"==l.type&&(e[l.name]=A()(e[l.name]).format("YYYY-MM-DD"))}),ek.find(e=>{if("file"==e.type){var n;let t=null===(n=document.getElementById("add"!==l?"edit_"+e.key:"create_"+e.key))||void 0===n?void 0:n.files;if(null==t?void 0:t[0])return i.delete(e.key),i.append(e.key,null==t?void 0:t[0]),!0}else if("avatar"==e.type)return!0})&&(n={"Content-Type":"multipart/form-data"}),!t){if(e8(!0),"add"==l){var a;eF.open({key:e,type:"loading",content:"Loading...",duration:0});let l=await (0,G.Z)(n).post(null===(a=eg.action)||void 0===a?void 0:a.create,n?i:e);if((0,z.Z)({res:l,app:eS,key:e})){let l=await (0,G.Z)().get(eZ);(0,z.Z)({res:l,app:eS,key:e})&&(e8(!1),eL?eL(l.data):eT(await eq(l.data)),eF.destroy(),lp(!1),lg.resetFields(),eH(void 0),eF.open({key:e,type:"success",content:"Created Successfully",duration:2}))}else eF.destroy(),e8(!1)}else if("edit"==l){if(e9.id){eF.open({key:e,type:"loading",content:"Loading...",duration:0});let l=await (0,G.Z)(n).post(eg.action.edit+"/"+e9.id,n?i:e);if((0,z.Z)({res:l,app:eS,key:e})){let l=await (0,G.Z)().get(eZ);(0,z.Z)({res:l,app:eS,key:e})&&(eF.destroy(),e8(!1),eL?eL(l.data):eT(await eq(l.data)),ls(!1),eH(void 0),eF.open({key:e,type:"success",content:"Successfully Updated",duration:2}))}else eF.destroy(),e8(!1);let t=async()=>{let e=await (0,G.Z)().refresh_Token();if((0,z.Z)({res:e,app:eS})){eM.dataUser=e.data;let l=[];e.data.menuList.find(e=>{e.submenuItems?e.submenuItems.find(e=>{e.path===eC.replace("/admin","")&&(l=e.permission)}):e.path===eC.replace("/admin","")&&(l=e.permission)}),eM.permission=l}};("Role"===eN||"Menu"===eN)&&t()}else eF.destroy(),e8(!1),eF.open({key:eg.action.edit,type:"error",content:"Edit Data Not Found",duration:2})}else if("sort"==l){e8(!1);let l={};Object.keys(e).map(n=>{if("icon"==n){var i,t;l[n]=null===(t=e[n])||void 0===t?void 0:null===(i=t.props)||void 0===i?void 0:i.children[2]}else l[n]=e[n]});let n=await (0,G.Z)().post(eZ+"/update/"+e.id,l);(0,z.Z)({res:n,app:eS,key:n})?(eF.destroy(),eH(void 0),eF.open({key:n,type:"success",content:"Sorting was successful",duration:2})):(eF.destroy(),eT(eV))}}},lb=e=>{var l,n,i,t,a,s,r;if("excel"==e.key)lZ(null!=eY?eY:eV,null===(n=eg.export)||void 0===n?void 0:null===(l=n.excel)||void 0===l?void 0:l.subject);else if("pdf"===e.key){let e=new es.default({orientation:"p",unit:"mm",format:"a4"});ed()(e,{theme:"plain",body:[[{content:null===(t=eg.export)||void 0===t?void 0:null===(i=t.excel)||void 0===i?void 0:i.subject.toUpperCase(),styles:{halign:"left",fontSize:13,fontStyle:"bold"}}]]});let l=Object.keys(null===(a=null!=eY?eY:eV)||void 0===a?void 0:a[0]).filter(e=>"id"!=e&&"key"!=e&&"file"!=e),n=[l.map(e=>{var l,n;return{content:(null===(l=e.toUpperCase())||void 0===l?void 0:l.replaceAll("_"," "))=="HTML"?"KETERANGAN":null===(n=e.toUpperCase())||void 0===n?void 0:n.replaceAll("_"," "),styles:{halign:"center"}}})],d=(null!=eY?eY:eV).map(e=>{let n=[];return l.map(l=>{var i,t,a,s,r,d,o,u,c,m;(null===(i=e[l])||void 0===i?void 0:i.props)?n.push({content:null!==(d=null===(r=e[l])||void 0===r?void 0:null===(s=r.props)||void 0===s?void 0:null===(a=s.children)||void 0===a?void 0:a.map((e,l)=>l>0?e:"").join(""))&&void 0!==d?d:"-",styles:{halign:"center"}}):(null===(t=e[l])||void 0===t?void 0:t.sub_kategori)?n.push({content:null!==(u=null===(o=e[l])||void 0===o?void 0:o.sub_kategori)&&void 0!==u?u:"-",styles:{halign:"center"}}):n.push({content:null!==(m=null===(c=e[l])||void 0===c?void 0:c.replaceAll("_"," "))&&void 0!==m?m:"-",styles:{halign:"center"}})}),n});ed()(e,{theme:"striped",headStyles:{lineWidth:.1,lineColor:[0,0,0],fillColor:[121,193,235],textColor:[0,0,0],halign:"center",valign:"middle",fontStyle:"bold"},bodyStyles:{lineWidth:.1,lineColor:[0,0,0],textColor:[0,0,0]},head:n,body:d}),e.save((null===(r=eg.export)||void 0===r?void 0:null===(s=r.excel)||void 0===s?void 0:s.subject)+".pdf")}},lZ=(e,l)=>{let n=eJ(e,"export");n.forEach(e=>{if("html"in e){var l,n,i;e.keterangan=null===(i=e.html)||void 0===i?void 0:null===(n=i.props)||void 0===n?void 0:null===(l=n.children)||void 0===l?void 0:l.map((e,l)=>l>0?e:"").join(""),delete e.html}}),(0,$.Z)(n.map(e=>Object.keys(e).reduce((l,n)=>(n.includes("_")?l[n.replace(/_/g," ")]=e[n]:l[n]=e[n],l),{})),l)},lL=()=>{var e,l;let n=[];return(null===(e=eg.export)||void 0===e?void 0:e.excel)&&n.push({key:"excel",label:(0,i.jsxs)(g.Z,{placement:"left",title:"Download Excel",children:[(0,i.jsx)(d.Z,{})," Excel"]})}),(null===(l=eg.export)||void 0===l?void 0:l.pdf)&&n.push({key:"pdf",label:(0,i.jsxs)(g.Z,{placement:"left",title:"Download PDF",children:[(0,i.jsx)(o.Z,{})," PDF"]})}),n};return(0,i.jsx)(i.Fragment,{children:e_?(0,i.jsx)(X.Z,{}):(0,i.jsxs)(D.Z,{className:" rounded-2xl border-none shadow",children:[ez,ln,eg.filterDate&&(0,i.jsx)(V.Z,{onChange:eG,end_date:eg.filterDate.end_date,start_date:eg.filterDate.start_date,rangeDayPick:eg.filterDate.rangeDayPick,className:" w-full  xl:w-1/3 mb-2"}),(0,i.jsxs)("div",{className:"float-right w-full xl:w-1/2 mb-2 ",children:[(0,i.jsxs)("div",{className:"md:hidden",children:[(null===(O=eg.action)||void 0===O?void 0:O.create)?(0,i.jsx)(g.Z,{title:"Create Data",color:"blue",children:(0,i.jsx)(Z.ZP,{className:"mb-2 w-full",type:"primary",onClick:()=>{eH(void 0),lg.resetFields(),lv()},children:"+ Add"})}):null,(null===(W=eg.export)||void 0===W?void 0:W.excel)||(null===(F=eg.export)||void 0===F?void 0:F.pdf)?(0,i.jsx)(B.Z,{className:"mb-2 w-full",menu:{items:lL(),onClick:lb},children:(0,i.jsx)(Z.ZP,{children:(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(f.Z,{})," Export"]})})}):null,eg.import?(0,i.jsx)(Q.Z,{className:"mb-2 w-full",urlFormat:null===(et=eg.import)||void 0===et?void 0:et.url}):null]}),(0,i.jsxs)("div",{className:"flex justify-end",children:[eg.nonSearchAll?null:(0,i.jsx)(T.Z,{className:"w-full",directChange:()=>{eD(!0)},onChange:e=>{if(eg.filterApiSearch);else{if(eg.filterDate)""==e?eG(eK,!1):eT(eQ(eG(eK,!0),e));else{let l=eQ(eJ(eE,"search"),e,["key"]);eT(eE.filter(e=>{if(l.find(l=>l.key==e.key))return e}))}eR(void 0)}eD(!1)}}),(0,i.jsxs)("div",{className:"flex max-md:hidden",children:[(null===(er=eg.action)||void 0===er?void 0:er.create)?(0,i.jsx)(g.Z,{title:"Create Data",color:"blue",children:(0,i.jsx)(Z.ZP,{className:"ml-2",type:"primary",onClick:()=>{eH(void 0),lg.resetFields(),lv()},children:"+ Add"})}):null,(null===(eo=eg.export)||void 0===eo?void 0:eo.excel)||(null===(ec=eg.export)||void 0===ec?void 0:ec.pdf)?(0,i.jsx)(B.Z,{className:"ml-2 w-full",menu:{items:lL(),onClick:lb},children:(0,i.jsx)(Z.ZP,{children:(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(f.Z,{}),"   Export"]})})}):null,eg.import?(0,i.jsx)(Q.Z,{className:"ml-2",urlFormat:null===(em=eg.import)||void 0===em?void 0:em.url}):null]})]})]}),(0,i.jsx)(C.Z,{title:"Create ".concat(eN),open:lm,onOk:()=>{document.getElementById("addModalSubmit").click()},confirmLoading:e7,onCancel:()=>{lp(!1)},width:"80%",className:"z-50",children:(0,i.jsxs)(M.Z,{autoComplete:"off",layout:"vertical",id:"addModal",form:lg,fields:[],onFinish:e=>l_(e,"add"),className:"lg:flex lg:flex-wrap",children:[lN(),(0,i.jsx)("button",{type:"submit",id:"addModalSubmit"})]})}),(0,i.jsx)(C.Z,{className:"z-50",title:"Edit ".concat(eN,"  ").concat(null!==(ej=null!==(ef=null==e9?void 0:e9.name)&&void 0!==ef?ef:null==e9?void 0:e9.username)&&void 0!==ej?ej:""),open:la,onOk:()=>{document.getElementById("editModalSubmit").click()},confirmLoading:e7,onCancel:()=>{ls(!1)},width:"80%",children:(0,i.jsxs)(M.Z,{layout:"vertical",onFinish:e=>l_(e,"edit"),autoComplete:"off",fields:lj,onFieldsChange:(e,l)=>{lj=l},id:"editModal",className:"lg:flex lg:flex-wrap",children:[lN("edit"),(0,i.jsx)("button",{type:"submit",id:"editModalSubmit"})]})}),(0,i.jsx)(C.Z,{className:"z-50",title:"Change Password",open:lo,footer:"",confirmLoading:e7,onCancel:()=>lu(!1),width:"80%",children:(0,i.jsxs)(M.Z,{autoComplete:"off",layout:"vertical",onFinish:lc,form:ld,children:[(0,i.jsxs)("div",{className:"lg:flex lg:flex-wrap",children:[(0,i.jsx)(M.Z.Item,{hasFeedback:!0,label:"New Password",className:"lg:w-1/2 p-1",name:"new_password",rules:[{required:!0},()=>({validator:(e,l)=>(null==l?void 0:l.length)>=8?Promise.resolve():Promise.reject(Error("Password min 8 characters!"))})],children:(0,i.jsx)(j.default,{type:"password",disabled:e7,placeholder:"Password"})}),(0,i.jsx)(M.Z.Item,{label:"Confirm Password",name:"confim_password",className:"lg:w-1/2 p-1",dependencies:["new_password"],hasFeedback:!0,rules:[{required:!0},e=>{let{getFieldValue:l}=e;return{validator:(e,n)=>n&&l("new_password")!==n?Promise.reject(Error("The new password that you entered do not match!")):Promise.resolve()}}],children:(0,i.jsx)(j.default,{type:"password",disabled:e7,placeholder:"New Password"})})]}),(0,i.jsx)(M.Z.Item,{children:(0,i.jsx)(Z.ZP,{loading:e7,type:"dashed",danger:!0,htmlType:"submit",className:"w-full p-1",children:"Change Password"})})]})}),eg.sort?(0,i.jsx)(ee.LB,{modifiers:[el.DL],onDragEnd:e=>{let{active:l,over:n}=e;if(l.id!==(null==n?void 0:n.id)){let e=eV.findIndex(e=>e.key===l.id);l_({sort:eV.findIndex(e=>e.key===(null==n?void 0:n.id))+1,...eV[e]},"sort"),eT(e=>{let i=e.findIndex(e=>e.key===l.id),t=e.findIndex(e=>e.key===(null==n?void 0:n.id));return(0,en.Rp)(e,i,t)})}},children:(0,i.jsx)(en.Fo,{items:eV.map(e=>e.key),strategy:en.qw,children:(0,i.jsx)(S.Z,{components:{body:{row:e=>{let{children:l,...n}=e,{attributes:a,listeners:s,setNodeRef:r,setActivatorNodeRef:d,transform:o,transition:u,isDragging:c}=(0,en.nB)({id:n["data-row-key"]}),m={...n.style,transform:ei.ux.Transform.toString(o&&{...o,scaleY:1}),transition:u,...c?{position:"relative",zIndex:9999}:{}};return(0,i.jsx)("tr",{...n,ref:r,style:m,...a,children:t.Children.map(l,e=>"sort"===e.key&&eg.short?t.cloneElement(e,{children:(0,i.jsx)(w.Z,{ref:d,style:{touchAction:"none",cursor:"move"},...s})}):e)})}}},rowKey:"key",scroll:{x:800},loading:eI,rowSelection:eg.rowSelection?{...lw,checkStrictly:!1}:void 0,columns:e3,dataSource:eV,onChange:lf})})}):(0,i.jsx)(S.Z,{pagination:!eg.nonPagination&&void 0,showHeader:!eg.nonShowHeader&&void 0,scroll:{x:800},loading:eI,rowSelection:eg.rowSelection?{...lw,checkStrictly:!1}:void 0,columns:e3,dataSource:eV,onChange:lf,rowClassName:e=>(null==e?void 0:e.status)=="Nonactive"||(null==e?void 0:e.status)=="Nonaktif"?"bg-red-100 dark:bg-red-800 dark:bg-opacity-10":""})]})})}}}]);