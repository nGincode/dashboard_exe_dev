"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1105],{57608:function(e,a,l){l.d(a,{Ol:function(){return o},SZ:function(){return i},Zb:function(){return s},aY:function(){return m},ll:function(){return d}});var t=l(57437),n=l(2265),r=l(13498);let s=n.forwardRef((e,a)=>{let{className:l,classNameFalse:n,...s}=e;return(0,t.jsx)("div",{ref:a,className:n?l:(0,r.cn)("rounded-2xl my-2 border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",l),...s})});s.displayName="Card",n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-2xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-50",l),...n})}).displayName="Card900";let o=n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 px-6 py-3  rounded-t-2xl  bg-white dark:bg-black",l),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",l),...n})});d.displayName="CardTitle";let i=n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-zinc-500 dark:text-zinc-400 ",l),...n})});i.displayName="CardDescription";let m=n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-5 bg-white dark:bg-black rounded-b-2xl",l),...n})});m.displayName="CardContent",n.forwardRef((e,a)=>{let{className:l,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",l),...n})}).displayName="CardFooter"},41105:function(e,a,l){l.d(a,{Z:function(){return F}});var t=l(57437),n=l(2265),r=l(16463),s=l(68348),o=l(62586),d=l(46682),i=l(62575),m=l(85169),c=l(62737),u=l.n(c);l(65799);var f=l(71275),p=l(57608),x=l(16584),h=l(32034),v=l(23288),b=l(85313),Y=l(90696),w=l(9707),N=l(66407),j=l(63843),g=l(99945),y=l(73717),M=e=>{let{downloadFalse:a,loadingExport:l,trueApprave:r,downloadPdf:o,downloadExcel:i,title:m,onDelete:c,falseDelete:u,date:p,approve:x,onApprove:M,onUnapprove:k,loadingDisable:D}=e,C=(0,n.useContext)(f.Z),[Z,I]=(0,n.useState)([]),[S,O]=(0,n.useState)([]),{message:F,notification:z,modal:E}=s.Z.useApp(),{confirm:T}=E;return(0,n.useEffect)(()=>{var e,l,n,s,d;let f=[],h=[];(null==C?void 0:null===(e=C.permission)||void 0===e?void 0:e.indexOf("export excel"))!==-1&&i&&!a&&f.push({key:"excel",label:(0,t.jsx)("a",{className:"w-full text-left",onClick:i,children:"Excel"}),icon:(0,t.jsx)(b.Z,{style:{color:"green"}}),className:"h-10"}),(null==C?void 0:null===(l=C.permission)||void 0===l?void 0:l.indexOf("export pdf"))!==-1&&o&&!a&&f.push({key:"pdf",label:(0,t.jsx)("a",{className:"w-full text-left",onClick:o,children:"PDF"}),icon:(0,t.jsx)(Y.Z,{style:{color:"red"}}),className:"h-10"}),(null==C?void 0:null===(n=C.permission)||void 0===n?void 0:n.indexOf("delete"))===-1||u||h.push({key:"delete",label:(0,t.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Delete data?",icon:(0,t.jsx)(w.Z,{}),content:"Are you sure want to delete this ".concat(m," data in ").concat(p," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){c(!0)}})},children:"Delete"}),icon:(0,t.jsx)(w.Z,{style:{color:"red"}}),className:"h-10"}),p&&(x?(null==C?void 0:null===(d=C.permission)||void 0===d?void 0:d.indexOf("unapprove"))!==-1&&r&&h.push({key:"unapprove",label:(0,t.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Unapprove data?",icon:(0,t.jsx)(j.Z,{}),content:"Are you sure want to Unapprove this ".concat(m," data in ").concat(p," ?"),okText:"Yes",okType:"danger",cancelText:"No",onOk(){k(!0)}})},children:"Unapprove"}),icon:(0,t.jsx)(j.Z,{style:{color:"red"}}),className:"h-10"}):(null==C?void 0:null===(s=C.permission)||void 0===s?void 0:s.indexOf("approve"))!==-1&&r&&h.push({key:"approve",label:(0,t.jsx)("a",{className:"w-full text-left",onClick:()=>{T({title:"Approve data?",icon:(0,t.jsx)(N.Z,{style:{color:"green"}}),content:"Are you sure want to Approve this ".concat(m," data in ").concat(p," ?"),okText:"Yes",cancelText:"No",onOk(){M(!0)}})},children:"Approve"}),icon:(0,t.jsx)(N.Z,{style:{color:"green"}}),className:"h-10"})),I(f),O(h)},[T,a,r,u,C,m,p,c,o,i,x,M,k]),(0,t.jsxs)(t.Fragment,{children:[S.length?(0,t.jsx)("div",{className:"",children:(0,t.jsx)(h.Z,{className:"md:mt-12 float-right mr-4",disabled:l,menu:{items:S},children:(0,t.jsx)(d.ZP,{children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(g.Z,{})," Opsi"]})})})}):null,Z.length?(0,t.jsx)("div",{className:"",children:(0,t.jsx)(h.Z,{className:"md:mt-12 float-right",disabled:!!l||!!D,menu:{items:Z},children:(0,t.jsx)(d.ZP,{loading:l,children:(0,t.jsxs)(v.Z,{children:[l?"":(0,t.jsx)(y.Z,{})," Export"]})})})}):null]})},k=l(42005),D=l(30939),C=l(95053),Z=l(72100);let{RangePicker:I}=C.default;var S=e=>{let{disabled:a,className:l,onDateSelect:r,widthDate:s,enableSelect:o,onDistanceSelect:d,typeDatePicker:i,showTime:m,loadingDisable:c,allowClear:f,onChangeTri:p,disabledDate:x}=e,[h,v]=(0,n.useState)([]),[b,Y]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[j,g]=(0,n.useState)(0),[y,M]=(0,n.useState)(null),[D,S]=(0,n.useState)(0),[O,F]=(0,n.useState)(null),[z,E]=(0,n.useState)(null),[T,U]=(0,n.useState)([null,null]);(0,n.useEffect)(()=>{r(b)},[b]),(0,n.useEffect)(()=>{E(null),F(null),M(null)},[p]),(0,n.useEffect)(()=>{(async()=>{let e=await (0,k.Z)().get("/distance/"),a=null==e?void 0:e.data;if(void 0!==a){let e=[];e.push({value:"",label:"All Data"}),a.map((a,l)=>e.push({value:a.distance,label:a.distance})),v(e)}})()},[]);let A=(e,a)=>{if(null==e?void 0:e[0]){let l=parseInt(u()(e[0]).format("DD")),t=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),s=parseInt(u()(e[0]).format("HH")),o=parseInt(u()(e[0]).format("mm")),d=parseInt(u()(e[0]).format("ss")),i=parseInt(u()(e[1]).format("DD")),m=parseInt(u()(e[1]).format("MM")),c=parseInt(u()(e[1]).format("YYYY")),f=parseInt(u()(e[1]).format("hh")),p=parseInt(u()(e[1]).format("mm")),x=parseInt(u()(e[1]).format("ss"));Y({...b,dateFrom:l,monthFrom:t,yearFrom:n,hourFrom:s,minuteFrom:o,secondFrom:d,dateUntil:i,monthUntil:m,yearUntil:c,hourUntil:f,minuteUntil:p,secondUntil:x,dateStrings:a}),r(b,w,j,y,D)}else r(void 0)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col border-none mb-7 mt-2 ml-1",children:[(0,t.jsx)("span",{id:"subject",className:"mb-5 mt-1 text-[14px] font-bold",children:"Periode"}),(0,t.jsxs)("div",{className:"flex flex-wrap",children:[""===i?(0,t.jsx)(I,{allowClear:f,disabled:!!a||!!c,allowEmpty:[!0,!1],className:"".concat(l," mb-3 lg:mr-3"),showTime:m,onChange:A,disabledDate:x}):"rangemonth"===i?(0,t.jsx)(I,{picker:"month",disabled:!!a||!!c,className:"".concat(l," mb-3 lg:mr-3 sm:w-32"),onChange:A,disabledDate:x}):"triwulan"===i?(0,t.jsx)(I,{picker:"month",placeholder:["Start month","End month"],allowEmpty:[!0,!0],allowClear:!0,value:[z?u()(z,"YYYY-MM"):null,O?u()(O,"YYYY-MM"):null],disabled:[!!a||!!c,!0],onChange:(e,a)=>{if(null==e?void 0:e[0]){let l=parseInt(u()(e[0]).format("DD")),t=parseInt(u()(e[0]).format("MM")),n=parseInt(u()(e[0]).format("YYYY")),s=parseInt(u()(e[0]).format("HH")),o=parseInt(u()(e[0]).format("mm")),d=parseInt(u()(e[0]).format("ss")),i=parseInt(u()(e[0]).add(2,"month").format("DD")),m=parseInt(u()(e[0]).add(2,"month").format("MM")),c=parseInt(u()(e[0]).add(2,"month").format("YYYY")),f=parseInt(u()(e[0]).add(2,"month").format("hh")),p=parseInt(u()(e[0]).add(2,"month").format("mm")),x=parseInt(u()(e[0]).add(2,"month").format("ss")),h=u()(e[0]).locale("id").format("MMMM"),v=parseInt(u()(e[0]).format("M")),k=parseInt(u()(e[0]).format("YYYY")),C=parseInt(u()(e[0]).format("DD"));E(u()(null==e?void 0:e[0]).format("YYYY-MM-DD")),F(u()(null==e?void 0:e[0]).add(2,"month").format("YYYY-MM-DD")),N(h),g(v),M(k),S(C),Y({...b,dateFrom:l,monthFrom:t,yearFrom:n,hourFrom:s,minuteFrom:o,secondFrom:d,dateUntil:i,monthUntil:m,yearUntil:c,hourUntil:f,minuteUntil:p,secondUntil:x,month:v,monthNumber:v,year:k,day:C,dateStrings:a}),r(b,w,j,y,D)}else E(null),F(null),r(void 0)},disabledDate:x}):"rangepicker"===i?(0,t.jsx)(I,{allowClear:f,disabled:!!a||!!c,allowEmpty:[!0,!1],className:"".concat(l," mb-3 lg:mr-3"),showTime:m,onChange:A,disabledDate:x}):"year"===i?(0,t.jsx)(C.default,{disabled:!!a||!!c,className:"".concat(l," mb-3 lg:mr-3 sm:w-[500px] w-96"),value:y?u()(y,"YYYY"):null,onChange:(e,a)=>{if(null===e)M(null),r(y);else{let l=u()(e).locale("id").format("MMMM"),t=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),s=parseInt(u()(e).format("DD"));N(l),g(t),M(a),S(s),Y({...b,month:l,monthNumber:t,year:n,day:s}),r(b,w,j,y,D)}},allowClear:!0,format:"YYYY",picker:"year",disabledDate:x}):(0,t.jsx)(C.default,{disabled:!!a||!!c,className:"".concat(l," mb-3 lg:mr-3 sm:w-[500px] w-96"),onChange:(e,a)=>{let l=u()(e).locale("id").format("MMMM"),t=parseInt(u()(e).format("M")),n=parseInt(u()(e).format("YYYY")),s=parseInt(u()(e).format("DD"));N(l),g(t),M(n),S(s),Y({...b,month:l,monthNumber:t,year:n,day:s}),r(b,w,j,y,D)},picker:i||"month",disabledDate:x}),(0,t.jsx)(Z.default,{disabled:!!a||!!c,showSearch:!0,defaultValue:"",className:"".concat(null!=o?o:"hidden"," sm:ml-2 md:w-32 sm-w-32 "),onChange:e=>{d&&d(e)},placeholder:"Select Distance",filterOption:(e,a)=>((null==a?void 0:a.label)||"").toLowerCase().includes((null!=e?e:"").toLowerCase()),options:h.map((e,a)=>({value:e.value,label:"".concat(e.label)}))})]})]})})},O=l(86658);function F(e){let{className:a,loadingBottom:l,loadingExport:c,childrenInput:h,enableSelect:v,onDistanceSelect:b,typeLoading:Y,type:w,codeDelete:N,onDelete:j,downloadPdf:g,downloadExcel:y,loading:C,dateChange:Z,children:I,data:F,loadingDisable:z,showTime:E,allowClear:T,warning:U,showModalWarn:A,onApprove:_,onChangeTri:P,disabledDate:R,downloadFalse:B,emptyFalse:H,noTheme:L,codeMenu:V}=e;(0,n.useContext)(f.Z);let[q,G]=(0,n.useState)(),[J,K]=(0,n.useState)(),[Q,W]=(0,n.useState)(),X=s.Z.useApp(),{message:$}=X;(0,r.usePathname)(),(0,n.useEffect)(()=>{var e,a;W((null==F?void 0:null===(e=F[0])||void 0===e?void 0:e.approved_at)=="-"?null:null==F?void 0:null===(a=F[0])||void 0===a?void 0:a.approved_at)},[F]),(0,n.useEffect)(()=>{G(c)},[c,$]),(0,n.useEffect)(()=>{K(void 0)},[P]);let ee=async()=>{$.open({key:"approve_report",type:"loading",content:"Approveing...",duration:0});let e=await (0,k.Z)().post("report/approve",{code:N,codeMenu:null!=V?V:null,month:2==J.length?Number(u()(J[0]).format("MM")):Number(u()(J).format("MM")),year:2==J.length?Number(u()(J[0]).format("YYYY")):Number(u()(J).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"approve_report"})&&(W(new Date),_(!0))},ea=async()=>{$.open({key:"unapprove_report",type:"loading",content:"Unapproveing...",duration:0});let e=await (0,k.Z)().post("report/unapprove",{code:N,codeMenu:null!=V?V:null,month:2==J.length?Number(u()(J[0]).format("MM")):Number(u()(J).format("MM")),year:2==J.length?Number(u()(J[0]).format("YYYY")):Number(u()(J).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"unapprove_report"})&&(W(null),_(!1))},el=async()=>{$.open({key:"delete_report",type:"loading",content:"Deleting...",duration:0});let e=await (0,k.Z)().post("report/delete",{code:N,codeMenu:null!=V?V:null,month:2==J.length?Number(u()(J[0]).format("MM")):Number(u()(J).format("MM")),year:2==J.length?Number(u()(J[0]).format("YYYY")):Number(u()(J).format("YYYY"))});(0,D.Z)({res:e,app:X,msgTrue:!0,key:"delete_report"})&&j(!0)},{systemTheme:et,theme:en}=(0,m.F)();return(0,t.jsx)(o.ZP,{theme:L?void 0:{components:{Table:"dark"===en?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:"system"===en&&"dark"===et?{borderColor:"#fff",headerBorderRadius:0,cellPaddingBlock:5}:{headerBg:"#79c1eb",borderColor:"#000",headerBorderRadius:0,cellPaddingBlock:5}}},componentSize:"large",children:(0,t.jsxs)(p.Zb,{className:"border-none p-7 w-full shadow-md",children:[(0,t.jsxs)("div",{className:h?"flex flex-wrap mb-6":"flex flex-wrap mb-6 justify-between",children:[(0,t.jsx)(S,{allowClear:T,onDistanceSelect:null!=b?b:void 0,enableSelect:v,disabled:Y?C:null!=q&&q,typeDatePicker:"rangepicker"===w?"":"triwulan"===w?"triwulan":void 0===w?"month":w,disabledDate:R,className:h?"":"rangepicker"==w?"w-full lg:w-2/3 xl:w-3/4":"w-full md:w-3/4 lg:w-2/4",onDateSelect:e=>{""===e||isNaN(null==e?void 0:e.monthNumber)?(null==e?void 0:e.dateStrings)?(Z(e.dateStrings),K(e.dateStrings)):(Z(void 0),K(void 0)):"rangepicker"===w?(null==e?void 0:e.dateStrings)&&(Z(e.dateStrings),K(e.dateStrings)):(Z(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")),K(u()(e.year+"-"+e.monthNumber+"-01").format("YYYY-MM-DD")))},loadingDisable:z,showTime:E,onChangeTri:P}),h,null!=F&&!!F.length&&J&&!C&&(0,t.jsxs)("div",{className:h?"flex flex-row md:justify-end w-full sm:justify-start md:-mt-32 mt-3 ml-1":"flex flex-row",children:[U&&(0,t.jsx)(d.ZP,{className:"w-6 md:my-12 mr-2",onClick:()=>{A(!0)},icon:(0,t.jsx)(O.Z,{style:{fontSize:"25px",color:"#ebde34"}})}),(0,t.jsx)(M,{loadingExport:q,trueApprave:N,approve:Q,onApprove:ee,onUnapprove:ea,onDelete:el,falseDelete:!N,title:null==N?void 0:N.toLowerCase().replaceAll("_"," "),downloadFalse:B,date:"rangemonth"==w?(null==J?void 0:J[0])===(null==J?void 0:J[1])&&"".concat(u()(J[0]).format("YYYY MMMM")):"".concat(u()(J).format("YYYY MMMM")),downloadPdf:g,downloadExcel:y,loadingDisable:z})]})]}),J&&(0,t.jsx)(t.Fragment,{children:C?(0,t.jsx)(x.Z,{className:"-mt-6"}):(0,t.jsx)("div",{className:" md:-mt-6 overflow-auto w-full",children:(null==F?void 0:F.length)||H?(0,t.jsx)("div",{className:a,children:I}):(0,t.jsx)(i.Z,{})})}),l]})})}u().locale("id")},5454:function(e,a,l){l.d(a,{O:function(){return r}});var t=l(57437),n=l(13498);function r(e){let{className:a,...l}=e;return(0,t.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-lg bg-zinc-300 dark:bg-zinc-800",a),...l})}},16584:function(e,a,l){var t=l(57437),n=l(5454);a.Z=e=>{let{className:a}=e;return(0,t.jsx)("div",{className:"flex flex-col w-full  ".concat(a),children:(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-950 p-6 rounded-2xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.O,{className:"h-8 md:w-40"}),(0,t.jsx)(n.O,{className:"h-6 md:w-96"})]}),(0,t.jsx)(n.O,{className:"h-10 w-36 rounded-2xl"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center w-full mt-6 mb-4",children:[(0,t.jsxs)("div",{className:"space-x-2 flex",children:[(0,t.jsx)(n.O,{className:"h-6 md:w-64"}),(0,t.jsx)(n.O,{className:"h-6 w-28"})]}),(0,t.jsx)(n.O,{className:"h-6 w-28 rounded-2xl"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"}),(0,t.jsx)(n.O,{className:"h-6 w-full"})]})]})]})})}}}]);